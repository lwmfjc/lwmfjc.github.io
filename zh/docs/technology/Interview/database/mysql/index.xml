<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>随记</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/</link><description>Recent content on 随记</description><generator>Hugo</generator><language>zh</language><atom:link href="https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/index.xml" rel="self" type="application/rss+xml"/><item><title>InnoDB存储引擎对MVCC的实现</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/innodb-implementation-of-mvcc/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/innodb-implementation-of-mvcc/</guid><description>&lt;h2 id="多版本并发控制-multi-version-concurrency-control">
 多版本并发控制 (Multi-Version Concurrency Control)
 &lt;a class="anchor" href="#%e5%a4%9a%e7%89%88%e6%9c%ac%e5%b9%b6%e5%8f%91%e6%8e%a7%e5%88%b6-multi-version-concurrency-control">#&lt;/a>
&lt;/h2>
&lt;p>MVCC 是一种并发控制机制，用于在多个并发事务同时读写数据库时保持数据的一致性和隔离性。它是通过在每个数据行上维护多个版本的数据来实现的。当一个事务要对数据库中的数据进行修改时，MVCC 会为该事务创建一个数据快照，而不是直接修改实际的数据行。&lt;/p>
&lt;p>1、读操作（SELECT）：&lt;/p>
&lt;p>当一个事务执行读操作时，它会使用快照读取。快照读取是基于事务开始时数据库中的状态创建的，因此事务不会读取其他事务尚未提交的修改。具体工作情况如下：&lt;/p>
&lt;ul>
&lt;li>对于读取操作，事务会查找符合条件的数据行，并选择符合其事务开始时间的数据版本进行读取。&lt;/li>
&lt;li>如果某个数据行有多个版本，事务会选择不晚于其开始时间的最新版本，确保事务只读取在它开始之前已经存在的数据。&lt;/li>
&lt;li>事务读取的是快照数据，因此其他并发事务对数据行的修改不会影响当前事务的读取操作。&lt;/li>
&lt;/ul>
&lt;p>2、写操作（INSERT、UPDATE、DELETE）：&lt;/p>
&lt;p>当一个事务执行写操作时，它会生成一个新的数据版本，并将修改后的数据写入数据库。具体工作情况如下：&lt;/p>
&lt;ul>
&lt;li>对于写操作，事务会为要修改的数据行创建一个新的版本，并将修改后的数据写入新版本。&lt;/li>
&lt;li>新版本的数据会带有当前事务的版本号，以便其他事务能够正确读取相应版本的数据。&lt;/li>
&lt;li>原始版本的数据仍然存在，供其他事务使用快照读取，这保证了其他事务不受当前事务的写操作影响。&lt;/li>
&lt;/ul>
&lt;p>3、事务提交和回滚：&lt;/p>
&lt;ul>
&lt;li>当一个事务提交时，它所做的修改将成为数据库的最新版本，并且对其他事务可见。&lt;/li>
&lt;li>当一个事务回滚时，它所做的修改将被撤销，对其他事务不可见。&lt;/li>
&lt;/ul>
&lt;p>4、版本的回收：&lt;/p>
&lt;p>为了防止数据库中的版本无限增长，MVCC 会定期进行版本的回收。回收机制会删除已经不再需要的旧版本数据，从而释放空间。&lt;/p>
&lt;p>MVCC 通过创建数据的多个版本和使用快照读取来实现并发控制。读操作使用旧版本数据的快照，写操作创建新版本，并确保原始版本仍然可用。这样，不同的事务可以在一定程度上并发执行，而不会相互干扰，从而提高了数据库的并发性能和数据一致性。&lt;/p>
&lt;h2 id="一致性非锁定读和锁定读">
 一致性非锁定读和锁定读
 &lt;a class="anchor" href="#%e4%b8%80%e8%87%b4%e6%80%a7%e9%9d%9e%e9%94%81%e5%ae%9a%e8%af%bb%e5%92%8c%e9%94%81%e5%ae%9a%e8%af%bb">#&lt;/a>
&lt;/h2>
&lt;h3 id="一致性非锁定读">
 一致性非锁定读
 &lt;a class="anchor" href="#%e4%b8%80%e8%87%b4%e6%80%a7%e9%9d%9e%e9%94%81%e5%ae%9a%e8%af%bb">#&lt;/a>
&lt;/h3>
&lt;p>对于 
&lt;a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-consistent-read.html">&lt;strong>一致性非锁定读（Consistent Nonlocking Reads）&lt;/strong>&lt;/a>的实现，通常做法是加一个版本号或者时间戳字段，在更新数据的同时版本号 + 1 或者更新时间戳。查询时，将当前可见的版本号与对应记录的版本号进行比对，如果记录的版本小于可见版本，则表示该记录可见&lt;/p>
&lt;p>在 &lt;code>InnoDB&lt;/code> 存储引擎中，
&lt;a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-multi-versioning.html">多版本控制 (multi versioning)&lt;/a> 就是对非锁定读的实现。如果读取的行正在执行 &lt;code>DELETE&lt;/code> 或 &lt;code>UPDATE&lt;/code> 操作，这时读取操作不会去等待行上锁的释放。相反地，&lt;code>InnoDB&lt;/code> 存储引擎会去读取行的一个快照数据，对于这种读取历史数据的方式，我们叫它快照读 (snapshot read)&lt;/p>
&lt;p>在 &lt;code>Repeatable Read&lt;/code> 和 &lt;code>Read Committed&lt;/code> 两个隔离级别下，如果是执行普通的 &lt;code>select&lt;/code> 语句（不包括 &lt;code>select ... lock in share mode&lt;/code> ,&lt;code>select ... for update&lt;/code>）则会使用 &lt;code>一致性非锁定读（MVCC）&lt;/code>。并且在 &lt;code>Repeatable Read&lt;/code> 下 &lt;code>MVCC&lt;/code> 实现了可重复读和防止部分幻读&lt;/p></description></item><item><title>MySQL查询缓存详解</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-query-cache/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-query-cache/</guid><description>&lt;p>缓存是一个有效且实用的系统性能优化的手段，不论是操作系统还是各种软件和网站或多或少都用到了缓存。&lt;/p>
&lt;p>然而，有经验的 DBA 都建议生产环境中把 MySQL 自带的 Query Cache（查询缓存）给关掉。而且，从 MySQL 5.7.20 开始，就已经默认弃用查询缓存了。在 MySQL 8.0 及之后，更是直接删除了查询缓存的功能。&lt;/p>
&lt;p>这又是为什么呢？查询缓存真就这么鸡肋么?&lt;/p>
&lt;p>带着如下几个问题，我们正式进入本文。&lt;/p>
&lt;ul>
&lt;li>MySQL 查询缓存是什么？适用范围？&lt;/li>
&lt;li>MySQL 缓存规则是什么？&lt;/li>
&lt;li>MySQL 缓存的优缺点是什么？&lt;/li>
&lt;li>MySQL 缓存对性能有什么影响？&lt;/li>
&lt;/ul>
&lt;h2 id="mysql-查询缓存介绍">
 MySQL 查询缓存介绍
 &lt;a class="anchor" href="#mysql-%e6%9f%a5%e8%af%a2%e7%bc%93%e5%ad%98%e4%bb%8b%e7%bb%8d">#&lt;/a>
&lt;/h2>
&lt;p>MySQL 体系架构如下图所示：&lt;/p>
&lt;p>&lt;img src="https://oss.javaguide.cn/github/javaguide/mysql/mysql-architecture.png" alt="" />&lt;/p>
&lt;p>为了提高完全相同的查询语句的响应速度，MySQL Server 会对查询语句进行 Hash 计算得到一个 Hash 值。MySQL Server 不会对 SQL 做任何处理，SQL 必须完全一致 Hash 值才会一样。得到 Hash 值之后，通过该 Hash 值到查询缓存中匹配该查询的结果。&lt;/p>
&lt;ul>
&lt;li>如果匹配（命中），则将查询的结果集直接返回给客户端，不必再解析、执行查询。&lt;/li>
&lt;li>如果没有匹配（未命中），则将 Hash 值和结果集保存在查询缓存中，以便以后使用。&lt;/li>
&lt;/ul>
&lt;p>也就是说，&lt;strong>一个查询语句（select）到了 MySQL Server 之后，会先到查询缓存看看，如果曾经执行过的话，就直接返回结果集给客户端。&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://oss.javaguide.cn/javaguide/13526879-3037b144ed09eb88.png" alt="" />&lt;/p>
&lt;h2 id="mysql-查询缓存管理和配置">
 MySQL 查询缓存管理和配置
 &lt;a class="anchor" href="#mysql-%e6%9f%a5%e8%af%a2%e7%bc%93%e5%ad%98%e7%ae%a1%e7%90%86%e5%92%8c%e9%85%8d%e7%bd%ae">#&lt;/a>
&lt;/h2>
&lt;p>通过 &lt;code>show variables like '%query_cache%'&lt;/code>命令可以查看查询缓存相关的信息。&lt;/p>
&lt;p>8.0 版本之前的话，打印的信息可能是下面这样的：&lt;/p></description></item><item><title>MySQL常见面试题总结</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-questions-01/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-questions-01/</guid><description>&lt;h2 id="mysql-基础">
 MySQL 基础
 &lt;a class="anchor" href="#mysql-%e5%9f%ba%e7%a1%80">#&lt;/a>
&lt;/h2>
&lt;h3 id="什么是关系型数据库">
 什么是关系型数据库？
 &lt;a class="anchor" href="#%e4%bb%80%e4%b9%88%e6%98%af%e5%85%b3%e7%b3%bb%e5%9e%8b%e6%95%b0%e6%8d%ae%e5%ba%93">#&lt;/a>
&lt;/h3>
&lt;p>顾名思义，关系型数据库（RDB，Relational Database）就是一种建立在关系模型的基础上的数据库。关系模型表明了数据库中所存储的数据之间的联系（一对一、一对多、多对多）。&lt;/p>
&lt;p>关系型数据库中，我们的数据都被存放在了各种表中（比如用户表），表中的每一行就存放着一条数据（比如一个用户的信息）。&lt;/p>
&lt;p>&lt;img src="https://oss.javaguide.cn/java-guide-blog/5e3c1a71724a38245aa43b02_99bf70d46cc247be878de9d3a88f0c44.png" alt="关系型数据库表关系" />&lt;/p>
&lt;p>大部分关系型数据库都使用 SQL 来操作数据库中的数据。并且，大部分关系型数据库都支持事务的四大特性(ACID)。&lt;/p>
&lt;p>&lt;strong>有哪些常见的关系型数据库呢？&lt;/strong>&lt;/p>
&lt;p>MySQL、PostgreSQL、Oracle、SQL Server、SQLite（微信本地的聊天记录的存储就是用的 SQLite） ……。&lt;/p>
&lt;h3 id="什么是-sql">
 什么是 SQL？
 &lt;a class="anchor" href="#%e4%bb%80%e4%b9%88%e6%98%af-sql">#&lt;/a>
&lt;/h3>
&lt;p>SQL 是一种结构化查询语言(Structured Query Language)，专门用来与数据库打交道，目的是提供一种从数据库中读写数据的简单有效的方法。&lt;/p>
&lt;p>几乎所有的主流关系数据库都支持 SQL ，适用性非常强。并且，一些非关系型数据库也兼容 SQL 或者使用的是类似于 SQL 的查询语言。&lt;/p>
&lt;p>SQL 可以帮助我们：&lt;/p>
&lt;ul>
&lt;li>新建数据库、数据表、字段；&lt;/li>
&lt;li>在数据库中增加，删除，修改，查询数据；&lt;/li>
&lt;li>新建视图、函数、存储过程；&lt;/li>
&lt;li>对数据库中的数据进行简单的数据分析；&lt;/li>
&lt;li>搭配 Hive，Spark SQL 做大数据；&lt;/li>
&lt;li>搭配 SQLFlow 做机器学习；&lt;/li>
&lt;li>……&lt;/li>
&lt;/ul>
&lt;h3 id="什么是-mysql">
 什么是 MySQL？
 &lt;a class="anchor" href="#%e4%bb%80%e4%b9%88%e6%98%af-mysql">#&lt;/a>
&lt;/h3>
&lt;p>&lt;img src="https://oss.javaguide.cn/github/javaguide/csdn/20210327143351823.png" alt="" />&lt;/p>
&lt;p>&lt;strong>MySQL 是一种关系型数据库，主要用于持久化存储我们的系统中的一些数据比如用户信息。&lt;/strong>&lt;/p>
&lt;p>由于 MySQL 是开源免费并且比较成熟的数据库，因此，MySQL 被大量使用在各种系统中。任何人都可以在 GPL(General Public License) 的许可下下载并根据个性化的需要对其进行修改。MySQL 的默认端口号是&lt;strong>3306&lt;/strong>。&lt;/p>
&lt;h3 id="mysql-有什么优点">
 MySQL 有什么优点？
 &lt;a class="anchor" href="#mysql-%e6%9c%89%e4%bb%80%e4%b9%88%e4%bc%98%e7%82%b9">#&lt;/a>
&lt;/h3>
&lt;p>这个问题本质上是在问 MySQL 如此流行的原因。&lt;/p></description></item><item><title>MySQL高性能优化规范建议总结</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-high-performance-optimization-specification-recommendations/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-high-performance-optimization-specification-recommendations/</guid><description>&lt;blockquote>
&lt;p>作者: 听风 原文地址: 
&lt;a href="https://www.cnblogs.com/huchong/p/10219318.html">https://www.cnblogs.com/huchong/p/10219318.html&lt;/a>。&lt;/p>
&lt;p>JavaGuide 已获得作者授权，并对原文内容进行了完善补充。&lt;/p>
&lt;/blockquote>
&lt;h2 id="数据库命名规范">
 数据库命名规范
 &lt;a class="anchor" href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e5%91%bd%e5%90%8d%e8%a7%84%e8%8c%83">#&lt;/a>
&lt;/h2>
&lt;ul>
&lt;li>所有数据库对象名称必须使用小写字母并用下划线分割&lt;/li>
&lt;li>所有数据库对象名称禁止使用 MySQL 保留关键字（如果表名中包含关键字查询时，需要将其用单引号括起来）&lt;/li>
&lt;li>数据库对象的命名要能做到见名识意，并且最后不要超过 32 个字符&lt;/li>
&lt;li>临时库表必须以 &lt;code>tmp_&lt;/code> 为前缀并以日期为后缀，备份表必须以 &lt;code>bak_&lt;/code> 为前缀并以日期 (时间戳) 为后缀&lt;/li>
&lt;li>所有存储相同数据的列名和列类型必须一致（一般作为关联列，如果查询时关联列类型不一致会自动进行数据类型隐式转换，会造成列上的索引失效，导致查询效率降低）&lt;/li>
&lt;/ul>
&lt;h2 id="数据库基本设计规范">
 数据库基本设计规范
 &lt;a class="anchor" href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e5%9f%ba%e6%9c%ac%e8%ae%be%e8%ae%a1%e8%a7%84%e8%8c%83">#&lt;/a>
&lt;/h2>
&lt;h3 id="所有表必须使用-innodb-存储引擎">
 所有表必须使用 InnoDB 存储引擎
 &lt;a class="anchor" href="#%e6%89%80%e6%9c%89%e8%a1%a8%e5%bf%85%e9%a1%bb%e4%bd%bf%e7%94%a8-innodb-%e5%ad%98%e5%82%a8%e5%bc%95%e6%93%8e">#&lt;/a>
&lt;/h3>
&lt;p>没有特殊要求（即 InnoDB 无法满足的功能如：列存储，存储空间数据等）的情况下，所有表必须使用 InnoDB 存储引擎（MySQL5.5 之前默认使用 Myisam，5.6 以后默认的为 InnoDB）。&lt;/p>
&lt;p>InnoDB 支持事务，支持行级锁，更好的恢复性，高并发下性能更好。&lt;/p>
&lt;h3 id="数据库和表的字符集统一使用-utf8">
 数据库和表的字符集统一使用 UTF8
 &lt;a class="anchor" href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e5%92%8c%e8%a1%a8%e7%9a%84%e5%ad%97%e7%ac%a6%e9%9b%86%e7%bb%9f%e4%b8%80%e4%bd%bf%e7%94%a8-utf8">#&lt;/a>
&lt;/h3>
&lt;p>兼容性更好，统一字符集可以避免由于字符集转换产生的乱码，不同的字符集进行比较前需要进行转换会造成索引失效，如果数据库中有存储 emoji 表情的需要，字符集需要采用 utf8mb4 字符集。&lt;/p>
&lt;p>推荐阅读一下我写的这篇文章：
&lt;a href="../character-set.md">MySQL 字符集详解&lt;/a> 。&lt;/p>
&lt;h3 id="所有表和字段都需要添加注释">
 所有表和字段都需要添加注释
 &lt;a class="anchor" href="#%e6%89%80%e6%9c%89%e8%a1%a8%e5%92%8c%e5%ad%97%e6%ae%b5%e9%83%bd%e9%9c%80%e8%a6%81%e6%b7%bb%e5%8a%a0%e6%b3%a8%e9%87%8a">#&lt;/a>
&lt;/h3>
&lt;p>使用 comment 从句添加表和列的备注，从一开始就进行数据字典的维护&lt;/p>
&lt;h3 id="尽量控制单表数据量的大小建议控制在-500-万以内">
 尽量控制单表数据量的大小，建议控制在 500 万以内
 &lt;a class="anchor" href="#%e5%b0%bd%e9%87%8f%e6%8e%a7%e5%88%b6%e5%8d%95%e8%a1%a8%e6%95%b0%e6%8d%ae%e9%87%8f%e7%9a%84%e5%a4%a7%e5%b0%8f%e5%bb%ba%e8%ae%ae%e6%8e%a7%e5%88%b6%e5%9c%a8-500-%e4%b8%87%e4%bb%a5%e5%86%85">#&lt;/a>
&lt;/h3>
&lt;p>500 万并不是 MySQL 数据库的限制，过大会造成修改表结构，备份，恢复都会有很大的问题。&lt;/p>
&lt;p>可以用历史数据归档（应用于日志数据），分库分表（应用于业务数据）等手段来控制数据量大小&lt;/p>
&lt;h3 id="谨慎使用-mysql-分区表">
 谨慎使用 MySQL 分区表
 &lt;a class="anchor" href="#%e8%b0%a8%e6%85%8e%e4%bd%bf%e7%94%a8-mysql-%e5%88%86%e5%8c%ba%e8%a1%a8">#&lt;/a>
&lt;/h3>
&lt;p>分区表在物理上表现为多个文件，在逻辑上表现为一个表；&lt;/p></description></item><item><title>MySQL日期类型选择建议</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/some-thoughts-on-database-storage-time/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/some-thoughts-on-database-storage-time/</guid><description>&lt;p>我们平时开发中不可避免的就是要存储时间，比如我们要记录操作表中这条记录的时间、记录转账的交易时间、记录出发时间、用户下单时间等等。你会发现时间这个东西与我们开发的联系还是非常紧密的，用的好与不好会给我们的业务甚至功能带来很大的影响。所以，我们有必要重新出发，好好认识一下这个东西。&lt;/p>
&lt;h2 id="不要用字符串存储日期">
 不要用字符串存储日期
 &lt;a class="anchor" href="#%e4%b8%8d%e8%a6%81%e7%94%a8%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%ad%98%e5%82%a8%e6%97%a5%e6%9c%9f">#&lt;/a>
&lt;/h2>
&lt;p>和绝大部分对数据库不太了解的新手一样，我在大学的时候就这样干过，甚至认为这样是一个不错的表示日期的方法。毕竟简单直白，容易上手。&lt;/p>
&lt;p>但是，这是不正确的做法，主要会有下面两个问题：&lt;/p>
&lt;ol>
&lt;li>字符串占用的空间更大！&lt;/li>
&lt;li>字符串存储的日期效率比较低（逐个字符进行比对），无法用日期相关的 API 进行计算和比较。&lt;/li>
&lt;/ol>
&lt;h2 id="datetime-和-timestamp-之间的抉择">
 Datetime 和 Timestamp 之间的抉择
 &lt;a class="anchor" href="#datetime-%e5%92%8c-timestamp-%e4%b9%8b%e9%97%b4%e7%9a%84%e6%8a%89%e6%8b%a9">#&lt;/a>
&lt;/h2>
&lt;p>Datetime 和 Timestamp 是 MySQL 提供的两种比较相似的保存时间的数据类型，可以精确到秒。他们两者究竟该如何选择呢？&lt;/p>
&lt;p>下面我们来简单对比一下二者。&lt;/p>
&lt;h3 id="时区信息">
 时区信息
 &lt;a class="anchor" href="#%e6%97%b6%e5%8c%ba%e4%bf%a1%e6%81%af">#&lt;/a>
&lt;/h3>
&lt;p>&lt;strong>DateTime 类型是没有时区信息的（时区无关）&lt;/strong> ，DateTime 类型保存的时间都是当前会话所设置的时区对应的时间。这样就会有什么问题呢？当你的时区更换之后，比如你的服务器更换地址或者更换客户端连接时区设置的话，就会导致你从数据库中读出的时间错误。&lt;/p>
&lt;p>&lt;strong>Timestamp 和时区有关&lt;/strong>。Timestamp 类型字段的值会随着服务器时区的变化而变化，自动换算成相应的时间，说简单点就是在不同时区，查询到同一个条记录此字段的值会不一样。&lt;/p>
&lt;p>下面实际演示一下！&lt;/p>
&lt;p>建表 SQL 语句：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#f92672">`&lt;/span>time_zone_test&lt;span style="color:#f92672">`&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>id&lt;span style="color:#f92672">`&lt;/span> bigint(&lt;span style="color:#ae81ff">20&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> AUTO_INCREMENT,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>date_time&lt;span style="color:#f92672">`&lt;/span> datetime &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>time_stamp&lt;span style="color:#f92672">`&lt;/span> &lt;span style="color:#66d9ef">timestamp&lt;/span> &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#66d9ef">CURRENT_TIMESTAMP&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> &lt;span style="color:#66d9ef">UPDATE&lt;/span> &lt;span style="color:#66d9ef">CURRENT_TIMESTAMP&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#66d9ef">KEY&lt;/span> (&lt;span style="color:#f92672">`&lt;/span>id&lt;span style="color:#f92672">`&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>) ENGINE&lt;span style="color:#f92672">=&lt;/span>InnoDB &lt;span style="color:#66d9ef">DEFAULT&lt;/span> CHARSET&lt;span style="color:#f92672">=&lt;/span>utf8;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>插入数据：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">INSERT&lt;/span> &lt;span style="color:#66d9ef">INTO&lt;/span> time_zone_test(date_time,time_stamp) &lt;span style="color:#66d9ef">VALUES&lt;/span>(NOW(),NOW());
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>查看数据：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> date_time,time_stamp &lt;span style="color:#66d9ef">from&lt;/span> time_zone_test;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>结果：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>+---------------------+---------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| date_time | time_stamp |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+---------------------+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| 2020-01-11 09:53:32 | 2020-01-11 09:53:32 |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+---------------------+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>现在我们运行&lt;/p></description></item><item><title>MySQL三大日志(binlog、redo log和undo log)详解</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-logs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-logs/</guid><description>&lt;blockquote>
&lt;p>本文来自公号程序猿阿星投稿，JavaGuide 对其做了补充完善。&lt;/p>
&lt;/blockquote>
&lt;h2 id="前言">
 前言
 &lt;a class="anchor" href="#%e5%89%8d%e8%a8%80">#&lt;/a>
&lt;/h2>
&lt;p>MySQL 日志 主要包括错误日志、查询日志、慢查询日志、事务日志、二进制日志几大类。其中，比较重要的还要属二进制日志 binlog（归档日志）和事务日志 redo log（重做日志）和 undo log（回滚日志）。&lt;/p>
&lt;p>&lt;img src="https://oss.javaguide.cn/github/javaguide/01.png" alt="" />&lt;/p>
&lt;p>今天就来聊聊 redo log（重做日志）、binlog（归档日志）、两阶段提交、undo log（回滚日志）。&lt;/p>
&lt;h2 id="redo-log">
 redo log
 &lt;a class="anchor" href="#redo-log">#&lt;/a>
&lt;/h2>
&lt;p>redo log（重做日志）是 InnoDB 存储引擎独有的，它让 MySQL 拥有了崩溃恢复能力。&lt;/p>
&lt;p>比如 MySQL 实例挂了或宕机了，重启时，InnoDB 存储引擎会使用 redo log 恢复数据，保证数据的持久性与完整性。&lt;/p>
&lt;p>&lt;img src="https://oss.javaguide.cn/github/javaguide/02.png" alt="" />&lt;/p>
&lt;p>MySQL 中数据是以页为单位，你查询一条记录，会从硬盘把一页的数据加载出来，加载出来的数据叫数据页，会放入到 &lt;code>Buffer Pool&lt;/code> 中。&lt;/p>
&lt;p>后续的查询都是先从 &lt;code>Buffer Pool&lt;/code> 中找，没有命中再去硬盘加载，减少硬盘 IO 开销，提升性能。&lt;/p>
&lt;p>更新表数据的时候，也是如此，发现 &lt;code>Buffer Pool&lt;/code> 里存在要更新的数据，就直接在 &lt;code>Buffer Pool&lt;/code> 里更新。&lt;/p>
&lt;p>然后会把“在某个数据页上做了什么修改”记录到重做日志缓存（&lt;code>redo log buffer&lt;/code>）里，接着刷盘到 redo log 文件里。&lt;/p>
&lt;p>&lt;img src="https://oss.javaguide.cn/github/javaguide/03.png" alt="" />&lt;/p>
&lt;blockquote>
&lt;p>图片笔误提示：第 4 步 “清空 redo log buffe 刷盘到 redo 日志中”这句话中的 buffe 应该是 buffer。&lt;/p></description></item><item><title>MySQL事务隔离级别详解</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/transaction-isolation-level/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/transaction-isolation-level/</guid><description>&lt;blockquote>
&lt;p>本文由 
&lt;a href="https://github.com/Snailclimb">SnailClimb&lt;/a> 和 
&lt;a href="https://github.com/guang19">guang19&lt;/a> 共同完成。&lt;/p>
&lt;/blockquote>
&lt;p>关于事务基本概览的介绍，请看这篇文章的介绍：
&lt;a href="./mysql-questions-01.md#MySQL-%E4%BA%8B%E5%8A%A1">MySQL 常见知识点&amp;amp;面试题总结&lt;/a>&lt;/p>
&lt;h2 id="事务隔离级别总结">
 事务隔离级别总结
 &lt;a class="anchor" href="#%e4%ba%8b%e5%8a%a1%e9%9a%94%e7%a6%bb%e7%ba%a7%e5%88%ab%e6%80%bb%e7%bb%93">#&lt;/a>
&lt;/h2>
&lt;p>SQL 标准定义了四个隔离级别：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>READ-UNCOMMITTED(读取未提交)&lt;/strong> ：最低的隔离级别，允许读取尚未提交的数据变更，可能会导致脏读、幻读或不可重复读。&lt;/li>
&lt;li>&lt;strong>READ-COMMITTED(读取已提交)&lt;/strong> ：允许读取并发事务已经提交的数据，可以阻止脏读，但是幻读或不可重复读仍有可能发生。&lt;/li>
&lt;li>&lt;strong>REPEATABLE-READ(可重复读)&lt;/strong> ：对同一字段的多次读取结果都是一致的，除非数据是被本身事务自己所修改，可以阻止脏读和不可重复读，但幻读仍有可能发生。&lt;/li>
&lt;li>&lt;strong>SERIALIZABLE(可串行化)&lt;/strong> ：最高的隔离级别，完全服从 ACID 的隔离级别。所有的事务依次逐个执行，这样事务之间就完全不可能产生干扰，也就是说，该级别可以防止脏读、不可重复读以及幻读。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: center">隔离级别&lt;/th>
 &lt;th style="text-align: center">脏读&lt;/th>
 &lt;th style="text-align: center">不可重复读&lt;/th>
 &lt;th style="text-align: center">幻读&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: center">READ-UNCOMMITTED&lt;/td>
 &lt;td style="text-align: center">√&lt;/td>
 &lt;td style="text-align: center">√&lt;/td>
 &lt;td style="text-align: center">√&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: center">READ-COMMITTED&lt;/td>
 &lt;td style="text-align: center">×&lt;/td>
 &lt;td style="text-align: center">√&lt;/td>
 &lt;td style="text-align: center">√&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: center">REPEATABLE-READ&lt;/td>
 &lt;td style="text-align: center">×&lt;/td>
 &lt;td style="text-align: center">×&lt;/td>
 &lt;td style="text-align: center">√&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: center">SERIALIZABLE&lt;/td>
 &lt;td style="text-align: center">×&lt;/td>
 &lt;td style="text-align: center">×&lt;/td>
 &lt;td style="text-align: center">×&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;p>MySQL InnoDB 存储引擎的默认支持的隔离级别是 &lt;strong>REPEATABLE-READ（可重读）&lt;/strong>。我们可以通过&lt;code>SELECT @@tx_isolation;&lt;/code>命令来查看，MySQL 8.0 该命令改为&lt;code>SELECT @@transaction_isolation;&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>MySQL&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#f92672">@@&lt;/span>tx_isolation;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#75715e">-----------------+
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#f92672">@@&lt;/span>tx_isolation &lt;span style="color:#f92672">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#75715e">-----------------+
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">REPEATABLE&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#66d9ef">READ&lt;/span> &lt;span style="color:#f92672">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#75715e">-----------------+
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>从上面对 SQL 标准定义了四个隔离级别的介绍可以看出，标准的 SQL 隔离级别定义里，REPEATABLE-READ(可重复读)是不可以防止幻读的。&lt;/p>
&lt;p>但是！InnoDB 实现的 REPEATABLE-READ 隔离级别其实是可以解决幻读问题发生的，主要有下面两种情况：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>快照读&lt;/strong>：由 MVCC 机制来保证不出现幻读。&lt;/li>
&lt;li>&lt;strong>当前读&lt;/strong>：使用 Next-Key Lock 进行加锁来保证不出现幻读，Next-Key Lock 是行锁（Record Lock）和间隙锁（Gap Lock）的结合，行锁只能锁住已经存在的行，为了避免插入新行，需要依赖间隙锁。&lt;/li>
&lt;/ul>
&lt;p>因为隔离级别越低，事务请求的锁越少，所以大部分数据库系统的隔离级别都是 &lt;strong>READ-COMMITTED&lt;/strong> ，但是你要知道的是 InnoDB 存储引擎默认使用 &lt;strong>REPEATABLE-READ&lt;/strong> 并不会有任何性能损失。&lt;/p></description></item><item><title>MySQL索引详解</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-index/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-index/</guid><description>&lt;blockquote>
&lt;p>感谢
&lt;a href="https://github.com/WT-AHA">WT-AHA&lt;/a>对本文的完善，相关 PR：
&lt;a href="https://github.com/Snailclimb/JavaGuide/pull/1648">https://github.com/Snailclimb/JavaGuide/pull/1648&lt;/a> 。&lt;/p>
&lt;/blockquote>
&lt;p>但凡经历过几场面试的小伙伴，应该都清楚，数据库索引这个知识点在面试中出现的频率高到离谱。&lt;/p>
&lt;p>除了对于准备面试来说非常重要之外，善用索引对 SQL 的性能提升非常明显，是一个性价比较高的 SQL 优化手段。&lt;/p>
&lt;h2 id="索引介绍">
 索引介绍
 &lt;a class="anchor" href="#%e7%b4%a2%e5%bc%95%e4%bb%8b%e7%bb%8d">#&lt;/a>
&lt;/h2>
&lt;p>&lt;strong>索引是一种用于快速查询和检索数据的数据结构，其本质可以看成是一种排序好的数据结构。&lt;/strong>&lt;/p>
&lt;p>索引的作用就相当于书的目录。打个比方: 我们在查字典的时候，如果没有目录，那我们就只能一页一页的去找我们需要查的那个字，速度很慢。如果有目录了，我们只需要先去目录里查找字的位置，然后直接翻到那一页就行了。&lt;/p>
&lt;p>索引底层数据结构存在很多种类型，常见的索引结构有: B 树， B+树 和 Hash、红黑树。在 MySQL 中，无论是 Innodb 还是 MyIsam，都使用了 B+树作为索引结构。&lt;/p>
&lt;h2 id="索引的优缺点">
 索引的优缺点
 &lt;a class="anchor" href="#%e7%b4%a2%e5%bc%95%e7%9a%84%e4%bc%98%e7%bc%ba%e7%82%b9">#&lt;/a>
&lt;/h2>
&lt;p>&lt;strong>优点&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>使用索引可以大大加快数据的检索速度（大大减少检索的数据量）, 减少 IO 次数，这也是创建索引的最主要的原因。&lt;/li>
&lt;li>通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>缺点&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>创建索引和维护索引需要耗费许多时间。当对表中的数据进行增删改的时候，如果数据有索引，那么索引也需要动态的修改，会降低 SQL 执行效率。&lt;/li>
&lt;li>索引需要使用物理文件存储，也会耗费一定空间。&lt;/li>
&lt;/ul>
&lt;p>但是，&lt;strong>使用索引一定能提高查询性能吗?&lt;/strong>&lt;/p>
&lt;p>大多数情况下，索引查询都是比全表扫描要快的。但是如果数据库的数据量不大，那么使用索引也不一定能够带来很大提升。&lt;/p>
&lt;h2 id="索引底层数据结构选型">
 索引底层数据结构选型
 &lt;a class="anchor" href="#%e7%b4%a2%e5%bc%95%e5%ba%95%e5%b1%82%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e9%80%89%e5%9e%8b">#&lt;/a>
&lt;/h2>
&lt;h3 id="hash-表">
 Hash 表
 &lt;a class="anchor" href="#hash-%e8%a1%a8">#&lt;/a>
&lt;/h3>
&lt;p>哈希表是键值对的集合，通过键(key)即可快速取出对应的值(value)，因此哈希表可以快速检索数据（接近 O（1））。&lt;/p>
&lt;p>&lt;strong>为何能够通过 key 快速取出 value 呢？&lt;/strong> 原因在于 &lt;strong>哈希算法&lt;/strong>（也叫散列算法）。通过哈希算法，我们可以快速找到 key 对应的 index，找到了 index 也就找到了对应的 value。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>hash &lt;span style="color:#f92672">=&lt;/span> hashfunc(key)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>index &lt;span style="color:#f92672">=&lt;/span> hash &lt;span style="color:#f92672">%&lt;/span> array_size
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://oss.javaguide.cn/github/javaguide/database/mysql20210513092328171.png" alt="" />&lt;/p></description></item><item><title>MySQL隐式转换造成索引失效</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/index-invalidation-caused-by-implicit-conversion/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/index-invalidation-caused-by-implicit-conversion/</guid><description>&lt;blockquote>
&lt;p>本次测试使用的 MySQL 版本是 &lt;code>5.7.26&lt;/code>，随着 MySQL 版本的更新某些特性可能会发生改变，本文不代表所述观点和结论于 MySQL 所有版本均准确无误，版本差异请自行甄别。&lt;/p>
&lt;p>原文：
&lt;a href="https://www.guitu18.com/post/2019/11/24/61.html">https://www.guitu18.com/post/2019/11/24/61.html&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h2 id="前言">
 前言
 &lt;a class="anchor" href="#%e5%89%8d%e8%a8%80">#&lt;/a>
&lt;/h2>
&lt;p>数据库优化是一个任重而道远的任务，想要做优化必须深入理解数据库的各种特性。在开发过程中我们经常会遇到一些原因很简单但造成的后果却很严重的疑难杂症，这类问题往往还不容易定位，排查费时费力最后发现是一个很小的疏忽造成的，又或者是因为不了解某个技术特性产生的。&lt;/p>
&lt;p>于数据库层面，最常见的恐怕就是索引失效了，且一开始因为数据量小还不易被发现。但随着业务的拓展数据量的提升，性能问题慢慢的就体现出来了，处理不及时还很容易造成雪球效应，最终导致数据库卡死甚至瘫痪。造成索引失效的原因可能有很多种，相关技术博客已经有太多了，今天我要记录的是&lt;strong>隐式转换造成的索引失效&lt;/strong>。&lt;/p>
&lt;h2 id="数据准备">
 数据准备
 &lt;a class="anchor" href="#%e6%95%b0%e6%8d%ae%e5%87%86%e5%a4%87">#&lt;/a>
&lt;/h2>
&lt;p>首先使用存储过程生成 1000 万条测试数据，
测试表一共建立了 7 个字段（包括主键），&lt;code>num1&lt;/code>和&lt;code>num2&lt;/code>保存的是和&lt;code>ID&lt;/code>一样的顺序数字，其中&lt;code>num2&lt;/code>是字符串类型。
&lt;code>type1&lt;/code>和&lt;code>type2&lt;/code>保存的都是主键对 5 的取模，目的是模拟实际应用中常用类似 type 类型的数据，但是&lt;code>type2&lt;/code>是没有建立索引的。
&lt;code>str1&lt;/code>和&lt;code>str2&lt;/code>都是保存了一个 20 位长度的随机字符串，&lt;code>str1&lt;/code>不能为&lt;code>NULL&lt;/code>，&lt;code>str2&lt;/code>允许为&lt;code>NULL&lt;/code>，相应的生成测试数据的时候我也会在&lt;code>str2&lt;/code>字段生产少量&lt;code>NULL&lt;/code>值（每 100 条数据产生一个&lt;code>NULL&lt;/code>值）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 创建测试数据表
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#66d9ef">IF&lt;/span> &lt;span style="color:#66d9ef">EXISTS&lt;/span> test1;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#f92672">`&lt;/span>test1&lt;span style="color:#f92672">`&lt;/span> (
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>id&lt;span style="color:#f92672">`&lt;/span> int(&lt;span style="color:#ae81ff">11&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>num1&lt;span style="color:#f92672">`&lt;/span> int(&lt;span style="color:#ae81ff">11&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#e6db74">&amp;#39;0&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>num2&lt;span style="color:#f92672">`&lt;/span> varchar(&lt;span style="color:#ae81ff">11&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>type1&lt;span style="color:#f92672">`&lt;/span> int(&lt;span style="color:#ae81ff">4&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#e6db74">&amp;#39;0&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>type2&lt;span style="color:#f92672">`&lt;/span> int(&lt;span style="color:#ae81ff">4&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#e6db74">&amp;#39;0&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>str1&lt;span style="color:#f92672">`&lt;/span> varchar(&lt;span style="color:#ae81ff">100&lt;/span>) &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>str2&lt;span style="color:#f92672">`&lt;/span> varchar(&lt;span style="color:#ae81ff">100&lt;/span>) &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#66d9ef">KEY&lt;/span> (&lt;span style="color:#f92672">`&lt;/span>id&lt;span style="color:#f92672">`&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">KEY&lt;/span> &lt;span style="color:#f92672">`&lt;/span>num1&lt;span style="color:#f92672">`&lt;/span> (&lt;span style="color:#f92672">`&lt;/span>num1&lt;span style="color:#f92672">`&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">KEY&lt;/span> &lt;span style="color:#f92672">`&lt;/span>num2&lt;span style="color:#f92672">`&lt;/span> (&lt;span style="color:#f92672">`&lt;/span>num2&lt;span style="color:#f92672">`&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">KEY&lt;/span> &lt;span style="color:#f92672">`&lt;/span>type1&lt;span style="color:#f92672">`&lt;/span> (&lt;span style="color:#f92672">`&lt;/span>type1&lt;span style="color:#f92672">`&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">KEY&lt;/span> &lt;span style="color:#f92672">`&lt;/span>str1&lt;span style="color:#f92672">`&lt;/span> (&lt;span style="color:#f92672">`&lt;/span>str1&lt;span style="color:#f92672">`&lt;/span>),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">KEY&lt;/span> &lt;span style="color:#f92672">`&lt;/span>str2&lt;span style="color:#f92672">`&lt;/span> (&lt;span style="color:#f92672">`&lt;/span>str2&lt;span style="color:#f92672">`&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>) ENGINE&lt;span style="color:#f92672">=&lt;/span>InnoDB &lt;span style="color:#66d9ef">DEFAULT&lt;/span> CHARSET&lt;span style="color:#f92672">=&lt;/span>utf8;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 创建存储过程
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">PROCEDURE&lt;/span> &lt;span style="color:#66d9ef">IF&lt;/span> &lt;span style="color:#66d9ef">EXISTS&lt;/span> pre_test1;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">DELIMITER&lt;/span> &lt;span style="color:#f92672">//&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">PROCEDURE&lt;/span> &lt;span style="color:#f92672">`&lt;/span>pre_test1&lt;span style="color:#f92672">`&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">BEGIN&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">DECLARE&lt;/span> i INT &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SET&lt;/span> autocommit &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> WHILE i &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#ae81ff">10000000&lt;/span> &lt;span style="color:#66d9ef">DO&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SET&lt;/span> i &lt;span style="color:#f92672">=&lt;/span> i &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SET&lt;/span> &lt;span style="color:#f92672">@&lt;/span>str1 &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">SUBSTRING&lt;/span>(MD5(RAND()),&lt;span style="color:#ae81ff">1&lt;/span>,&lt;span style="color:#ae81ff">20&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 每100条数据str2产生一个null值
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">IF&lt;/span> i &lt;span style="color:#f92672">%&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#66d9ef">THEN&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SET&lt;/span> &lt;span style="color:#f92672">@&lt;/span>str2 &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">ELSE&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SET&lt;/span> &lt;span style="color:#f92672">@&lt;/span>str2 &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#f92672">@&lt;/span>str1;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">END&lt;/span> &lt;span style="color:#66d9ef">IF&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">INSERT&lt;/span> &lt;span style="color:#66d9ef">INTO&lt;/span> test1 (&lt;span style="color:#f92672">`&lt;/span>id&lt;span style="color:#f92672">`&lt;/span>, &lt;span style="color:#f92672">`&lt;/span>num1&lt;span style="color:#f92672">`&lt;/span>, &lt;span style="color:#f92672">`&lt;/span>num2&lt;span style="color:#f92672">`&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">`&lt;/span>type1&lt;span style="color:#f92672">`&lt;/span>, &lt;span style="color:#f92672">`&lt;/span>type2&lt;span style="color:#f92672">`&lt;/span>, &lt;span style="color:#f92672">`&lt;/span>str1&lt;span style="color:#f92672">`&lt;/span>, &lt;span style="color:#f92672">`&lt;/span>str2&lt;span style="color:#f92672">`&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">VALUES&lt;/span> (CONCAT(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>, i), CONCAT(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>, i),
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CONCAT(&lt;span style="color:#e6db74">&amp;#39;&amp;#39;&lt;/span>, i), i&lt;span style="color:#f92672">%&lt;/span>&lt;span style="color:#ae81ff">5&lt;/span>, i&lt;span style="color:#f92672">%&lt;/span>&lt;span style="color:#ae81ff">5&lt;/span>, &lt;span style="color:#f92672">@&lt;/span>str1, &lt;span style="color:#f92672">@&lt;/span>str2);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 事务优化，每一万条数据提交一次事务
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">IF&lt;/span> i &lt;span style="color:#f92672">%&lt;/span> &lt;span style="color:#ae81ff">10000&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#66d9ef">THEN&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">COMMIT&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">END&lt;/span> &lt;span style="color:#66d9ef">IF&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">END&lt;/span> WHILE;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">END&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">//&lt;/span> &lt;span style="color:#66d9ef">DELIMITER&lt;/span> ;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 执行存储过程
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CALL&lt;/span> pre_test1();
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>数据量比较大，还涉及使用&lt;code>MD5&lt;/code>生成随机字符串，所以速度有点慢，稍安勿躁，耐心等待即可。&lt;/p></description></item><item><title>MySQL执行计划分析</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-query-execution-plan/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-query-execution-plan/</guid><description>&lt;blockquote>
&lt;p>本文来自公号 MySQL 技术，JavaGuide 对其做了补充完善。原文地址：
&lt;a href="https://mp.weixin.qq.com/s/d5OowNLtXBGEAbT31sSH4g">https://mp.weixin.qq.com/s/d5OowNLtXBGEAbT31sSH4g&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>优化 SQL 的第一步应该是读懂 SQL 的执行计划。本篇文章，我们一起来学习下 MySQL &lt;code>EXPLAIN&lt;/code> 执行计划相关知识。&lt;/p>
&lt;h2 id="什么是执行计划">
 什么是执行计划？
 &lt;a class="anchor" href="#%e4%bb%80%e4%b9%88%e6%98%af%e6%89%a7%e8%a1%8c%e8%ae%a1%e5%88%92">#&lt;/a>
&lt;/h2>
&lt;p>&lt;strong>执行计划&lt;/strong> 是指一条 SQL 语句在经过 &lt;strong>MySQL 查询优化器&lt;/strong> 的优化后，具体的执行方式。&lt;/p>
&lt;p>执行计划通常用于 SQL 性能分析、优化等场景。通过 &lt;code>EXPLAIN&lt;/code> 的结果，可以了解到如数据表的查询顺序、数据查询操作的操作类型、哪些索引可以被命中、哪些索引实际会命中、每个数据表有多少行记录被查询等信息。&lt;/p>
&lt;h2 id="如何获取执行计划">
 如何获取执行计划？
 &lt;a class="anchor" href="#%e5%a6%82%e4%bd%95%e8%8e%b7%e5%8f%96%e6%89%a7%e8%a1%8c%e8%ae%a1%e5%88%92">#&lt;/a>
&lt;/h2>
&lt;p>MySQL 为我们提供了 &lt;code>EXPLAIN&lt;/code> 命令，来获取执行计划的相关信息。&lt;/p>
&lt;p>需要注意的是，&lt;code>EXPLAIN&lt;/code> 语句并不会真的去执行相关的语句，而是通过查询优化器对语句进行分析，找出最优的查询方案，并显示对应的信息。&lt;/p>
&lt;p>&lt;code>EXPLAIN&lt;/code> 执行计划支持 &lt;code>SELECT&lt;/code>、&lt;code>DELETE&lt;/code>、&lt;code>INSERT&lt;/code>、&lt;code>REPLACE&lt;/code> 以及 &lt;code>UPDATE&lt;/code> 语句。我们一般多用于分析 &lt;code>SELECT&lt;/code> 查询语句，使用起来非常简单，语法如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">EXPLAIN&lt;/span> &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">查询语句；&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>我们简单来看下一条查询语句的执行计划：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>mysql&lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">explain&lt;/span> &lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">FROM&lt;/span> dept_emp &lt;span style="color:#66d9ef">WHERE&lt;/span> emp_no &lt;span style="color:#66d9ef">IN&lt;/span> (&lt;span style="color:#66d9ef">SELECT&lt;/span> emp_no &lt;span style="color:#66d9ef">FROM&lt;/span> dept_emp &lt;span style="color:#66d9ef">GROUP&lt;/span> &lt;span style="color:#66d9ef">BY&lt;/span> emp_no &lt;span style="color:#66d9ef">HAVING&lt;/span> &lt;span style="color:#66d9ef">COUNT&lt;/span>(emp_no)&lt;span style="color:#f92672">&amp;gt;&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#75715e">----+-------------+----------+------------+-------+-----------------+---------+---------+------+--------+----------+-------------+
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">|&lt;/span> id &lt;span style="color:#f92672">|&lt;/span> select_type &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> &lt;span style="color:#f92672">|&lt;/span> partitions &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">type&lt;/span> &lt;span style="color:#f92672">|&lt;/span> possible_keys &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">key&lt;/span> &lt;span style="color:#f92672">|&lt;/span> key_len &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">ref&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">rows&lt;/span> &lt;span style="color:#f92672">|&lt;/span> filtered &lt;span style="color:#f92672">|&lt;/span> Extra &lt;span style="color:#f92672">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#75715e">----+-------------+----------+------------+-------+-----------------+---------+---------+------+--------+----------+-------------+
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#f92672">|&lt;/span> dept_emp &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#ae81ff">331143&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span>.&lt;span style="color:#ae81ff">00&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">Using&lt;/span> &lt;span style="color:#66d9ef">where&lt;/span> &lt;span style="color:#f92672">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#f92672">|&lt;/span> SUBQUERY &lt;span style="color:#f92672">|&lt;/span> dept_emp &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">index&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">PRIMARY&lt;/span>,dept_no &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#ae81ff">16&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#ae81ff">331143&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#ae81ff">100&lt;/span>.&lt;span style="color:#ae81ff">00&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">Using&lt;/span> &lt;span style="color:#66d9ef">index&lt;/span> &lt;span style="color:#f92672">|&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#75715e">----+-------------+----------+------------+-------+-----------------+---------+---------+------+--------+----------+-------------+
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>可以看到，执行计划结果中共有 12 列，各列代表的含义总结如下表：&lt;/p></description></item><item><title>MySQL自增主键一定是连续的吗</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-auto-increment-primary-key-continuous/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/mysql-auto-increment-primary-key-continuous/</guid><description>&lt;blockquote>
&lt;p>作者：飞天小牛肉&lt;/p>
&lt;p>原文：
&lt;a href="https://mp.weixin.qq.com/s/qci10h9rJx_COZbHV3aygQ">https://mp.weixin.qq.com/s/qci10h9rJx_COZbHV3aygQ&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>众所周知，自增主键可以让聚集索引尽量地保持递增顺序插入，避免了随机查询，从而提高了查询效率。&lt;/p>
&lt;p>但实际上，MySQL 的自增主键并不能保证一定是连续递增的。&lt;/p>
&lt;p>下面举个例子来看下，如下所示创建一张表：&lt;/p>
&lt;p>&lt;img src="https://oss.javaguide.cn/p3-juejin/3e6b80ba50cb425386b80924e3da0d23~tplv-k3u1fbpfcp-zoom-1.png" alt="" />&lt;/p>
&lt;h2 id="自增值保存在哪里">
 自增值保存在哪里？
 &lt;a class="anchor" href="#%e8%87%aa%e5%a2%9e%e5%80%bc%e4%bf%9d%e5%ad%98%e5%9c%a8%e5%93%aa%e9%87%8c">#&lt;/a>
&lt;/h2>
&lt;p>使用 &lt;code>insert into test_pk values(null, 1, 1)&lt;/code> 插入一行数据，再执行 &lt;code>show create table&lt;/code> 命令来看一下表的结构定义：&lt;/p>
&lt;p>&lt;img src="https://oss.javaguide.cn/p3-juejin/c17e46230bd34150966f0d86b2ad5e91~tplv-k3u1fbpfcp-zoom-1.png" alt="" />&lt;/p>
&lt;p>上述表的结构定义存放在后缀名为 &lt;code>.frm&lt;/code> 的本地文件中，在 MySQL 安装目录下的 data 文件夹下可以找到这个 &lt;code>.frm&lt;/code> 文件：&lt;/p>
&lt;p>&lt;img src="https://oss.javaguide.cn/p3-juejin/3ec0514dd7be423d80b9e7f2d52f5902~tplv-k3u1fbpfcp-zoom-1.png" alt="" />&lt;/p>
&lt;p>从上述表结构可以看到，表定义里面出现了一个 &lt;code>AUTO_INCREMENT=2&lt;/code>，表示下一次插入数据时，如果需要自动生成自增值，会生成 id = 2。&lt;/p>
&lt;p>但需要注意的是，自增值并不会保存在这个表结构也就是 &lt;code>.frm&lt;/code> 文件中，不同的引擎对于自增值的保存策略不同：&lt;/p>
&lt;p>1）MyISAM 引擎的自增值保存在数据文件中&lt;/p>
&lt;p>2）InnoDB 引擎的自增值，其实是保存在了内存里，并没有持久化。第一次打开表的时候，都会去找自增值的最大值 &lt;code>max(id)&lt;/code>，然后将 &lt;code>max(id)+1&lt;/code> 作为这个表当前的自增值。&lt;/p>
&lt;p>举个例子：我们现在表里当前数据行里最大的 id 是 1，AUTO_INCREMENT=2，对吧。这时候，我们删除 id=1 的行，AUTO_INCREMENT 还是 2。&lt;/p>
&lt;p>&lt;img src="https://oss.javaguide.cn/p3-juejin/61b8dc9155624044a86d91c368b20059~tplv-k3u1fbpfcp-zoom-1.png" alt="" />&lt;/p>
&lt;p>但如果马上重启 MySQL 实例，重启后这个表的 AUTO_INCREMENT 就会变成 1。﻿ 也就是说，MySQL 重启可能会修改一个表的 AUTO_INCREMENT 的值。&lt;/p></description></item><item><title>SQL语句在MySQL中的执行过程</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/how-sql-executed-in-mysql/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/how-sql-executed-in-mysql/</guid><description>&lt;blockquote>
&lt;p>本文来自
&lt;a href="https://github.com/kinglaw1204">木木匠&lt;/a>投稿。&lt;/p>
&lt;/blockquote>
&lt;p>本篇文章会分析下一个 SQL 语句在 MySQL 中的执行流程，包括 SQL 的查询在 MySQL 内部会怎么流转，SQL 语句的更新是怎么完成的。&lt;/p>
&lt;p>在分析之前我会先带着你看看 MySQL 的基础架构，知道了 MySQL 由那些组件组成以及这些组件的作用是什么，可以帮助我们理解和解决这些问题。&lt;/p>
&lt;h2 id="一-mysql-基础架构分析">
 一 MySQL 基础架构分析
 &lt;a class="anchor" href="#%e4%b8%80-mysql-%e5%9f%ba%e7%a1%80%e6%9e%b6%e6%9e%84%e5%88%86%e6%9e%90">#&lt;/a>
&lt;/h2>
&lt;h3 id="11-mysql-基本架构概览">
 1.1 MySQL 基本架构概览
 &lt;a class="anchor" href="#11-mysql-%e5%9f%ba%e6%9c%ac%e6%9e%b6%e6%9e%84%e6%a6%82%e8%a7%88">#&lt;/a>
&lt;/h3>
&lt;p>下图是 MySQL 的一个简要架构图，从下图你可以很清晰的看到用户的 SQL 语句在 MySQL 内部是如何执行的。&lt;/p>
&lt;p>先简单介绍一下下图涉及的一些组件的基本作用帮助大家理解这幅图，在 1.2 节中会详细介绍到这些组件的作用。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>连接器：&lt;/strong> 身份认证和权限相关(登录 MySQL 的时候)。&lt;/li>
&lt;li>&lt;strong>查询缓存：&lt;/strong> 执行查询语句的时候，会先查询缓存（MySQL 8.0 版本后移除，因为这个功能不太实用）。&lt;/li>
&lt;li>&lt;strong>分析器：&lt;/strong> 没有命中缓存的话，SQL 语句就会经过分析器，分析器说白了就是要先看你的 SQL 语句要干嘛，再检查你的 SQL 语句语法是否正确。&lt;/li>
&lt;li>&lt;strong>优化器：&lt;/strong> 按照 MySQL 认为最优的方案去执行。&lt;/li>
&lt;li>&lt;strong>执行器：&lt;/strong> 执行语句，然后从存储引擎返回数据。 -&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://oss.javaguide.cn/javaguide/13526879-3037b144ed09eb88.png" alt="" />&lt;/p>
&lt;p>简单来说 MySQL 主要分为 Server 层和存储引擎层：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Server 层&lt;/strong>：主要包括连接器、查询缓存、分析器、优化器、执行器等，所有跨存储引擎的功能都在这一层实现，比如存储过程、触发器、视图，函数等，还有一个通用的日志模块 binlog 日志模块。&lt;/li>
&lt;li>&lt;strong>存储引擎&lt;/strong>：主要负责数据的存储和读取，采用可以替换的插件式架构，支持 InnoDB、MyISAM、Memory 等多个存储引擎，其中 InnoDB 引擎有自有的日志模块 redolog 模块。&lt;strong>现在最常用的存储引擎是 InnoDB，它从 MySQL 5.5 版本开始就被当做默认存储引擎了。&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h3 id="12-server-层基本组件介绍">
 1.2 Server 层基本组件介绍
 &lt;a class="anchor" href="#12-server-%e5%b1%82%e5%9f%ba%e6%9c%ac%e7%bb%84%e4%bb%b6%e4%bb%8b%e7%bb%8d">#&lt;/a>
&lt;/h3>
&lt;h4 id="1-连接器">
 1) 连接器
 &lt;a class="anchor" href="#1-%e8%bf%9e%e6%8e%a5%e5%99%a8">#&lt;/a>
&lt;/h4>
&lt;p>连接器主要和身份认证和权限相关的功能相关，就好比一个级别很高的门卫一样。&lt;/p></description></item><item><title>一千行 MySQL 学习笔记</title><link>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/a-thousand-lines-of-mysql-study-notes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lwmfjc.github.io/zh/docs/technology/Interview/database/mysql/a-thousand-lines-of-mysql-study-notes/</guid><description>&lt;blockquote>
&lt;p>原文地址：
&lt;a href="https://shockerli.net/post/1000-line-mysql-note/">https://shockerli.net/post/1000-line-mysql-note/&lt;/a> ，JavaGuide 对本文进行了简答排版，新增了目录。&lt;/p>
&lt;/blockquote>
&lt;p>非常不错的总结，强烈建议保存下来，需要的时候看一看。&lt;/p>
&lt;h3 id="基本操作">
 基本操作
 &lt;a class="anchor" href="#%e5%9f%ba%e6%9c%ac%e6%93%8d%e4%bd%9c">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* Windows服务 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 启动 MySQL
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>			net &lt;span style="color:#66d9ef">start&lt;/span> mysql
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 创建Windows服务
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>				sc &lt;span style="color:#66d9ef">create&lt;/span> mysql binPath&lt;span style="color:#f92672">=&lt;/span> mysqld_bin_path(&lt;span style="color:#960050;background-color:#1e0010">注意：等号与值之间有空格&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 连接与断开服务器 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 连接 MySQL
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>				mysql &lt;span style="color:#f92672">-&lt;/span>h &lt;span style="color:#960050;background-color:#1e0010">地址&lt;/span> &lt;span style="color:#f92672">-&lt;/span>P &lt;span style="color:#960050;background-color:#1e0010">端口&lt;/span> &lt;span style="color:#f92672">-&lt;/span>u &lt;span style="color:#960050;background-color:#1e0010">用户名&lt;/span> &lt;span style="color:#f92672">-&lt;/span>p &lt;span style="color:#960050;background-color:#1e0010">密码&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 显示哪些线程正在运行
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>				&lt;span style="color:#66d9ef">SHOW&lt;/span> PROCESSLIST
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 显示系统变量信息
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>				&lt;span style="color:#66d9ef">SHOW&lt;/span> VARIABLES
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="数据库操作">
 数据库操作
 &lt;a class="anchor" href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e6%93%8d%e4%bd%9c">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 数据库操作 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 查看当前数据库
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#66d9ef">DATABASE&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 显示当前时间、用户名、数据库版本
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SELECT&lt;/span> now(), &lt;span style="color:#66d9ef">user&lt;/span>(), &lt;span style="color:#66d9ef">version&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 创建库
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">DATABASE&lt;/span>[ &lt;span style="color:#66d9ef">IF&lt;/span> &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">EXISTS&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">数据库名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">数据库选项&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">数据库选项：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CHARACTER &lt;span style="color:#66d9ef">SET&lt;/span> charset_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">COLLATE&lt;/span> &lt;span style="color:#66d9ef">collation_name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 查看已有库
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> DATABASES[ &lt;span style="color:#66d9ef">LIKE&lt;/span> &lt;span style="color:#e6db74">&amp;#39;PATTERN&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 查看当前库信息
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> &lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">DATABASE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">数据库名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 修改库的选项信息
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ALTER&lt;/span> &lt;span style="color:#66d9ef">DATABASE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">库名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">选项信息&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 删除库
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">DATABASE&lt;/span>[ &lt;span style="color:#66d9ef">IF&lt;/span> &lt;span style="color:#66d9ef">EXISTS&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">数据库名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">同时删除该数据库相关的目录及其目录内容&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="表的操作">
 表的操作
 &lt;a class="anchor" href="#%e8%a1%a8%e7%9a%84%e6%93%8d%e4%bd%9c">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 表的操作 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 创建表
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">CREATE&lt;/span> [&lt;span style="color:#66d9ef">TEMPORARY&lt;/span>] &lt;span style="color:#66d9ef">TABLE&lt;/span>[ &lt;span style="color:#66d9ef">IF&lt;/span> &lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">EXISTS&lt;/span>] [&lt;span style="color:#960050;background-color:#1e0010">库名&lt;/span>.]&lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> ( &lt;span style="color:#960050;background-color:#1e0010">表的结构定义&lt;/span> )[ &lt;span style="color:#960050;background-color:#1e0010">表选项&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">每个字段必须有数据类型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">最后一个字段后不能有逗号&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">TEMPORARY&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">临时表，会话结束时表自动消失&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">对于字段的定义：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">数据类型&lt;/span> [&lt;span style="color:#66d9ef">NOT&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> &lt;span style="color:#66d9ef">NULL&lt;/span>] [&lt;span style="color:#66d9ef">DEFAULT&lt;/span> default_value] [AUTO_INCREMENT] [&lt;span style="color:#66d9ef">UNIQUE&lt;/span> [&lt;span style="color:#66d9ef">KEY&lt;/span>] &lt;span style="color:#f92672">|&lt;/span> [&lt;span style="color:#66d9ef">PRIMARY&lt;/span>] &lt;span style="color:#66d9ef">KEY&lt;/span>] [&lt;span style="color:#66d9ef">COMMENT&lt;/span> &lt;span style="color:#e6db74">&amp;#39;string&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 表选项
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 字符集
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> CHARSET &lt;span style="color:#f92672">=&lt;/span> charset_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">如果表没有设定，则使用数据库字符集&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 存储引擎
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> ENGINE &lt;span style="color:#f92672">=&lt;/span> engine_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">表在管理数据时采用的不同的数据结构，结构不同会导致处理方式、提供的特性操作等不同&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">常见的引擎：&lt;/span>InnoDB MyISAM Memory&lt;span style="color:#f92672">/&lt;/span>Heap BDB Merge Example CSV MaxDB Archive
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">不同的引擎在保存表的结构和数据时采用不同的方式&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MyISAM表文件含义&lt;span style="color:#960050;background-color:#1e0010">：&lt;/span>.frm表定义&lt;span style="color:#960050;background-color:#1e0010">，&lt;/span>.MYD表数据&lt;span style="color:#960050;background-color:#1e0010">，&lt;/span>.MYI表索引
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> InnoDB表文件含义&lt;span style="color:#960050;background-color:#1e0010">：&lt;/span>.frm表定义&lt;span style="color:#960050;background-color:#1e0010">，表空间数据和日志文件&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SHOW&lt;/span> ENGINES &lt;span style="color:#75715e">-- 显示存储引擎的状态信息
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> ENGINE &lt;span style="color:#960050;background-color:#1e0010">引擎名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">{&lt;/span>LOGS&lt;span style="color:#f92672">|&lt;/span>STATUS&lt;span style="color:#960050;background-color:#1e0010">}&lt;/span> &lt;span style="color:#75715e">-- 显示存储引擎的日志或状态信息
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 自增起始数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> 	AUTO_INCREMENT &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">行数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 数据文件目录
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">DATA&lt;/span> DIRECTORY &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;目录&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 索引文件目录
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">INDEX&lt;/span> DIRECTORY &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;目录&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 表注释
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">COMMENT&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#39;string&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 分区选项
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> PARTITION &lt;span style="color:#66d9ef">BY&lt;/span> ... (&lt;span style="color:#960050;background-color:#1e0010">详细见手册&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 查看所有表
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> TABLES[ &lt;span style="color:#66d9ef">LIKE&lt;/span> &lt;span style="color:#e6db74">&amp;#39;pattern&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SHOW&lt;/span> TABLES &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">库名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 查看表结构
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> &lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">（信息更详细）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">DESC&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#f92672">/&lt;/span> &lt;span style="color:#66d9ef">DESCRIBE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#f92672">/&lt;/span> &lt;span style="color:#66d9ef">EXPLAIN&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#f92672">/&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> COLUMNS &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> [&lt;span style="color:#66d9ef">LIKE&lt;/span> &lt;span style="color:#e6db74">&amp;#39;PATTERN&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SHOW&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> STATUS [&lt;span style="color:#66d9ef">FROM&lt;/span> db_name] [&lt;span style="color:#66d9ef">LIKE&lt;/span> &lt;span style="color:#e6db74">&amp;#39;pattern&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 修改表
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 修改表本身的选项
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ALTER&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表的选项&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> eg: &lt;span style="color:#66d9ef">ALTER&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> ENGINE&lt;span style="color:#f92672">=&lt;/span>MYISAM;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 对表进行重命名
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">RENAME&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">原表名&lt;/span> &lt;span style="color:#66d9ef">TO&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">新表名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">RENAME&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">原表名&lt;/span> &lt;span style="color:#66d9ef">TO&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">库名&lt;/span>.&lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">（可将表移动到另一个数据库）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- RENAME可以交换两个表名
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 修改表的字段机构（13.1.2. ALTER TABLE语法）
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ALTER&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">操作名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 操作名
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ADD&lt;/span>[ &lt;span style="color:#66d9ef">COLUMN&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">字段定义&lt;/span> &lt;span style="color:#75715e">-- 增加字段
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">AFTER&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span> &lt;span style="color:#75715e">-- 表示增加在该字段名后面
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">FIRST&lt;/span> &lt;span style="color:#75715e">-- 表示增加在第一个
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ADD&lt;/span> &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#66d9ef">KEY&lt;/span>(&lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span>) &lt;span style="color:#75715e">-- 创建主键
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ADD&lt;/span> &lt;span style="color:#66d9ef">UNIQUE&lt;/span> [&lt;span style="color:#960050;background-color:#1e0010">索引名&lt;/span>] (&lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span>)&lt;span style="color:#75715e">-- 创建唯一索引
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ADD&lt;/span> &lt;span style="color:#66d9ef">INDEX&lt;/span> [&lt;span style="color:#960050;background-color:#1e0010">索引名&lt;/span>] (&lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span>) &lt;span style="color:#75715e">-- 创建普通索引
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">DROP&lt;/span>[ &lt;span style="color:#66d9ef">COLUMN&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span> &lt;span style="color:#75715e">-- 删除字段
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">MODIFY&lt;/span>[ &lt;span style="color:#66d9ef">COLUMN&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字段属性&lt;/span> &lt;span style="color:#75715e">-- 支持对字段属性进行修改，不能修改字段名(所有原有属性也需写上)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> CHANGE[ &lt;span style="color:#66d9ef">COLUMN&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">原字段名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">新字段名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字段属性&lt;/span> &lt;span style="color:#75715e">-- 支持对字段名修改
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#66d9ef">KEY&lt;/span> &lt;span style="color:#75715e">-- 删除主键(删除主键前需删除其AUTO_INCREMENT属性)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">INDEX&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">索引名&lt;/span> &lt;span style="color:#75715e">-- 删除索引
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">FOREIGN&lt;/span> &lt;span style="color:#66d9ef">KEY&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">外键&lt;/span> &lt;span style="color:#75715e">-- 删除外键
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 删除表
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span>[ &lt;span style="color:#66d9ef">IF&lt;/span> &lt;span style="color:#66d9ef">EXISTS&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 清空表数据
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">TRUNCATE&lt;/span> [&lt;span style="color:#66d9ef">TABLE&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 复制表结构
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#66d9ef">LIKE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">要复制的表名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 复制表结构和数据
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> [&lt;span style="color:#66d9ef">AS&lt;/span>] &lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">要复制的表名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 检查表是否有错误
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">CHECK&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> tbl_name [, tbl_name] ... [&lt;span style="color:#66d9ef">option&lt;/span>] ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 优化表
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> OPTIMIZE [&lt;span style="color:#66d9ef">LOCAL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> NO_WRITE_TO_BINLOG] &lt;span style="color:#66d9ef">TABLE&lt;/span> tbl_name [, tbl_name] ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 修复表
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> REPAIR [&lt;span style="color:#66d9ef">LOCAL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> NO_WRITE_TO_BINLOG] &lt;span style="color:#66d9ef">TABLE&lt;/span> tbl_name [, tbl_name] ... [QUICK] [EXTENDED] [USE_FRM]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 分析表
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ANALYZE&lt;/span> [&lt;span style="color:#66d9ef">LOCAL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> NO_WRITE_TO_BINLOG] &lt;span style="color:#66d9ef">TABLE&lt;/span> tbl_name [, tbl_name] ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="数据操作">
 数据操作
 &lt;a class="anchor" href="#%e6%95%b0%e6%8d%ae%e6%93%8d%e4%bd%9c">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 数据操作 */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 增
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">INSERT&lt;/span> [&lt;span style="color:#66d9ef">INTO&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> [(&lt;span style="color:#960050;background-color:#1e0010">字段列表&lt;/span>)] &lt;span style="color:#66d9ef">VALUES&lt;/span> (&lt;span style="color:#960050;background-color:#1e0010">值列表&lt;/span>)[, (&lt;span style="color:#960050;background-color:#1e0010">值列表&lt;/span>), ...]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 如果要插入的值列表包含所有字段并且顺序一致，则可以省略字段列表。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 可同时插入多条数据记录！
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> REPLACE与INSERT类似&lt;span style="color:#960050;background-color:#1e0010">，唯一的区别是对于匹配的行，现有行（与主键&lt;/span>&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">唯一键比较）的数据会被替换，如果没有现有行，则插入新行。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">INSERT&lt;/span> [&lt;span style="color:#66d9ef">INTO&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#66d9ef">SET&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">值&lt;/span>[, &lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">值&lt;/span>, ...]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 查
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字段列表&lt;/span> &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span>[ &lt;span style="color:#960050;background-color:#1e0010">其他子句&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 可来自多个表的多个字段
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 其他子句可以不使用
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 字段列表可以用*代替，表示所有字段
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 删
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">DELETE&lt;/span> &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span>[ &lt;span style="color:#960050;background-color:#1e0010">删除条件子句&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">没有条件子句，则会删除全部&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 改
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">UPDATE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#66d9ef">SET&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">新值&lt;/span>[, &lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">新值&lt;/span>] [&lt;span style="color:#960050;background-color:#1e0010">更新条件&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="字符集编码">
 字符集编码
 &lt;a class="anchor" href="#%e5%ad%97%e7%ac%a6%e9%9b%86%e7%bc%96%e7%a0%81">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 字符集编码 */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- MySQL、数据库、表、字段均可设置编码
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 数据编码与客户端编码不需一致
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">SHOW&lt;/span> VARIABLES &lt;span style="color:#66d9ef">LIKE&lt;/span> &lt;span style="color:#e6db74">&amp;#39;character_set_%&amp;#39;&lt;/span> &lt;span style="color:#75715e">-- 查看所有字符集编码项
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> character_set_client &lt;span style="color:#960050;background-color:#1e0010">客户端向服务器发送数据时使用的编码&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> character_set_results &lt;span style="color:#960050;background-color:#1e0010">服务器端将结果返回给客户端所使用的编码&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> character_set_connection &lt;span style="color:#960050;background-color:#1e0010">连接层编码&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">SET&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">变量名&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">变量值&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SET&lt;/span> character_set_client &lt;span style="color:#f92672">=&lt;/span> gbk;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SET&lt;/span> character_set_results &lt;span style="color:#f92672">=&lt;/span> gbk;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SET&lt;/span> character_set_connection &lt;span style="color:#f92672">=&lt;/span> gbk;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">SET&lt;/span> &lt;span style="color:#66d9ef">NAMES&lt;/span> GBK; &lt;span style="color:#75715e">-- 相当于完成以上三个设置
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 校对集
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">校对集用以排序&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SHOW&lt;/span> CHARACTER &lt;span style="color:#66d9ef">SET&lt;/span> [&lt;span style="color:#66d9ef">LIKE&lt;/span> &lt;span style="color:#e6db74">&amp;#39;pattern&amp;#39;&lt;/span>]&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#66d9ef">SHOW&lt;/span> CHARSET [&lt;span style="color:#66d9ef">LIKE&lt;/span> &lt;span style="color:#e6db74">&amp;#39;pattern&amp;#39;&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">查看所有字符集&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SHOW&lt;/span> &lt;span style="color:#66d9ef">COLLATION&lt;/span> [&lt;span style="color:#66d9ef">LIKE&lt;/span> &lt;span style="color:#e6db74">&amp;#39;pattern&amp;#39;&lt;/span>] &lt;span style="color:#960050;background-color:#1e0010">查看所有校对集&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> CHARSET &lt;span style="color:#960050;background-color:#1e0010">字符集编码&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">设置字符集编码&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">COLLATE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">校对集编码&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">设置校对集编码&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="数据类型列类型">
 数据类型(列类型)
 &lt;a class="anchor" href="#%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e5%88%97%e7%b1%bb%e5%9e%8b">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 数据类型（列类型） */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">数值类型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- a. 整型 ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">类型&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">范围（有符号位）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tinyint &lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">128&lt;/span> &lt;span style="color:#f92672">~&lt;/span> &lt;span style="color:#ae81ff">127&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">无符号位：&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span> &lt;span style="color:#f92672">~&lt;/span> &lt;span style="color:#ae81ff">255&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> smallint &lt;span style="color:#ae81ff">2&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">32768&lt;/span> &lt;span style="color:#f92672">~&lt;/span> &lt;span style="color:#ae81ff">32767&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mediumint &lt;span style="color:#ae81ff">3&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">8388608&lt;/span> &lt;span style="color:#f92672">~&lt;/span> &lt;span style="color:#ae81ff">8388607&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> int &lt;span style="color:#ae81ff">4&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> bigint &lt;span style="color:#ae81ff">8&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> int(M) M表示总位数
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">默认存在符号位，&lt;/span>unsigned &lt;span style="color:#960050;background-color:#1e0010">属性修改&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">显示宽度，如果某个数不够定义字段时设置的位数，则前面以&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">补填，&lt;/span>zerofill &lt;span style="color:#960050;background-color:#1e0010">属性修改&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">例：&lt;/span>int(&lt;span style="color:#ae81ff">5&lt;/span>) &lt;span style="color:#960050;background-color:#1e0010">插入一个数&lt;/span>&lt;span style="color:#e6db74">&amp;#39;123&amp;#39;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，补填后为&lt;/span>&lt;span style="color:#e6db74">&amp;#39;00123&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">在满足要求的情况下，越小越好。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">表示&lt;/span>bool值真&lt;span style="color:#960050;background-color:#1e0010">，&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">表示&lt;/span>bool值假&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>MySQL没有布尔类型&lt;span style="color:#960050;background-color:#1e0010">，通过整型&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">和&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">表示。常用&lt;/span>tinyint(&lt;span style="color:#ae81ff">1&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">表示布尔型。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- b. 浮点型 ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">类型&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">范围&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> float(&lt;span style="color:#960050;background-color:#1e0010">单精度&lt;/span>) &lt;span style="color:#ae81ff">4&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> double(&lt;span style="color:#960050;background-color:#1e0010">双精度&lt;/span>) &lt;span style="color:#ae81ff">8&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">浮点型既支持符号位&lt;/span> unsigned &lt;span style="color:#960050;background-color:#1e0010">属性，也支持显示宽度&lt;/span> zerofill &lt;span style="color:#960050;background-color:#1e0010">属性。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">不同于整型，前后均会补填&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">定义浮点型时，需指定总位数和小数位数。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> float(M, D) double(M, D)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> M表示总位数&lt;span style="color:#960050;background-color:#1e0010">，&lt;/span>D表示小数位数&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> M和D的大小会决定浮点数的范围&lt;span style="color:#960050;background-color:#1e0010">。不同于整型的固定范围。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> M既表示总位数&lt;span style="color:#960050;background-color:#1e0010">（不包括小数点和正负号），也表示显示宽度（所有显示符号均包括）。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">支持科学计数法表示。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">浮点数表示近似值。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- c. 定点数 ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> decimal &lt;span style="color:#75715e">-- 可变长度
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> decimal(M, D) M也表示总位数&lt;span style="color:#960050;background-color:#1e0010">，&lt;/span>D表示小数位数&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">保存一个精确的数值，不会发生数据的改变，不同于浮点数的四舍五入。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">将浮点数转换为字符串来保存，每&lt;/span>&lt;span style="color:#ae81ff">9&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">位数字保存为&lt;/span>&lt;span style="color:#ae81ff">4&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">个字节。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">字符串类型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- a. char, varchar ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> char &lt;span style="color:#960050;background-color:#1e0010">定长字符串，速度快，但浪费空间&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> varchar &lt;span style="color:#960050;background-color:#1e0010">变长字符串，速度慢，但节省空间&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> M表示能存储的最大长度&lt;span style="color:#960050;background-color:#1e0010">，此长度是字符数，非字节数。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">不同的编码，所占用的空间不同。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> char,&lt;span style="color:#960050;background-color:#1e0010">最多&lt;/span>&lt;span style="color:#ae81ff">255&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">个字符，与编码无关。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> varchar,&lt;span style="color:#960050;background-color:#1e0010">最多&lt;/span>&lt;span style="color:#ae81ff">65535&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字符，与编码有关。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">一条有效记录最大不能超过&lt;/span>&lt;span style="color:#ae81ff">65535&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">个字节。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> utf8 &lt;span style="color:#960050;background-color:#1e0010">最大为&lt;/span>&lt;span style="color:#ae81ff">21844&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">个字符，&lt;/span>gbk &lt;span style="color:#960050;background-color:#1e0010">最大为&lt;/span>&lt;span style="color:#ae81ff">32766&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">个字符，&lt;/span>latin1 &lt;span style="color:#960050;background-color:#1e0010">最大为&lt;/span>&lt;span style="color:#ae81ff">65532&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">个字符&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> varchar &lt;span style="color:#960050;background-color:#1e0010">是变长的，需要利用存储空间保存&lt;/span> varchar &lt;span style="color:#960050;background-color:#1e0010">的长度，如果数据小于&lt;/span>&lt;span style="color:#ae81ff">255&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">个字节，则采用一个字节来保存长度，反之需要两个字节来保存。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> varchar &lt;span style="color:#960050;background-color:#1e0010">的最大有效长度由最大行大小和使用的字符集确定。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">最大有效长度是&lt;/span>&lt;span style="color:#ae81ff">65532&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节，因为在&lt;/span>varchar存字符串时&lt;span style="color:#960050;background-color:#1e0010">，第一个字节是空的，不存在任何数据，然后还需两个字节来存放字符串的长度，所以有效长度是&lt;/span>&lt;span style="color:#ae81ff">65535&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">65532&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">例：若一个表定义为&lt;/span> &lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> tb(c1 int, c2 char(&lt;span style="color:#ae81ff">30&lt;/span>), c3 varchar(N)) charset&lt;span style="color:#f92672">=&lt;/span>utf8; &lt;span style="color:#960050;background-color:#1e0010">问&lt;/span>N的最大值是多少&lt;span style="color:#960050;background-color:#1e0010">？&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">答：&lt;/span>(&lt;span style="color:#ae81ff">65535&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">4&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">30&lt;/span>&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#ae81ff">3&lt;/span>)&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#ae81ff">3&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- b. blob, text ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> blob &lt;span style="color:#960050;background-color:#1e0010">二进制字符串（字节字符串）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tinyblob, blob, mediumblob, longblob
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> text &lt;span style="color:#960050;background-color:#1e0010">非二进制字符串（字符字符串）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tinytext, text, mediumtext, longtext
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> text &lt;span style="color:#960050;background-color:#1e0010">在定义时，不需要定义长度，也不会计算总长度。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> text &lt;span style="color:#960050;background-color:#1e0010">类型在定义时，不可给&lt;/span>default值
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- c. binary, varbinary ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">类似于&lt;/span>char和varchar&lt;span style="color:#960050;background-color:#1e0010">，用于保存二进制字符串，也就是保存字节字符串而非字符字符串。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> char, varchar, text &lt;span style="color:#960050;background-color:#1e0010">对应&lt;/span> binary, varbinary, blob.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">3&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">日期时间类型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">一般用整型保存时间戳，因为&lt;/span>PHP可以很方便的将时间戳进行格式化&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> datetime &lt;span style="color:#ae81ff">8&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">日期及时间&lt;/span> &lt;span style="color:#ae81ff">1000&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">01&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">01&lt;/span> &lt;span style="color:#ae81ff">00&lt;/span>:&lt;span style="color:#ae81ff">00&lt;/span>:&lt;span style="color:#ae81ff">00&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">到&lt;/span> &lt;span style="color:#ae81ff">9999&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">12&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">31&lt;/span> &lt;span style="color:#ae81ff">23&lt;/span>:&lt;span style="color:#ae81ff">59&lt;/span>:&lt;span style="color:#ae81ff">59&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> date &lt;span style="color:#ae81ff">3&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">日期&lt;/span> &lt;span style="color:#ae81ff">1000&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">01&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">01&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">到&lt;/span> &lt;span style="color:#ae81ff">9999&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">12&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">31&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">timestamp&lt;/span> &lt;span style="color:#ae81ff">4&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">时间戳&lt;/span> &lt;span style="color:#ae81ff">19700101000000&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">到&lt;/span> &lt;span style="color:#ae81ff">2038&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">01&lt;/span>&lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">19&lt;/span> &lt;span style="color:#ae81ff">03&lt;/span>:&lt;span style="color:#ae81ff">14&lt;/span>:&lt;span style="color:#ae81ff">07&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> time &lt;span style="color:#ae81ff">3&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">时间&lt;/span> &lt;span style="color:#f92672">-&lt;/span>&lt;span style="color:#ae81ff">838&lt;/span>:&lt;span style="color:#ae81ff">59&lt;/span>:&lt;span style="color:#ae81ff">59&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">到&lt;/span> &lt;span style="color:#ae81ff">838&lt;/span>:&lt;span style="color:#ae81ff">59&lt;/span>:&lt;span style="color:#ae81ff">59&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">year&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">字节&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">年份&lt;/span> &lt;span style="color:#ae81ff">1901&lt;/span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#ae81ff">2155&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>datetime YYYY&lt;span style="color:#f92672">-&lt;/span>MM&lt;span style="color:#f92672">-&lt;/span>DD hh:mm:ss
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">timestamp&lt;/span> YY&lt;span style="color:#f92672">-&lt;/span>MM&lt;span style="color:#f92672">-&lt;/span>DD hh:mm:ss
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YYYYMMDDhhmmss
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YYMMDDhhmmss
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YYYYMMDDhhmmss
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YYMMDDhhmmss
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>date YYYY&lt;span style="color:#f92672">-&lt;/span>MM&lt;span style="color:#f92672">-&lt;/span>DD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YY&lt;span style="color:#f92672">-&lt;/span>MM&lt;span style="color:#f92672">-&lt;/span>DD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YYYYMMDD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YYMMDD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YYYYMMDD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YYMMDD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>time hh:mm:ss
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hhmmss
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> hhmmss
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">year&lt;/span> YYYY
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YY
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YYYY
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> YY
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">4&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">枚举和集合&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 枚举(enum) ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>enum(val1, val2, val3...)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">在已知的值中进行单选。最大数量为&lt;/span>&lt;span style="color:#ae81ff">65535&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">枚举值在保存时，以&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">个字节的整型&lt;/span>(smallint)&lt;span style="color:#960050;background-color:#1e0010">保存。每个枚举值，按保存的位置顺序，从&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">开始逐一递增。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">表现为字符串类型，存储却是整型。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> NULL值的索引是NULL&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">空字符串错误值的索引值是&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 集合（set） ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">set&lt;/span>(val1, val2, val3...)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">create&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> tab ( gender &lt;span style="color:#66d9ef">set&lt;/span>(&lt;span style="color:#e6db74">&amp;#39;男&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;女&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;无&amp;#39;&lt;/span>) );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">insert&lt;/span> &lt;span style="color:#66d9ef">into&lt;/span> tab &lt;span style="color:#66d9ef">values&lt;/span> (&lt;span style="color:#e6db74">&amp;#39;男, 女&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">最多可以有&lt;/span>&lt;span style="color:#ae81ff">64&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">个不同的成员。以&lt;/span>bigint存储&lt;span style="color:#960050;background-color:#1e0010">，共&lt;/span>&lt;span style="color:#ae81ff">8&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">个字节。采取位运算的形式。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">当创建表时，&lt;/span>SET成员值的尾部空格将自动被删除&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="列属性列约束">
 列属性(列约束)
 &lt;a class="anchor" href="#%e5%88%97%e5%b1%9e%e6%80%a7%e5%88%97%e7%ba%a6%e6%9d%9f">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 列属性（列约束） */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#66d9ef">PRIMARY&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">主键&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">能唯一标识记录的字段，可以作为主键。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">一个表只能有一个主键。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">主键具有唯一性。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">声明字段时，用&lt;/span> &lt;span style="color:#66d9ef">primary&lt;/span> &lt;span style="color:#66d9ef">key&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">标识。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">也可以在字段列表之后声明&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">例：&lt;/span>&lt;span style="color:#66d9ef">create&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> tab ( id int, stu varchar(&lt;span style="color:#ae81ff">10&lt;/span>), &lt;span style="color:#66d9ef">primary&lt;/span> &lt;span style="color:#66d9ef">key&lt;/span> (id));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">主键字段的值不能为&lt;/span>&lt;span style="color:#66d9ef">null&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">主键可以由多个字段共同组成。此时需要在字段列表后声明的方法。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">例：&lt;/span>&lt;span style="color:#66d9ef">create&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> tab ( id int, stu varchar(&lt;span style="color:#ae81ff">10&lt;/span>), age int, &lt;span style="color:#66d9ef">primary&lt;/span> &lt;span style="color:#66d9ef">key&lt;/span> (stu, age));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#66d9ef">UNIQUE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">唯一索引（唯一约束）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">使得某字段的值也不能重复。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">3&lt;/span>. &lt;span style="color:#66d9ef">NULL&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">约束&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> null不是数据类型&lt;span style="color:#960050;background-color:#1e0010">，是列的一个属性。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">表示当前列是否可以为&lt;/span>&lt;span style="color:#66d9ef">null&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，表示什么都没有。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">null&lt;/span>, &lt;span style="color:#960050;background-color:#1e0010">允许为空。默认。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">not&lt;/span> &lt;span style="color:#66d9ef">null&lt;/span>, &lt;span style="color:#960050;background-color:#1e0010">不允许为空。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">insert&lt;/span> &lt;span style="color:#66d9ef">into&lt;/span> tab &lt;span style="color:#66d9ef">values&lt;/span> (&lt;span style="color:#66d9ef">null&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;val&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 此时表示将第一个字段的值设为null, 取决于该字段是否允许为null
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#ae81ff">4&lt;/span>. &lt;span style="color:#66d9ef">DEFAULT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">默认值属性&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">当前字段的默认值。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">insert&lt;/span> &lt;span style="color:#66d9ef">into&lt;/span> tab &lt;span style="color:#66d9ef">values&lt;/span> (&lt;span style="color:#66d9ef">default&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;val&amp;#39;&lt;/span>); &lt;span style="color:#75715e">-- 此时表示强制使用默认值。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">create&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> tab ( add_time &lt;span style="color:#66d9ef">timestamp&lt;/span> &lt;span style="color:#66d9ef">default&lt;/span> &lt;span style="color:#66d9ef">current_timestamp&lt;/span> );
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 表示将当前时间的时间戳设为默认值。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">current_date&lt;/span>, &lt;span style="color:#66d9ef">current_time&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">5&lt;/span>. AUTO_INCREMENT &lt;span style="color:#960050;background-color:#1e0010">自动增长约束&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">自动增长必须为索引（主键或&lt;/span>&lt;span style="color:#66d9ef">unique&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">只能存在一个字段为自动增长。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">默认为&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">开始自动增长。可以通过表属性&lt;/span> auto_increment &lt;span style="color:#f92672">=&lt;/span> x进行设置&lt;span style="color:#960050;background-color:#1e0010">，或&lt;/span> &lt;span style="color:#66d9ef">alter&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> tbl auto_increment &lt;span style="color:#f92672">=&lt;/span> x;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">6&lt;/span>. &lt;span style="color:#66d9ef">COMMENT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">注释&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">例：&lt;/span>&lt;span style="color:#66d9ef">create&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> tab ( id int ) &lt;span style="color:#66d9ef">comment&lt;/span> &lt;span style="color:#e6db74">&amp;#39;注释内容&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">7&lt;/span>. &lt;span style="color:#66d9ef">FOREIGN&lt;/span> &lt;span style="color:#66d9ef">KEY&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">外键约束&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">用于限制主表与从表数据完整性。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">alter&lt;/span> &lt;span style="color:#66d9ef">table&lt;/span> t1 &lt;span style="color:#66d9ef">add&lt;/span> &lt;span style="color:#66d9ef">constraint&lt;/span> &lt;span style="color:#f92672">`&lt;/span>t1_t2_fk&lt;span style="color:#f92672">`&lt;/span> &lt;span style="color:#66d9ef">foreign&lt;/span> &lt;span style="color:#66d9ef">key&lt;/span> (t1_id) &lt;span style="color:#66d9ef">references&lt;/span> t2(id);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 将表t1的t1_id外键关联到表t2的id字段。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 每个外键都有一个名字，可以通过 constraint 指定
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">存在外键的表，称之为从表（子表），外键指向的表，称之为主表（父表）。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">作用：保持数据一致性，完整性，主要目的是控制存储在外键表（从表）中的数据。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MySQL中&lt;span style="color:#960050;background-color:#1e0010">，可以对&lt;/span>InnoDB引擎使用外键约束&lt;span style="color:#960050;background-color:#1e0010">：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">语法：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">foreign&lt;/span> &lt;span style="color:#66d9ef">key&lt;/span> (&lt;span style="color:#960050;background-color:#1e0010">外键字段）&lt;/span> &lt;span style="color:#66d9ef">references&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">主表名&lt;/span> (&lt;span style="color:#960050;background-color:#1e0010">关联字段&lt;/span>) [&lt;span style="color:#960050;background-color:#1e0010">主表记录删除时的动作&lt;/span>] [&lt;span style="color:#960050;background-color:#1e0010">主表记录更新时的动作&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">此时需要检测一个从表的外键需要约束为主表的已存在的值。外键在没有关联的情况下，可以设置为&lt;/span>&lt;span style="color:#66d9ef">null&lt;/span>.&lt;span style="color:#960050;background-color:#1e0010">前提是该外键列，没有&lt;/span>&lt;span style="color:#66d9ef">not&lt;/span> &lt;span style="color:#66d9ef">null&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">可以不指定主表记录更改或更新时的动作，那么此时主表的操作被拒绝。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">如果指定了&lt;/span> &lt;span style="color:#66d9ef">on&lt;/span> &lt;span style="color:#66d9ef">update&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">或&lt;/span> &lt;span style="color:#66d9ef">on&lt;/span> &lt;span style="color:#66d9ef">delete&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">：在删除或更新时，有如下几个操作可以选择：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#66d9ef">cascade&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，级联操作。主表数据被更新（主键值更新），从表也被更新（外键值更新）。主表记录被删除，从表相关记录也被删除。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#66d9ef">set&lt;/span> &lt;span style="color:#66d9ef">null&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，设置为&lt;/span>&lt;span style="color:#66d9ef">null&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">。主表数据被更新（主键值更新），从表的外键被设置为&lt;/span>&lt;span style="color:#66d9ef">null&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">。主表记录被删除，从表相关记录外键被设置成&lt;/span>&lt;span style="color:#66d9ef">null&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">。但注意，要求该外键列，没有&lt;/span>&lt;span style="color:#66d9ef">not&lt;/span> null属性约束&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">3&lt;/span>. &lt;span style="color:#66d9ef">restrict&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，拒绝父表删除和更新。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">注意，外键只被&lt;/span>InnoDB存储引擎所支持&lt;span style="color:#960050;background-color:#1e0010">。其他引擎是不支持的。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="建表规范">
 建表规范
 &lt;a class="anchor" href="#%e5%bb%ba%e8%a1%a8%e8%a7%84%e8%8c%83">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 建表规范 */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- Normal Format, NF
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">每个表保存一个实体信息&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">每个具有一个&lt;/span>ID字段作为主键
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> ID主键 &lt;span style="color:#f92672">+&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">原子表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 1NF, 第一范式
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字段不能再分，就满足第一范式。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 2NF, 第二范式
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">满足第一范式的前提下，不能出现部分依赖。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">消除复合主键就可以避免部分依赖。增加单列关键字。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 3NF, 第三范式
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">满足第二范式的前提下，不能出现传递依赖。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">某个字段依赖于主键，而有其他字段依赖于该字段。这就是传递依赖。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">将一个实体信息的数据放在一个表内实现。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="select">
 SELECT
 &lt;a class="anchor" href="#select">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* SELECT */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">SELECT&lt;/span> [&lt;span style="color:#66d9ef">ALL&lt;/span>&lt;span style="color:#f92672">|&lt;/span>&lt;span style="color:#66d9ef">DISTINCT&lt;/span>] select_expr &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#f92672">-&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">WHERE&lt;/span> &lt;span style="color:#f92672">-&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">GROUP&lt;/span> &lt;span style="color:#66d9ef">BY&lt;/span> [&lt;span style="color:#960050;background-color:#1e0010">合计函数&lt;/span>] &lt;span style="color:#f92672">-&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">HAVING&lt;/span> &lt;span style="color:#f92672">-&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">ORDER&lt;/span> &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#f92672">-&amp;gt;&lt;/span> &lt;span style="color:#66d9ef">LIMIT&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>a. select_expr
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 可以用 * 表示所有字段。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">from&lt;/span> tb;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 可以使用表达式（计算公式、函数调用、字段也是个表达式）
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">select&lt;/span> stu, &lt;span style="color:#ae81ff">29&lt;/span>&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#ae81ff">25&lt;/span>, now() &lt;span style="color:#66d9ef">from&lt;/span> tb;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 可以为每个列使用别名。适用于简化列标识，避免多个列标识符重复。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">使用&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">关键字，也可省略&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">select&lt;/span> stu&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#ae81ff">10&lt;/span> &lt;span style="color:#66d9ef">as&lt;/span> add10 &lt;span style="color:#66d9ef">from&lt;/span> tb;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>b. &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">子句&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">用于标识查询来源。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 可以为表起别名。使用as关键字。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">FROM&lt;/span> tb1 &lt;span style="color:#66d9ef">AS&lt;/span> tt, tb2 &lt;span style="color:#66d9ef">AS&lt;/span> bb;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- from子句后，可以同时出现多个表。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 多个表会横向叠加到一起，而数据会形成一个笛卡尔积。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">FROM&lt;/span> tb1, tb2;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 向优化符提示如何选择索引
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> USE &lt;span style="color:#66d9ef">INDEX&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">、&lt;/span>&lt;span style="color:#66d9ef">IGNORE&lt;/span> &lt;span style="color:#66d9ef">INDEX&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">、&lt;/span>&lt;span style="color:#66d9ef">FORCE&lt;/span> &lt;span style="color:#66d9ef">INDEX&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">FROM&lt;/span> table1 USE &lt;span style="color:#66d9ef">INDEX&lt;/span> (key1,key2) &lt;span style="color:#66d9ef">WHERE&lt;/span> key1&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#66d9ef">AND&lt;/span> key2&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#66d9ef">AND&lt;/span> key3&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">3&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">FROM&lt;/span> table1 &lt;span style="color:#66d9ef">IGNORE&lt;/span> &lt;span style="color:#66d9ef">INDEX&lt;/span> (key3) &lt;span style="color:#66d9ef">WHERE&lt;/span> key1&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#66d9ef">AND&lt;/span> key2&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#66d9ef">AND&lt;/span> key3&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">3&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">c&lt;/span>. &lt;span style="color:#66d9ef">WHERE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">子句&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 从from获得的数据源中进行筛选。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 整型1表示真，0表示假。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 表达式由运算符和运算数组成。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 运算数：变量（字段）、值、函数返回值
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#75715e">-- 运算符：
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">=&lt;/span>, &lt;span style="color:#f92672">&amp;lt;=&amp;gt;&lt;/span>, &lt;span style="color:#f92672">&amp;lt;&amp;gt;&lt;/span>, &lt;span style="color:#f92672">!=&lt;/span>, &lt;span style="color:#f92672">&amp;lt;=&lt;/span>, &lt;span style="color:#f92672">&amp;lt;&lt;/span>, &lt;span style="color:#f92672">&amp;gt;=&lt;/span>, &lt;span style="color:#f92672">&amp;gt;&lt;/span>, &lt;span style="color:#f92672">!&lt;/span>, &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span>, &lt;span style="color:#f92672">||&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">in&lt;/span> (&lt;span style="color:#66d9ef">not&lt;/span>) &lt;span style="color:#66d9ef">null&lt;/span>, (&lt;span style="color:#66d9ef">not&lt;/span>) &lt;span style="color:#66d9ef">like&lt;/span>, (&lt;span style="color:#66d9ef">not&lt;/span>) &lt;span style="color:#66d9ef">in&lt;/span>, (&lt;span style="color:#66d9ef">not&lt;/span>) &lt;span style="color:#66d9ef">between&lt;/span> &lt;span style="color:#66d9ef">and&lt;/span>, &lt;span style="color:#66d9ef">is&lt;/span> (&lt;span style="color:#66d9ef">not&lt;/span>), &lt;span style="color:#66d9ef">and&lt;/span>, &lt;span style="color:#66d9ef">or&lt;/span>, &lt;span style="color:#66d9ef">not&lt;/span>, xor
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">is&lt;/span>&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#66d9ef">is&lt;/span> &lt;span style="color:#66d9ef">not&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">加上&lt;/span>&lt;span style="color:#66d9ef">true&lt;/span>&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#66d9ef">false&lt;/span>&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#66d9ef">unknown&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，检验某个值的真假&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;=&amp;gt;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">与&lt;/span>&lt;span style="color:#f92672">&amp;lt;&amp;gt;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">功能相同，&lt;/span>&lt;span style="color:#f92672">&amp;lt;=&amp;gt;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">可用于&lt;/span>null比较
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>d. &lt;span style="color:#66d9ef">GROUP&lt;/span> &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">子句&lt;/span>, &lt;span style="color:#960050;background-color:#1e0010">分组子句&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">GROUP&lt;/span> &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字段&lt;/span>&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">别名&lt;/span> [&lt;span style="color:#960050;background-color:#1e0010">排序方式&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">分组后会进行排序。升序：&lt;/span>&lt;span style="color:#66d9ef">ASC&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，降序：&lt;/span>&lt;span style="color:#66d9ef">DESC&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">以下&lt;/span>[&lt;span style="color:#960050;background-color:#1e0010">合计函数&lt;/span>]&lt;span style="color:#960050;background-color:#1e0010">需配合&lt;/span> &lt;span style="color:#66d9ef">GROUP&lt;/span> &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">使用：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">count&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">返回不同的非&lt;/span>NULL值数目 &lt;span style="color:#66d9ef">count&lt;/span>(&lt;span style="color:#f92672">*&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">、&lt;/span>&lt;span style="color:#66d9ef">count&lt;/span>(&lt;span style="color:#960050;background-color:#1e0010">字段&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">sum&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">求和&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">max&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">求最大值&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">min&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">求最小值&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">avg&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">求平均值&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> group_concat &lt;span style="color:#960050;background-color:#1e0010">返回带有来自一个组的连接的非&lt;/span>NULL值的字符串结果&lt;span style="color:#960050;background-color:#1e0010">。组内字符串连接。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>e. &lt;span style="color:#66d9ef">HAVING&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">子句，条件子句&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">与&lt;/span> &lt;span style="color:#66d9ef">where&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">功能、用法相同，执行时机不同。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">where&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">在开始时执行检测数据，对原数据进行过滤。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">having&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">对筛选出的结果再次进行过滤。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">having&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字段必须是查询出来的，&lt;/span>&lt;span style="color:#66d9ef">where&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">字段必须是数据表存在的。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">where&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">不可以使用字段的别名，&lt;/span>&lt;span style="color:#66d9ef">having&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">可以。因为执行&lt;/span>WHERE代码时&lt;span style="color:#960050;background-color:#1e0010">，可能尚未确定列值。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">where&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">不可以使用合计函数。一般需用合计函数才会用&lt;/span> &lt;span style="color:#66d9ef">having&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SQL标准要求HAVING必须引用GROUP BY子句中的列或用于合计函数中的列&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>f. &lt;span style="color:#66d9ef">ORDER&lt;/span> &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">子句，排序子句&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">order&lt;/span> &lt;span style="color:#66d9ef">by&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">排序字段&lt;/span>&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">别名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">排序方式&lt;/span> [,&lt;span style="color:#960050;background-color:#1e0010">排序字段&lt;/span>&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">别名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">排序方式&lt;/span>]...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">升序：&lt;/span>&lt;span style="color:#66d9ef">ASC&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，降序：&lt;/span>&lt;span style="color:#66d9ef">DESC&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">支持多个字段的排序。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">g&lt;/span>. &lt;span style="color:#66d9ef">LIMIT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">子句，限制结果数量子句&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">仅对处理好的结果进行数量限制。将处理好的结果的看作是一个集合，按照记录出现的顺序，索引从&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">开始。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">limit&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">起始位置&lt;/span>, &lt;span style="color:#960050;background-color:#1e0010">获取条数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">省略第一个参数，表示从索引&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">开始。&lt;/span>&lt;span style="color:#66d9ef">limit&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">获取条数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>h. &lt;span style="color:#66d9ef">DISTINCT&lt;/span>, &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">选项&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">distinct&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">去除重复记录&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">默认为&lt;/span> &lt;span style="color:#66d9ef">all&lt;/span>, &lt;span style="color:#960050;background-color:#1e0010">全部记录&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="union">
 UNION
 &lt;a class="anchor" href="#union">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* UNION */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">将多个&lt;/span>select查询的结果组合成一个结果集合&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SELECT&lt;/span> ... &lt;span style="color:#66d9ef">UNION&lt;/span> [&lt;span style="color:#66d9ef">ALL&lt;/span>&lt;span style="color:#f92672">|&lt;/span>&lt;span style="color:#66d9ef">DISTINCT&lt;/span>] &lt;span style="color:#66d9ef">SELECT&lt;/span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">默认&lt;/span> &lt;span style="color:#66d9ef">DISTINCT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">方式，即所有返回的行都是唯一的&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">建议，对每个&lt;/span>SELECT查询加上小括号包裹&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">ORDER&lt;/span> &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">排序时，需加上&lt;/span> &lt;span style="color:#66d9ef">LIMIT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">进行结合。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">需要各&lt;/span>select查询的字段数量一样&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">每个&lt;/span>select查询的字段列表(&lt;span style="color:#960050;background-color:#1e0010">数量、类型&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">应一致，因为结果中的字段名以第一条&lt;/span>select语句为准&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="子查询">
 子查询
 &lt;a class="anchor" href="#%e5%ad%90%e6%9f%a5%e8%af%a2">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 子查询 */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">子查询需用括号包裹。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- from型
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> from后要求是一个表&lt;span style="color:#960050;background-color:#1e0010">，必须给子查询结果取个别名。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">简化每个查询内的条件。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> from型需将结果生成一个临时表格&lt;span style="color:#960050;background-color:#1e0010">，可用以原表的锁定的释放。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">子查询返回一个表，表型子查询。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">from&lt;/span> (&lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">from&lt;/span> tb &lt;span style="color:#66d9ef">where&lt;/span> id&lt;span style="color:#f92672">&amp;gt;&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>) &lt;span style="color:#66d9ef">as&lt;/span> subfrom &lt;span style="color:#66d9ef">where&lt;/span> id&lt;span style="color:#f92672">&amp;gt;&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- where型
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">子查询返回一个值，标量子查询。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">不需要给子查询取别名。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> where子查询内的表&lt;span style="color:#960050;background-color:#1e0010">，不能直接用以更新。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">from&lt;/span> tb &lt;span style="color:#66d9ef">where&lt;/span> money &lt;span style="color:#f92672">=&lt;/span> (&lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#66d9ef">max&lt;/span>(money) &lt;span style="color:#66d9ef">from&lt;/span> tb);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 列子查询
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">如果子查询结果返回的是一列。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">使用&lt;/span> &lt;span style="color:#66d9ef">in&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">或&lt;/span> &lt;span style="color:#66d9ef">not&lt;/span> &lt;span style="color:#66d9ef">in&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">完成查询&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">exists&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">和&lt;/span> &lt;span style="color:#66d9ef">not&lt;/span> &lt;span style="color:#66d9ef">exists&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">条件&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">如果子查询返回数据，则返回&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">或&lt;/span>&lt;span style="color:#ae81ff">0&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">。常用于判断条件。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">select&lt;/span> column1 &lt;span style="color:#66d9ef">from&lt;/span> t1 &lt;span style="color:#66d9ef">where&lt;/span> &lt;span style="color:#66d9ef">exists&lt;/span> (&lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">from&lt;/span> t2);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 行子查询
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">查询条件是一个行。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">from&lt;/span> t1 &lt;span style="color:#66d9ef">where&lt;/span> (id, gender) &lt;span style="color:#66d9ef">in&lt;/span> (&lt;span style="color:#66d9ef">select&lt;/span> id, gender &lt;span style="color:#66d9ef">from&lt;/span> t2);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">行构造符：&lt;/span>(col1, col2, ...) &lt;span style="color:#960050;background-color:#1e0010">或&lt;/span> &lt;span style="color:#66d9ef">ROW&lt;/span>(col1, col2, ...)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">行构造符通常用于与对能返回两个或两个以上列的子查询进行比较。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 特殊运算符
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">all&lt;/span>() &lt;span style="color:#960050;background-color:#1e0010">相当于&lt;/span> &lt;span style="color:#66d9ef">not&lt;/span> &lt;span style="color:#66d9ef">in&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">some&lt;/span>() &lt;span style="color:#960050;background-color:#1e0010">相当于&lt;/span> &lt;span style="color:#66d9ef">in&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>&lt;span style="color:#66d9ef">any&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">是&lt;/span> &lt;span style="color:#66d9ef">some&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">的别名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">!=&lt;/span> &lt;span style="color:#66d9ef">some&lt;/span>() &lt;span style="color:#960050;background-color:#1e0010">不等同于&lt;/span> &lt;span style="color:#66d9ef">not&lt;/span> &lt;span style="color:#66d9ef">in&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，不等于其中某一个。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">all&lt;/span>, &lt;span style="color:#66d9ef">some&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">可以配合其他运算符一起使用。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="连接查询join">
 连接查询(join)
 &lt;a class="anchor" href="#%e8%bf%9e%e6%8e%a5%e6%9f%a5%e8%af%a2join">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 连接查询(join) */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">将多个表的字段进行连接，可以指定连接条件。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 内连接(inner join)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">默认就是内连接，可省略&lt;/span>&lt;span style="color:#66d9ef">inner&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">只有数据存在时才能发送连接。即连接结果不能出现空行。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">on&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表示连接条件。其条件表达式与&lt;/span>where类似&lt;span style="color:#960050;background-color:#1e0010">。也可以省略条件（表示条件永远为真）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">也可用&lt;/span>where表示连接条件&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">还有&lt;/span> &lt;span style="color:#66d9ef">using&lt;/span>, &lt;span style="color:#960050;background-color:#1e0010">但需字段名相同。&lt;/span> &lt;span style="color:#66d9ef">using&lt;/span>(&lt;span style="color:#960050;background-color:#1e0010">字段名&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 交叉连接 cross join
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">即，没有条件的内连接。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">from&lt;/span> tb1 &lt;span style="color:#66d9ef">cross&lt;/span> &lt;span style="color:#66d9ef">join&lt;/span> tb2;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 外连接(outer join)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">如果数据不存在，也会出现在连接结果中。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 左外连接 left join
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">如果数据不存在，左表记录会出现，而右表为&lt;/span>null填充
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 右外连接 right join
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">如果数据不存在，右表记录会出现，而左表为&lt;/span>null填充
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 自然连接(natural join)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">自动判断连接条件完成连接。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">相当于省略了&lt;/span>&lt;span style="color:#66d9ef">using&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，会自动查找相同字段名。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">natural&lt;/span> &lt;span style="color:#66d9ef">join&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">natural&lt;/span> &lt;span style="color:#66d9ef">left&lt;/span> &lt;span style="color:#66d9ef">join&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">natural&lt;/span> &lt;span style="color:#66d9ef">right&lt;/span> &lt;span style="color:#66d9ef">join&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> info.id, info.name, info.stu_num, extra_info.hobby, extra_info.sex &lt;span style="color:#66d9ef">from&lt;/span> info, extra_info &lt;span style="color:#66d9ef">where&lt;/span> info.stu_num &lt;span style="color:#f92672">=&lt;/span> extra_info.stu_id;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="truncate">
 TRUNCATE
 &lt;a class="anchor" href="#truncate">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* TRUNCATE */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">TRUNCATE&lt;/span> [&lt;span style="color:#66d9ef">TABLE&lt;/span>] tbl_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">清空数据&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">删除重建表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">区别：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，&lt;/span>&lt;span style="color:#66d9ef">truncate&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">是删除表再创建，&lt;/span>&lt;span style="color:#66d9ef">delete&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">是逐条删除&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">2&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，&lt;/span>&lt;span style="color:#66d9ef">truncate&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">重置&lt;/span>auto_increment的值&lt;span style="color:#960050;background-color:#1e0010">。而&lt;/span>delete不会
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">3&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，&lt;/span>&lt;span style="color:#66d9ef">truncate&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">不知道删除了几条，而&lt;/span>delete知道&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">4&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，当被用于带分区的表时，&lt;/span>&lt;span style="color:#66d9ef">truncate&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">会保留分区&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="备份与还原">
 备份与还原
 &lt;a class="anchor" href="#%e5%a4%87%e4%bb%bd%e4%b8%8e%e8%bf%98%e5%8e%9f">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 备份与还原 */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">备份，将数据的结构与表内数据保存起来。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">利用&lt;/span> mysqldump &lt;span style="color:#960050;background-color:#1e0010">指令完成。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 导出
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>mysqldump [&lt;span style="color:#66d9ef">options&lt;/span>] db_name [tables]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mysqldump [&lt;span style="color:#66d9ef">options&lt;/span>] &lt;span style="color:#75715e">---database DB1 [DB2 DB3...]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>mysqldump [&lt;span style="color:#66d9ef">options&lt;/span>] &lt;span style="color:#75715e">--all--database
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">导出一张表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>　　mysqldump &lt;span style="color:#f92672">-&lt;/span>u用户名 &lt;span style="color:#f92672">-&lt;/span>p密码 &lt;span style="color:#960050;background-color:#1e0010">库名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">文件名&lt;/span>(D:&lt;span style="color:#f92672">/&lt;/span>a.&lt;span style="color:#66d9ef">sql&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">导出多张表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>　　mysqldump &lt;span style="color:#f92672">-&lt;/span>u用户名 &lt;span style="color:#f92672">-&lt;/span>p密码 &lt;span style="color:#960050;background-color:#1e0010">库名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表&lt;/span>&lt;span style="color:#ae81ff">2&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表&lt;/span>&lt;span style="color:#ae81ff">3&lt;/span> &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">文件名&lt;/span>(D:&lt;span style="color:#f92672">/&lt;/span>a.&lt;span style="color:#66d9ef">sql&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">3&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">导出所有表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>　　mysqldump &lt;span style="color:#f92672">-&lt;/span>u用户名 &lt;span style="color:#f92672">-&lt;/span>p密码 &lt;span style="color:#960050;background-color:#1e0010">库名&lt;/span> &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">文件名&lt;/span>(D:&lt;span style="color:#f92672">/&lt;/span>a.&lt;span style="color:#66d9ef">sql&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">4&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">导出一个库&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>　　mysqldump &lt;span style="color:#f92672">-&lt;/span>u用户名 &lt;span style="color:#f92672">-&lt;/span>p密码 &lt;span style="color:#75715e">--lock-all-tables --database 库名 &amp;gt; 文件名(D:/a.sql)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">可以&lt;/span>&lt;span style="color:#f92672">-&lt;/span>w携带WHERE条件
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 导入
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">在登录&lt;/span>mysql的情况下&lt;span style="color:#960050;background-color:#1e0010">：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>　　&lt;span style="color:#66d9ef">source&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">备份文件&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">在不登录的情况下&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>　　mysql &lt;span style="color:#f92672">-&lt;/span>u用户名 &lt;span style="color:#f92672">-&lt;/span>p密码 &lt;span style="color:#960050;background-color:#1e0010">库名&lt;/span> &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">备份文件&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="视图">
 视图
 &lt;a class="anchor" href="#%e8%a7%86%e5%9b%be">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">什么是视图：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">视图是一个虚拟表，其内容由查询定义。同真实的表一样，视图包含一系列带有名称的列和行数据。但是，视图并不在数据库中以存储的数据值集形式存在。行和列数据来自由定义视图的查询所引用的表，并且在引用视图时动态生成。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">视图具有表结构文件，但不存在数据文件。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">对其中所引用的基础表来说，视图的作用类似于筛选。定义视图的筛选可以来自当前或其它数据库的一个或多个表，或者其它视图。通过视图进行查询没有任何限制，通过它们进行数据修改时的限制也很少。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">视图是存储在数据库中的查询的&lt;/span>sql语句&lt;span style="color:#960050;background-color:#1e0010">，它主要出于两种原因：安全原因，视图可以隐藏一些数据，如：社会保险基金表，可以用视图只显示姓名，地址，而不显示社会保险号和工资数等，另一原因是可使复杂的查询易于理解和使用。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 创建视图
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CREATE&lt;/span> [&lt;span style="color:#66d9ef">OR&lt;/span> &lt;span style="color:#66d9ef">REPLACE&lt;/span>] [ALGORITHM &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">{&lt;/span>UNDEFINED &lt;span style="color:#f92672">|&lt;/span> MERGE &lt;span style="color:#f92672">|&lt;/span> TEMPTABLE&lt;span style="color:#960050;background-color:#1e0010">}&lt;/span>] &lt;span style="color:#66d9ef">VIEW&lt;/span> view_name [(column_list)] &lt;span style="color:#66d9ef">AS&lt;/span> select_statement
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">视图名必须唯一，同时不能与表重名。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">视图可以使用&lt;/span>select语句查询到的列名&lt;span style="color:#960050;background-color:#1e0010">，也可以自己指定相应的列名。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">可以指定视图执行的算法，通过&lt;/span>ALGORITHM指定&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> column_list如果存在&lt;span style="color:#960050;background-color:#1e0010">，则数目必须等于&lt;/span>SELECT语句检索的列数
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 查看结构
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> &lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">VIEW&lt;/span> view_name
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 删除视图
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">删除视图后，数据依然存在。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">可同时删除多个视图。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">VIEW&lt;/span> [&lt;span style="color:#66d9ef">IF&lt;/span> &lt;span style="color:#66d9ef">EXISTS&lt;/span>] view_name ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 修改视图结构
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">一般不修改视图，因为不是所有的更新视图都会映射到表上。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">ALTER&lt;/span> &lt;span style="color:#66d9ef">VIEW&lt;/span> view_name [(column_list)] &lt;span style="color:#66d9ef">AS&lt;/span> select_statement
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 视图作用
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">简化业务逻辑&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">对客户端隐藏真实的表结构&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 视图算法(ALGORITHM)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> MERGE &lt;span style="color:#960050;background-color:#1e0010">合并&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">将视图的查询语句，与外部查询需要先合并再执行！&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> TEMPTABLE &lt;span style="color:#960050;background-color:#1e0010">临时表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">将视图执行完毕后，形成临时表，再做外层查询！&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> UNDEFINED &lt;span style="color:#960050;background-color:#1e0010">未定义&lt;/span>(&lt;span style="color:#960050;background-color:#1e0010">默认&lt;/span>)&lt;span style="color:#960050;background-color:#1e0010">，指的是&lt;/span>MySQL自主去选择相应的算法&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="事务transaction">
 事务(transaction)
 &lt;a class="anchor" href="#%e4%ba%8b%e5%8a%a1transaction">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">事务是指逻辑上的一组操作，组成这组操作的各个单元，要不全成功要不全失败。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">支持连续&lt;/span>SQL的集体成功或集体撤销&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">事务是数据库在数据完整性方面的一个功能。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">需要利用&lt;/span> InnoDB &lt;span style="color:#960050;background-color:#1e0010">或&lt;/span> BDB &lt;span style="color:#960050;background-color:#1e0010">存储引擎，对自动提交的特性支持完成。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> InnoDB被称为事务安全型引擎&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 事务开启
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">START&lt;/span> &lt;span style="color:#66d9ef">TRANSACTION&lt;/span>; &lt;span style="color:#960050;background-color:#1e0010">或者&lt;/span> &lt;span style="color:#66d9ef">BEGIN&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">开启事务后，所有被执行的&lt;/span>SQL语句均被认作当前事务内的SQL语句&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 事务提交
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">COMMIT&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 事务回滚
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ROLLBACK&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">如果部分操作发生问题，映射到事务开启前。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 事务的特性
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">原子性（&lt;/span>Atomicity&lt;span style="color:#960050;background-color:#1e0010">）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">一致性（&lt;/span>Consistency&lt;span style="color:#960050;background-color:#1e0010">）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">事务前后数据的完整性必须保持一致。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">事务开始和结束时，外部数据一致&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">在整个事务过程中，操作是连续的&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">3&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">隔离性（&lt;/span>&lt;span style="color:#66d9ef">Isolation&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">多个用户并发访问数据库时，一个用户的事务不能被其它用户的事务所干扰，多个并发事务之间的数据要相互隔离。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">4&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">持久性（&lt;/span>Durability&lt;span style="color:#960050;background-color:#1e0010">）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">一个事务一旦被提交，它对数据库中的数据改变就是永久性的。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 事务的实现
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">要求是事务支持的表类型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">执行一组相关的操作前开启事务&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">3&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">整组操作完成后，都成功，则提交；如果存在失败，选择回滚，则会回到事务开始的备份点。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 事务的原理
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">利用&lt;/span>InnoDB的自动提交(autocommit)&lt;span style="color:#960050;background-color:#1e0010">特性完成。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">普通的&lt;/span>MySQL执行语句后&lt;span style="color:#960050;background-color:#1e0010">，当前的数据提交操作均可被其他客户端可见。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">而事务是暂时关闭“自动提交”机制，需要&lt;/span>commit提交持久化数据操作&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 注意
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">数据定义语言（&lt;/span>DDL&lt;span style="color:#960050;background-color:#1e0010">）语句不能被回滚，比如创建或取消数据库的语句，和创建、取消或更改表或存储的子程序的语句。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">事务不能被嵌套&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 保存点
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> SAVEPOINT &lt;span style="color:#960050;background-color:#1e0010">保存点名称&lt;/span> &lt;span style="color:#75715e">-- 设置一个事务保存点
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ROLLBACK&lt;/span> &lt;span style="color:#66d9ef">TO&lt;/span> SAVEPOINT &lt;span style="color:#960050;background-color:#1e0010">保存点名称&lt;/span> &lt;span style="color:#75715e">-- 回滚到保存点
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> RELEASE SAVEPOINT &lt;span style="color:#960050;background-color:#1e0010">保存点名称&lt;/span> &lt;span style="color:#75715e">-- 删除保存点
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- InnoDB自动提交特性设置
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SET&lt;/span> autocommit &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>&lt;span style="color:#f92672">|&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>; &lt;span style="color:#ae81ff">0&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">表示关闭自动提交，&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">表示开启自动提交。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">如果关闭了，那普通操作的结果对其他客户端也不可见，需要&lt;/span>commit提交后才能持久化数据操作&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">也可以关闭自动提交来开启事务。但与&lt;/span>&lt;span style="color:#66d9ef">START&lt;/span> TRANSACTION不同的是&lt;span style="color:#960050;background-color:#1e0010">，&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SET&lt;/span> autocommit是永久改变服务器的设置&lt;span style="color:#960050;background-color:#1e0010">，直到下次再次修改该设置。&lt;/span>(&lt;span style="color:#960050;background-color:#1e0010">针对当前连接&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">而&lt;/span>&lt;span style="color:#66d9ef">START&lt;/span> TRANSACTION记录开启前的状态&lt;span style="color:#960050;background-color:#1e0010">，而一旦事务提交或回滚后就需要再次开启事务。&lt;/span>(&lt;span style="color:#960050;background-color:#1e0010">针对当前事务&lt;/span>)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="锁表">
 锁表
 &lt;a class="anchor" href="#%e9%94%81%e8%a1%a8">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 锁表 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">表锁定只用于防止其它客户端进行不正当地读取和写入&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>MyISAM &lt;span style="color:#960050;background-color:#1e0010">支持表锁，&lt;/span>InnoDB &lt;span style="color:#960050;background-color:#1e0010">支持行锁&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 锁定
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">LOCK&lt;/span> TABLES tbl_name [&lt;span style="color:#66d9ef">AS&lt;/span> &lt;span style="color:#66d9ef">alias&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 解锁
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> UNLOCK TABLES
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="触发器">
 触发器
 &lt;a class="anchor" href="#%e8%a7%a6%e5%8f%91%e5%99%a8">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 触发器 */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">触发程序是与表有关的命名数据库对象，当该表出现特定事件时，将激活该对象&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">监听：记录的增加、修改、删除。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 创建触发器
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TRIGGER&lt;/span> &lt;span style="color:#66d9ef">trigger_name&lt;/span> trigger_time trigger_event &lt;span style="color:#66d9ef">ON&lt;/span> tbl_name &lt;span style="color:#66d9ef">FOR&lt;/span> &lt;span style="color:#66d9ef">EACH&lt;/span> &lt;span style="color:#66d9ef">ROW&lt;/span> trigger_stmt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">参数：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trigger_time是触发程序的动作时间&lt;span style="color:#960050;background-color:#1e0010">。它可以是&lt;/span> &lt;span style="color:#66d9ef">before&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">或&lt;/span> &lt;span style="color:#66d9ef">after&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，以指明触发程序是在激活它的语句之前或之后触发。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trigger_event指明了激活触发程序的语句的类型
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">INSERT&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">：将新行插入表时激活触发程序&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">UPDATE&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">：更改某一行时激活触发程序&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">DELETE&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">：从表中删除某一行时激活触发程序&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> tbl_name&lt;span style="color:#960050;background-color:#1e0010">：监听的表，必须是永久性的表，不能将触发程序与&lt;/span>TEMPORARY表或视图关联起来&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> trigger_stmt&lt;span style="color:#960050;background-color:#1e0010">：当触发程序激活时执行的语句。执行多个语句，可使用&lt;/span>&lt;span style="color:#66d9ef">BEGIN&lt;/span>...END复合语句结构
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 删除
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">TRIGGER&lt;/span> [&lt;span style="color:#66d9ef">schema_name&lt;/span>.]&lt;span style="color:#66d9ef">trigger_name&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">可以使用&lt;/span>old和new代替旧的和新的数据
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">更新操作，更新前是&lt;/span>&lt;span style="color:#66d9ef">old&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，更新后是&lt;/span>&lt;span style="color:#66d9ef">new&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">删除操作，只有&lt;/span>&lt;span style="color:#66d9ef">old&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">增加操作，只有&lt;/span>&lt;span style="color:#66d9ef">new&lt;/span>.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 注意
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">对于具有相同触发程序动作时间和事件的给定表，不能有两个触发程序。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 字符连接函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>concat(str1,str2,...])
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>concat_ws(separator,str1,str2,...)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 分支语句
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">条件&lt;/span> &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">执行语句&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>elseif &lt;span style="color:#960050;background-color:#1e0010">条件&lt;/span> &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">执行语句&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">执行语句&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">end&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 修改最外层语句结束符
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">delimiter&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">自定义结束符号&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SQL语句
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">自定义结束符号&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">delimiter&lt;/span> ; &lt;span style="color:#75715e">-- 修改回原来的分号
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 语句块包裹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">begin&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">语句块&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">end&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 特殊的执行
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">只要添加记录，就会触发程序。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#66d9ef">Insert&lt;/span> &lt;span style="color:#66d9ef">into&lt;/span> &lt;span style="color:#66d9ef">on&lt;/span> duplicate &lt;span style="color:#66d9ef">key&lt;/span> &lt;span style="color:#66d9ef">update&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">语法会触发：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">如果没有重复记录，会触发&lt;/span> &lt;span style="color:#66d9ef">before&lt;/span> &lt;span style="color:#66d9ef">insert&lt;/span>, &lt;span style="color:#66d9ef">after&lt;/span> &lt;span style="color:#66d9ef">insert&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">如果有重复记录并更新，会触发&lt;/span> &lt;span style="color:#66d9ef">before&lt;/span> &lt;span style="color:#66d9ef">insert&lt;/span>, &lt;span style="color:#66d9ef">before&lt;/span> &lt;span style="color:#66d9ef">update&lt;/span>, &lt;span style="color:#66d9ef">after&lt;/span> &lt;span style="color:#66d9ef">update&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">如果有重复记录但是没有发生更新，则触发&lt;/span> &lt;span style="color:#66d9ef">before&lt;/span> &lt;span style="color:#66d9ef">insert&lt;/span>, &lt;span style="color:#66d9ef">before&lt;/span> &lt;span style="color:#66d9ef">update&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">3&lt;/span>. &lt;span style="color:#66d9ef">Replace&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">语法&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">如果有记录，则执行&lt;/span> &lt;span style="color:#66d9ef">before&lt;/span> &lt;span style="color:#66d9ef">insert&lt;/span>, &lt;span style="color:#66d9ef">before&lt;/span> &lt;span style="color:#66d9ef">delete&lt;/span>, &lt;span style="color:#66d9ef">after&lt;/span> &lt;span style="color:#66d9ef">delete&lt;/span>, &lt;span style="color:#66d9ef">after&lt;/span> &lt;span style="color:#66d9ef">insert&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="sql-编程">
 SQL 编程
 &lt;a class="anchor" href="#sql-%e7%bc%96%e7%a8%8b">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* SQL编程 */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">--// 局部变量 ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 变量声明
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">declare&lt;/span> var_name[,...] &lt;span style="color:#66d9ef">type&lt;/span> [&lt;span style="color:#66d9ef">default&lt;/span> value]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">这个语句被用来声明局部变量。要给变量提供一个默认值，请包含一个&lt;/span>default子句&lt;span style="color:#960050;background-color:#1e0010">。值可以被指定为一个表达式，不需要为一个常数。如果没有&lt;/span>default子句&lt;span style="color:#960050;background-color:#1e0010">，初始值为&lt;/span>&lt;span style="color:#66d9ef">null&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 赋值
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">使用&lt;/span> &lt;span style="color:#66d9ef">set&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">和&lt;/span> &lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#66d9ef">into&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">语句为变量赋值。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">注意：在函数内是可以使用全局变量（用户自定义的变量）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">--// 全局变量 ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 定义、赋值
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">set&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">语句可以定义并为变量赋值。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">set&lt;/span> &lt;span style="color:#f92672">@&lt;/span>var &lt;span style="color:#f92672">=&lt;/span> value;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">也可以使用&lt;/span>&lt;span style="color:#66d9ef">select&lt;/span> into语句为变量初始化并赋值&lt;span style="color:#960050;background-color:#1e0010">。这样要求&lt;/span>select语句只能返回一行&lt;span style="color:#960050;background-color:#1e0010">，但是可以是多个字段，就意味着同时为多个变量进行赋值，变量的数量需要与查询的列数一致。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">还可以把赋值语句看作一个表达式，通过&lt;/span>select执行完成&lt;span style="color:#960050;background-color:#1e0010">。此时为了避免&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">被当作关系运算符看待，使用&lt;/span>:&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">代替。（&lt;/span>set语句可以使用&lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">和&lt;/span> :&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">）。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">@&lt;/span>var:&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">20&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">@&lt;/span>v1:&lt;span style="color:#f92672">=&lt;/span>id, &lt;span style="color:#f92672">@&lt;/span>v2&lt;span style="color:#f92672">=&lt;/span>name &lt;span style="color:#66d9ef">from&lt;/span> t1 &lt;span style="color:#66d9ef">limit&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">from&lt;/span> tbl_name &lt;span style="color:#66d9ef">where&lt;/span> &lt;span style="color:#f92672">@&lt;/span>var:&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">30&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#66d9ef">into&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">可以将表中查询获得的数据赋给变量。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-|&lt;/span> &lt;span style="color:#66d9ef">select&lt;/span> &lt;span style="color:#66d9ef">max&lt;/span>(height) &lt;span style="color:#66d9ef">into&lt;/span> &lt;span style="color:#f92672">@&lt;/span>max_height &lt;span style="color:#66d9ef">from&lt;/span> tb;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 自定义变量名
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">为了避免&lt;/span>select语句中&lt;span style="color:#960050;background-color:#1e0010">，用户自定义的变量与系统标识符（通常是字段名）冲突，用户自定义变量在变量名前使用&lt;/span>&lt;span style="color:#f92672">@&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">作为开始符号。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">@&lt;/span>var&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">10&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">变量被定义后，在整个会话周期都有效（登录到退出）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">--// 控制结构 ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- if语句
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">if&lt;/span> search_condition &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> statement_list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[elseif search_condition &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> statement_list]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> statement_list]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">end&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- case语句
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CASE&lt;/span> value &lt;span style="color:#66d9ef">WHEN&lt;/span> [compare&lt;span style="color:#f92672">-&lt;/span>value] &lt;span style="color:#66d9ef">THEN&lt;/span> &lt;span style="color:#66d9ef">result&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#66d9ef">WHEN&lt;/span> [compare&lt;span style="color:#f92672">-&lt;/span>value] &lt;span style="color:#66d9ef">THEN&lt;/span> &lt;span style="color:#66d9ef">result&lt;/span> ...]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#66d9ef">ELSE&lt;/span> &lt;span style="color:#66d9ef">result&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">END&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- while循环
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>[begin_label:] while search_condition &lt;span style="color:#66d9ef">do&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> statement_list
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">end&lt;/span> while [end_label];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">如果需要在循环内提前终止&lt;/span> while循环&lt;span style="color:#960050;background-color:#1e0010">，则需要使用标签；标签需要成对出现。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 退出循环
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">退出整个循环&lt;/span> leave
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">退出当前循环&lt;/span> &lt;span style="color:#66d9ef">iterate&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">通过退出的标签决定退出哪个循环&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">--// 内置函数 ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 数值函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">abs&lt;/span>(x) &lt;span style="color:#75715e">-- 绝对值 abs(-10.9) = 10
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>format(x, d) &lt;span style="color:#75715e">-- 格式化千分位数值 format(1234567.456, 2) = 1,234,567.46
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>ceil(x) &lt;span style="color:#75715e">-- 向上取整 ceil(10.1) = 11
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>floor(x) &lt;span style="color:#75715e">-- 向下取整 floor (10.1) = 10
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>round(x) &lt;span style="color:#75715e">-- 四舍五入去整
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">mod&lt;/span>(m, n) &lt;span style="color:#75715e">-- m%n m mod n 求余 10%3=1
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>pi() &lt;span style="color:#75715e">-- 获得圆周率
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>pow(m, n) &lt;span style="color:#75715e">-- m^n
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>sqrt(x) &lt;span style="color:#75715e">-- 算术平方根
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>rand() &lt;span style="color:#75715e">-- 随机数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">truncate&lt;/span>(x, d) &lt;span style="color:#75715e">-- 截取d位小数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 时间日期函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>now(), &lt;span style="color:#66d9ef">current_timestamp&lt;/span>(); &lt;span style="color:#75715e">-- 当前日期时间
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">current_date&lt;/span>(); &lt;span style="color:#75715e">-- 当前日期
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">current_time&lt;/span>(); &lt;span style="color:#75715e">-- 当前时间
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>date(&lt;span style="color:#e6db74">&amp;#39;yyyy-mm-dd hh:ii:ss&amp;#39;&lt;/span>); &lt;span style="color:#75715e">-- 获取日期部分
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>time(&lt;span style="color:#e6db74">&amp;#39;yyyy-mm-dd hh:ii:ss&amp;#39;&lt;/span>); &lt;span style="color:#75715e">-- 获取时间部分
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>date_format(&lt;span style="color:#e6db74">&amp;#39;yyyy-mm-dd hh:ii:ss&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;%d %y %a %d %m %b %j&amp;#39;&lt;/span>); &lt;span style="color:#75715e">-- 格式化时间
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>unix_timestamp(); &lt;span style="color:#75715e">-- 获得unix时间戳
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>from_unixtime(); &lt;span style="color:#75715e">-- 从时间戳获得时间
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 字符串函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">length&lt;/span>(string) &lt;span style="color:#75715e">-- string长度，字节
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">char_length&lt;/span>(string) &lt;span style="color:#75715e">-- string的字符个数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">substring&lt;/span>(str, &lt;span style="color:#66d9ef">position&lt;/span> [,&lt;span style="color:#66d9ef">length&lt;/span>]) &lt;span style="color:#75715e">-- 从str的position开始,取length个字符
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">replace&lt;/span>(str ,search_str ,replace_str) &lt;span style="color:#75715e">-- 在str中用replace_str替换search_str
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>instr(string ,&lt;span style="color:#66d9ef">substring&lt;/span>) &lt;span style="color:#75715e">-- 返回substring首次在string中出现的位置
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>concat(string [,...]) &lt;span style="color:#75715e">-- 连接字串
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>charset(str) &lt;span style="color:#75715e">-- 返回字串字符集
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>lcase(string) &lt;span style="color:#75715e">-- 转换成小写
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">left&lt;/span>(string, &lt;span style="color:#66d9ef">length&lt;/span>) &lt;span style="color:#75715e">-- 从string2中的左边起取length个字符
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>load_file(file_name) &lt;span style="color:#75715e">-- 从文件读取内容
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>locate(&lt;span style="color:#66d9ef">substring&lt;/span>, string [,start_position]) &lt;span style="color:#75715e">-- 同instr,但可指定开始位置
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>lpad(string, &lt;span style="color:#66d9ef">length&lt;/span>, &lt;span style="color:#66d9ef">pad&lt;/span>) &lt;span style="color:#75715e">-- 重复用pad加在string开头,直到字串长度为length
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>ltrim(string) &lt;span style="color:#75715e">-- 去除前端空格
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>repeat(string, &lt;span style="color:#66d9ef">count&lt;/span>) &lt;span style="color:#75715e">-- 重复count次
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>rpad(string, &lt;span style="color:#66d9ef">length&lt;/span>, &lt;span style="color:#66d9ef">pad&lt;/span>) &lt;span style="color:#75715e">--在str后用pad补充,直到长度为length
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>rtrim(string) &lt;span style="color:#75715e">-- 去除后端空格
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>strcmp(string1 ,string2) &lt;span style="color:#75715e">-- 逐字符比较两字串大小
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 流程函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">case&lt;/span> &lt;span style="color:#66d9ef">when&lt;/span> [condition] &lt;span style="color:#66d9ef">then&lt;/span> &lt;span style="color:#66d9ef">result&lt;/span> [&lt;span style="color:#66d9ef">when&lt;/span> [condition] &lt;span style="color:#66d9ef">then&lt;/span> &lt;span style="color:#66d9ef">result&lt;/span> ...] [&lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#66d9ef">result&lt;/span>] &lt;span style="color:#66d9ef">end&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">多分支&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span>(expr1,expr2,expr3) &lt;span style="color:#960050;background-color:#1e0010">双分支。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 聚合函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">count&lt;/span>()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">sum&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">max&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">min&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">avg&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>group_concat()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 其他常用函数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>md5();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">default&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">--// 存储函数，自定义函数 ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 新建
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">FUNCTION&lt;/span> function_name (&lt;span style="color:#960050;background-color:#1e0010">参数列表&lt;/span>) &lt;span style="color:#66d9ef">RETURNS&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">返回值类型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">函数体&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">函数名，应该合法的标识符，并且不应该与已有的关键字冲突。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">一个函数应该属于某个数据库，可以使用&lt;/span>db_name.function_name的形式执行当前函数所属数据库&lt;span style="color:#960050;background-color:#1e0010">，否则为当前数据库。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">参数部分，由&lt;/span>&lt;span style="color:#e6db74">&amp;#34;参数名&amp;#34;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">和&lt;/span>&lt;span style="color:#e6db74">&amp;#34;参数类型&amp;#34;&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">组成。多个参数用逗号隔开。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">函数体由多条可用的&lt;/span>mysql语句&lt;span style="color:#960050;background-color:#1e0010">，流程控制，变量声明等语句构成。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">多条语句应该使用&lt;/span> &lt;span style="color:#66d9ef">begin&lt;/span>...&lt;span style="color:#66d9ef">end&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">语句块包含。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">一定要有&lt;/span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">返回值语句。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 删除
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">FUNCTION&lt;/span> [&lt;span style="color:#66d9ef">IF&lt;/span> &lt;span style="color:#66d9ef">EXISTS&lt;/span>] function_name;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 查看
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> &lt;span style="color:#66d9ef">FUNCTION&lt;/span> STATUS &lt;span style="color:#66d9ef">LIKE&lt;/span> &lt;span style="color:#e6db74">&amp;#39;partten&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">SHOW&lt;/span> &lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">FUNCTION&lt;/span> function_name;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 修改
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">ALTER&lt;/span> &lt;span style="color:#66d9ef">FUNCTION&lt;/span> function_name &lt;span style="color:#960050;background-color:#1e0010">函数选项&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">--// 存储过程，自定义功能 ----------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 定义
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">存储存储过程&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">是一段代码（过程），存储在数据库中的&lt;/span>sql组成&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">一个存储过程通常用于完成一段业务逻辑，例如报名，交班费，订单入库等。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">而一个函数通常专注与某个功能，视为其他程序服务的，需要在其他语句中调用函数才可以，而存储过程不能被其他调用，是自己执行&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">通过&lt;/span>call执行&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 创建
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">PROCEDURE&lt;/span> sp_name (&lt;span style="color:#960050;background-color:#1e0010">参数列表&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">过程体&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">参数列表：不同于函数的参数列表，需要指明参数类型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">IN&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，表示输入型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">OUT&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，表示输出型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">INOUT&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">，表示混合型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">注意，没有返回值。&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="存储过程">
 存储过程
 &lt;a class="anchor" href="#%e5%ad%98%e5%82%a8%e8%bf%87%e7%a8%8b">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 存储过程 */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">存储过程是一段可执行性代码的集合。相比函数，更偏向于业务逻辑。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">调用：&lt;/span>&lt;span style="color:#66d9ef">CALL&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">过程名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 注意
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">没有返回值。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">只能单独调用，不可夹杂在其他语句中&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 参数
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">IN&lt;/span>&lt;span style="color:#f92672">|&lt;/span>&lt;span style="color:#66d9ef">OUT&lt;/span>&lt;span style="color:#f92672">|&lt;/span>&lt;span style="color:#66d9ef">INOUT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">参数名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">数据类型&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">IN&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">输入：在调用过程中，将数据输入到过程体内部的参数&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">OUT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">输出：在调用过程中，将过程体处理完的结果返回到客户端&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">INOUT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">输入输出：既可输入，也可输出&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 语法
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">PROCEDURE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">过程名&lt;/span> (&lt;span style="color:#960050;background-color:#1e0010">参数列表&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">BEGIN&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">过程体&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">END&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="用户和权限管理">
 用户和权限管理
 &lt;a class="anchor" href="#%e7%94%a8%e6%88%b7%e5%92%8c%e6%9d%83%e9%99%90%e7%ae%a1%e7%90%86">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 用户和权限管理 */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- root密码重置
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">停止&lt;/span>MySQL服务
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">2&lt;/span>. [Linux] &lt;span style="color:#f92672">/&lt;/span>usr&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#66d9ef">local&lt;/span>&lt;span style="color:#f92672">/&lt;/span>mysql&lt;span style="color:#f92672">/&lt;/span>bin&lt;span style="color:#f92672">/&lt;/span>safe_mysqld &lt;span style="color:#75715e">--skip-grant-tables &amp;amp;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> [Windows] mysqld &lt;span style="color:#75715e">--skip-grant-tables
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#ae81ff">3&lt;/span>. use mysql;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">4&lt;/span>. &lt;span style="color:#66d9ef">UPDATE&lt;/span> &lt;span style="color:#f92672">`&lt;/span>&lt;span style="color:#66d9ef">user&lt;/span>&lt;span style="color:#f92672">`&lt;/span> &lt;span style="color:#66d9ef">SET&lt;/span> PASSWORD&lt;span style="color:#f92672">=&lt;/span>PASSWORD(&lt;span style="color:#e6db74">&amp;#34;密码&amp;#34;&lt;/span>) &lt;span style="color:#66d9ef">WHERE&lt;/span> &lt;span style="color:#f92672">`&lt;/span>&lt;span style="color:#66d9ef">user&lt;/span>&lt;span style="color:#f92672">`&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">&amp;#34;root&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">5&lt;/span>. FLUSH &lt;span style="color:#66d9ef">PRIVILEGES&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">用户信息表：&lt;/span>mysql.&lt;span style="color:#66d9ef">user&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 刷新权限
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>FLUSH &lt;span style="color:#66d9ef">PRIVILEGES&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 增加用户
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">USER&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">用户名&lt;/span> IDENTIFIED &lt;span style="color:#66d9ef">BY&lt;/span> [PASSWORD] &lt;span style="color:#960050;background-color:#1e0010">密码&lt;/span>(&lt;span style="color:#960050;background-color:#1e0010">字符串&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">必须拥有&lt;/span>mysql数据库的全局CREATE USER权限&lt;span style="color:#960050;background-color:#1e0010">，或拥有&lt;/span>INSERT权限&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">只能创建用户，不能赋予权限。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">用户名，注意引号：如&lt;/span> &lt;span style="color:#e6db74">&amp;#39;user_name&amp;#39;&lt;/span>&lt;span style="color:#f92672">@&lt;/span>&lt;span style="color:#e6db74">&amp;#39;192.168.1.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">密码也需引号，纯数字密码也要加引号&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">要在纯文本中指定密码，需忽略&lt;/span>PASSWORD关键词&lt;span style="color:#960050;background-color:#1e0010">。要把密码指定为由&lt;/span>PASSWORD()&lt;span style="color:#960050;background-color:#1e0010">函数返回的混编值，需包含关键字&lt;/span>PASSWORD
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 重命名用户
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">RENAME&lt;/span> &lt;span style="color:#66d9ef">USER&lt;/span> old_user &lt;span style="color:#66d9ef">TO&lt;/span> new_user
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 设置密码
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">SET&lt;/span> PASSWORD &lt;span style="color:#f92672">=&lt;/span> PASSWORD(&lt;span style="color:#e6db74">&amp;#39;密码&amp;#39;&lt;/span>) &lt;span style="color:#75715e">-- 为当前用户设置密码
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">SET&lt;/span> PASSWORD &lt;span style="color:#66d9ef">FOR&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">用户名&lt;/span> &lt;span style="color:#f92672">=&lt;/span> PASSWORD(&lt;span style="color:#e6db74">&amp;#39;密码&amp;#39;&lt;/span>) &lt;span style="color:#75715e">-- 为指定用户设置密码
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 删除用户
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#66d9ef">USER&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">用户名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 分配权限/添加用户
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">权限列表&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#66d9ef">TO&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">用户名&lt;/span> [IDENTIFIED &lt;span style="color:#66d9ef">BY&lt;/span> [PASSWORD] &lt;span style="color:#e6db74">&amp;#39;password&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#66d9ef">all&lt;/span> &lt;span style="color:#66d9ef">privileges&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表示所有权限&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#f92672">*&lt;/span>.&lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表示所有库的所有表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">-&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">库名&lt;/span>.&lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表示某库下面的某表&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#66d9ef">PRIVILEGES&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> &lt;span style="color:#f92672">`&lt;/span>pms&lt;span style="color:#f92672">`&lt;/span>.&lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">TO&lt;/span> &lt;span style="color:#e6db74">&amp;#39;pms&amp;#39;&lt;/span>&lt;span style="color:#f92672">@&lt;/span>&lt;span style="color:#e6db74">&amp;#39;%&amp;#39;&lt;/span> IDENTIFIED &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#e6db74">&amp;#39;pms0817&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 查看权限
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">SHOW&lt;/span> GRANTS &lt;span style="color:#66d9ef">FOR&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">用户名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">-- 查看当前用户权限
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> GRANTS; &lt;span style="color:#960050;background-color:#1e0010">或&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> GRANTS &lt;span style="color:#66d9ef">FOR&lt;/span> &lt;span style="color:#66d9ef">CURRENT_USER&lt;/span>; &lt;span style="color:#960050;background-color:#1e0010">或&lt;/span> &lt;span style="color:#66d9ef">SHOW&lt;/span> GRANTS &lt;span style="color:#66d9ef">FOR&lt;/span> &lt;span style="color:#66d9ef">CURRENT_USER&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 撤消权限
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">REVOKE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">权限列表&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">用户名&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">REVOKE&lt;/span> &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#66d9ef">PRIVILEGES&lt;/span>, &lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#66d9ef">OPTION&lt;/span> &lt;span style="color:#66d9ef">FROM&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">用户名&lt;/span> &lt;span style="color:#75715e">-- 撤销所有权限
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 权限层级
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 要使用GRANT或REVOKE，您必须拥有GRANT OPTION权限，并且您必须用于您正在授予或撤销的权限。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">全局层级：全局权限适用于一个给定服务器中的所有数据库，&lt;/span>mysql.&lt;span style="color:#66d9ef">user&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> &lt;span style="color:#f92672">*&lt;/span>.&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">和&lt;/span> &lt;span style="color:#66d9ef">REVOKE&lt;/span> &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> &lt;span style="color:#f92672">*&lt;/span>.&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">只授予和撤销全局权限。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">数据库层级：数据库权限适用于一个给定数据库中的所有目标，&lt;/span>mysql.db, mysql.&lt;span style="color:#66d9ef">host&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> db_name.&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">和&lt;/span>&lt;span style="color:#66d9ef">REVOKE&lt;/span> &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> db_name.&lt;span style="color:#f92672">*&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">只授予和撤销数据库权限。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">表层级：表权限适用于一个给定表中的所有列，&lt;/span>mysql.talbes_priv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> db_name.tbl_name和REVOKE &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> db_name.tbl_name只授予和撤销表权限&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#960050;background-color:#1e0010">列层级：列权限适用于一个给定表中的单一列，&lt;/span>mysql.columns_priv
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">当使用&lt;/span>REVOKE时&lt;span style="color:#960050;background-color:#1e0010">，您必须指定与被授权列相同的列。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 权限列表
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">ALL&lt;/span> [&lt;span style="color:#66d9ef">PRIVILEGES&lt;/span>] &lt;span style="color:#75715e">-- 设置除GRANT OPTION之外的所有简单权限
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">ALTER&lt;/span> &lt;span style="color:#75715e">-- 允许使用ALTER TABLE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">ALTER&lt;/span> &lt;span style="color:#66d9ef">ROUTINE&lt;/span> &lt;span style="color:#75715e">-- 更改或取消已存储的子程序
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#75715e">-- 允许使用CREATE TABLE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">ROUTINE&lt;/span> &lt;span style="color:#75715e">-- 创建已存储的子程序
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">TEMPORARY&lt;/span> TABLES &lt;span style="color:#75715e">-- 允许使用CREATE TEMPORARY TABLE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">USER&lt;/span> &lt;span style="color:#75715e">-- 允许使用CREATE USER, DROP USER, RENAME USER和REVOKE ALL PRIVILEGES。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">VIEW&lt;/span> &lt;span style="color:#75715e">-- 允许使用CREATE VIEW
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">DELETE&lt;/span> &lt;span style="color:#75715e">-- 允许使用DELETE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">DROP&lt;/span> &lt;span style="color:#75715e">-- 允许使用DROP TABLE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">EXECUTE&lt;/span> &lt;span style="color:#75715e">-- 允许用户运行已存储的子程序
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>FILE &lt;span style="color:#75715e">-- 允许使用SELECT...INTO OUTFILE和LOAD DATA INFILE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">INDEX&lt;/span> &lt;span style="color:#75715e">-- 允许使用CREATE INDEX和DROP INDEX
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">INSERT&lt;/span> &lt;span style="color:#75715e">-- 允许使用INSERT
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">LOCK&lt;/span> TABLES &lt;span style="color:#75715e">-- 允许对您拥有SELECT权限的表使用LOCK TABLES
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>PROCESS &lt;span style="color:#75715e">-- 允许使用SHOW FULL PROCESSLIST
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">REFERENCES&lt;/span> &lt;span style="color:#75715e">-- 未被实施
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>RELOAD &lt;span style="color:#75715e">-- 允许使用FLUSH
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>REPLICATION CLIENT &lt;span style="color:#75715e">-- 允许用户询问从属服务器或主服务器的地址
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>REPLICATION SLAVE &lt;span style="color:#75715e">-- 用于复制型从属服务器（从主服务器中读取二进制日志事件）
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">SELECT&lt;/span> &lt;span style="color:#75715e">-- 允许使用SELECT
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">SHOW&lt;/span> DATABASES &lt;span style="color:#75715e">-- 显示所有数据库
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">SHOW&lt;/span> &lt;span style="color:#66d9ef">VIEW&lt;/span> &lt;span style="color:#75715e">-- 允许使用SHOW CREATE VIEW
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>SHUTDOWN &lt;span style="color:#75715e">-- 允许使用mysqladmin shutdown
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>SUPER &lt;span style="color:#75715e">-- 允许使用CHANGE MASTER, KILL, PURGE MASTER LOGS和SET GLOBAL语句，mysqladmin debug命令；允许您连接（一次），即使已达到max_connections。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">UPDATE&lt;/span> &lt;span style="color:#75715e">-- 允许使用UPDATE
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">USAGE&lt;/span> &lt;span style="color:#75715e">-- “无权限”的同义词
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#66d9ef">OPTION&lt;/span> &lt;span style="color:#75715e">-- 允许授予权限
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="表维护">
 表维护
 &lt;a class="anchor" href="#%e8%a1%a8%e7%bb%b4%e6%8a%a4">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 表维护 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 分析和存储表的关键字分布
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">ANALYZE&lt;/span> [&lt;span style="color:#66d9ef">LOCAL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> NO_WRITE_TO_BINLOG] &lt;span style="color:#66d9ef">TABLE&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">表名&lt;/span> ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 检查一个或多个表是否有错误
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#66d9ef">CHECK&lt;/span> &lt;span style="color:#66d9ef">TABLE&lt;/span> tbl_name [, tbl_name] ... [&lt;span style="color:#66d9ef">option&lt;/span>] ...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">option&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">{&lt;/span>QUICK &lt;span style="color:#f92672">|&lt;/span> FAST &lt;span style="color:#f92672">|&lt;/span> MEDIUM &lt;span style="color:#f92672">|&lt;/span> EXTENDED &lt;span style="color:#f92672">|&lt;/span> CHANGED&lt;span style="color:#960050;background-color:#1e0010">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">-- 整理数据文件的碎片
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>OPTIMIZE [&lt;span style="color:#66d9ef">LOCAL&lt;/span> &lt;span style="color:#f92672">|&lt;/span> NO_WRITE_TO_BINLOG] &lt;span style="color:#66d9ef">TABLE&lt;/span> tbl_name [, tbl_name] ...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="杂项">
 杂项
 &lt;a class="anchor" href="#%e6%9d%82%e9%a1%b9">#&lt;/a>
&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">/* 杂项 */&lt;/span> &lt;span style="color:#75715e">------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#ae81ff">1&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">可用反引号（&lt;/span>&lt;span style="color:#f92672">`&lt;/span>&lt;span style="color:#960050;background-color:#1e0010">）为标识符（库名、表名、字段名、索引、别名）包裹，以避免与关键字重名！中文也可以作为标识符！&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">2&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">每个库目录存在一个保存当前数据库的选项文件&lt;/span>db.opt&lt;span style="color:#960050;background-color:#1e0010">。&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">3&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">注释：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">单行注释&lt;/span> &lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">注释内容&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">多行注释&lt;/span> &lt;span style="color:#75715e">/* 注释内容 */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">单行注释&lt;/span> &lt;span style="color:#75715e">-- 注释内容 (标准SQL注释风格，要求双破折号后加一空格符（空格、TAB、换行等）)
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>&lt;span style="color:#ae81ff">4&lt;/span>. &lt;span style="color:#960050;background-color:#1e0010">模式通配符：&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> _ &lt;span style="color:#960050;background-color:#1e0010">任意单个字符&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">%&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">任意多个字符，甚至包括零字符&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#960050;background-color:#1e0010">单引号需要进行转义&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">\&lt;/span>&lt;span style="color:#e6db74">&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">5. CMD命令行内的语句结束符可以为 &amp;#34;;&amp;#34;, &amp;#34;\G&amp;#34;, &amp;#34;\g&amp;#34;，仅影响显示结果。其他地方还是用分号结束。delimiter 可修改当前对话的语句结束符。
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">6. SQL对大小写不敏感
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">7. 清除已有语句：\c
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>