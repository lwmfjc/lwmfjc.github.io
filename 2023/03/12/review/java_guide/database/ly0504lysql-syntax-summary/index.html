<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="sql语法基础知识总结">
<meta property="og:type" content="article">
<meta property="og:title" content="sql语法基础知识总结">
<meta property="og:url" content="http://example.com/2023/03/12/review/java_guide/database/ly0504lysql-syntax-summary/index.html">
<meta property="og:site_name" content="随记">
<meta property="og:description" content="sql语法基础知识总结">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-03-12T17:52:48.000Z">
<meta property="article:modified_time" content="2023-03-12T17:52:48.000Z">
<meta property="article:author" content="刘易">
<meta property="article:tag" content="复习">
<meta property="article:tag" content="复习-javaGuide">
<meta property="article:tag" content="复习-javaGuide-database">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2023/03/12/review/java_guide/database/ly0504lysql-syntax-summary/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>sql语法基础知识总结 | 随记</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">随记</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/12/review/java_guide/database/ly0504lysql-syntax-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/avatar.png">
      <meta itemprop="name" content="刘易">
      <meta itemprop="description" content="知命不惧 日日自新">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="随记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          sql语法基础知识总结
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-03-12 17:52:48" itemprop="dateCreated datePublished" datetime="2023-03-12T17:52:48+00:00">2023-03-12</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>18k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>32 分钟</span>
            </span>
            <div class="post-description">sql语法基础知识总结</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>转载自https://github.com/Snailclimb/JavaGuide（添加小部分笔记）感谢作者!</p>
</blockquote>
<blockquote>
<p>本文整理完善自下面这两份资料：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903790571700231">SQL
语法速成手册</a></li>
<li><a target="_blank" rel="noopener" href="https://www.begtut.com/mysql/mysql-tutorial.html">MySQL
超全教程</a></li>
</ul>
</blockquote>
<h2 id="基本概念">基本概念</h2>
<h3 id="数据库术语">数据库术语</h3>
<ul>
<li><code>数据库（database）</code> -
保存有组织的数据的容器（通常是一个文件或一组文件）。</li>
<li><code>数据表（table）</code> - 某种特定类型数据的结构化清单。</li>
<li><code>模式（schema）</code> -
关于数据库和表的布局及特性的信息。模式定义了数据在表中如何存储，包含存储什么样的数据，数据如何分解，各部分信息如何命名等信息。数据库和表都有模式。</li>
<li><code>列（column）</code> -
表中的一个字段。所有表都是由一个或多个列组成的。</li>
<li><code>行（row）</code> - 表中的一个记录。</li>
<li><code>主键（primary key）</code> -
一列（或一组列），其值能够唯一标识表中每一行。</li>
</ul>
<h3 id="sql-语法">SQL 语法</h3>
<p>SQL（Structured Query Language)，标准 SQL 由 ANSI
标准委员会管理，从而称为 ANSI SQL。各个 DBMS 都有自己的实现，如
PL/SQL、Transact-SQL 等。</p>
<h4 id="sql-语法结构">SQL 语法结构</h4>
<figure>
<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/68747470733a2f2f70332d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f63623638346434633735666334333065393261616565323236303639633764617e74706c762d6b3375316662706663702d7a6f6f6d2d312e696d616765"
alt="img" />
<figcaption aria-hidden="true">img</figcaption>
</figure>
<p>SQL 语法结构包括：</p>
<ul>
<li><strong><code>子句</code></strong> -
是语句和查询的组成成分。（在某些情况下，这些都是可选的。）</li>
<li><strong><code>表达式</code></strong> -
可以产生任何标量值，或由列和行的数据库表</li>
<li><strong><code>谓词</code></strong> - 给需要评估的 SQL
三值逻辑（3VL）（true/false/unknown）或布尔真值指定条件，并限制语句和查询的效果，或改变程序流程。</li>
<li><strong><code>查询</code></strong> - 基于特定条件检索数据。这是 SQL
的一个重要组成部分。</li>
<li><strong><code>语句</code></strong> -
可以持久地影响纲要和数据，也可以控制数据库事务、程序流程、连接、会话或诊断。</li>
</ul>
<h4 id="sql-语法要点">SQL 语法要点</h4>
<ul>
<li><strong>SQL
语句不区分大小写</strong>，但是数据库表名、列名和值是否区分，依赖于具体的
DBMS 以及配置。例如：<code>SELECT</code> 与 <code>select</code>
、<code>Select</code> 是相同的。</li>
<li><strong>多条 SQL
语句必须以分号（<code>;</code>）分隔</strong>。</li>
<li>处理 SQL 语句时，<strong>所有空格都被忽略</strong>。</li>
</ul>
<p>SQL 语句可以写成一行，也可以分写为多行。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 一行 SQL 语句</span><br><span class="line"></span><br><span class="line">UPDATE user SET username=&#x27;robot&#x27;, password=&#x27;robot&#x27; WHERE username = &#x27;root&#x27;;</span><br><span class="line"></span><br><span class="line">-- 多行 SQL 语句</span><br><span class="line">UPDATE user</span><br><span class="line">SET username=&#x27;robot&#x27;, password=&#x27;robot&#x27;</span><br><span class="line">WHERE username = &#x27;root&#x27;;</span><br></pre></td></tr></table></figure>
<p>SQL 支持三种注释：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## 注释1</span><br><span class="line">-- 注释2</span><br><span class="line">/* 注释3 */</span><br></pre></td></tr></table></figure>
<h3 id="sql-分类">SQL 分类</h3>
<h4 id="数据定义语言ddl">数据定义语言（DDL）</h4>
<p>数据定义语言（Data Definition Language，DDL）是 SQL
语言集中负责数据结构定义与数据库对象定义的语言。</p>
<p>DDL 的主要功能是<strong>定义数据库对象</strong>。</p>
<p>DDL 的核心指令是
<code>CREATE</code>、<code>ALTER</code>、<code>DROP</code>。</p>
<h4 id="数据操纵语言dml">数据操纵语言（DML）</h4>
<p>数据操纵语言（Data Manipulation Language,
DML）是用于数据库操作，对数据库其中的对象和数据运行访问工作的编程语句。</p>
<p>DML 的主要功能是
<strong>访问数据</strong>，因此其语法都是以<strong>读写数据库</strong>为主。</p>
<p>DML 的核心指令是
<code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code>、<code>SELECT</code>。这四个指令合称
CRUD(Create, Read, Update, Delete)，即增删改查。</p>
<h4 id="事务控制语言tcl">事务控制语言（TCL）</h4>
<p>事务控制语言 (Transaction Control Language, TCL)
用于<strong>管理数据库中的事务</strong>。这些用于管理由 DML
语句所做的更改。它还允许将语句分组为逻辑事务。</p>
<p>TCL 的核心指令是 <code>COMMIT</code>、<code>ROLLBACK</code>。</p>
<h4 id="数据控制语言dcl">数据控制语言（DCL）</h4>
<p>数据控制语言 (Data Control Language, DCL)
是一种可对数据访问权进行控制的指令，它可以控制特定用户账户对数据表、查看表、预存程序、用户自定义函数等数据库对象的控制权。</p>
<p>DCL 的核心指令是 <code>GRANT</code>、<code>REVOKE</code>。</p>
<p>DCL
以<strong>控制用户的访问权限</strong>为主，因此其指令作法并不复杂，可利用
DCL
控制的权限有：<code>CONNECT</code>、<code>SELECT</code>、<code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code>、<code>EXECUTE</code>、<code>USAGE</code>、<code>REFERENCES</code>。</p>
<p>根据不同的 DBMS
以及不同的安全性实体，其支持的权限控制也有所不同。</p>
<p><strong>我们先来介绍 DML 语句用法。 DML
的主要功能是读写数据库实现增删改查。</strong></p>
<h2 id="增删改查">增删改查</h2>
<p>增删改查，又称为 CRUD，数据库基本操作中的基本操作。</p>
<h3 id="插入数据">插入数据</h3>
<p><code>INSERT INTO</code> 语句用于向表中插入新记录。</p>
<p><strong>插入完整的行</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 插入一行</span><br><span class="line">INSERT INTO user</span><br><span class="line">VALUES (10, &#x27;root&#x27;, &#x27;root&#x27;, &#x27;xxxx@163.com&#x27;);</span><br><span class="line"># 插入多行</span><br><span class="line">INSERT INTO user</span><br><span class="line">VALUES (10, &#x27;root&#x27;, &#x27;root&#x27;, &#x27;xxxx@163.com&#x27;), (12, &#x27;user1&#x27;, &#x27;user1&#x27;, &#x27;xxxx@163.com&#x27;), (18, &#x27;user2&#x27;, &#x27;user2&#x27;, &#x27;xxxx@163.com&#x27;);</span><br></pre></td></tr></table></figure>
<p><strong>插入行的一部分</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INSERT INTO user(username, password, email)</span><br><span class="line">VALUES (&#x27;admin&#x27;, &#x27;admin&#x27;, &#x27;xxxx@163.com&#x27;);</span><br></pre></td></tr></table></figure>
<p><strong>插入查询出来的数据</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INSERT INTO user(username)</span><br><span class="line">SELECT name</span><br><span class="line">FROM account;</span><br></pre></td></tr></table></figure>
<h3 id="更新数据">更新数据</h3>
<p><code>UPDATE</code> 语句用于更新表中的记录。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UPDATE user</span><br><span class="line">SET username=&#x27;robot&#x27;, password=&#x27;robot&#x27;</span><br><span class="line">WHERE username = &#x27;root&#x27;;</span><br></pre></td></tr></table></figure>
<h3 id="删除数据">删除数据</h3>
<ul>
<li><code>DELETE</code> 语句用于删除表中的记录。</li>
<li><code>TRUNCATE TABLE</code> 可以清空表，也就是删除所有行。</li>
</ul>
<p><strong>删除表中的指定数据</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELETE FROM user</span><br><span class="line">WHERE username = &#x27;robot&#x27;;</span><br></pre></td></tr></table></figure>
<p><strong>清空表中的数据</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">TRUNCATE TABLE user;</span><br></pre></td></tr></table></figure>
<h3 id="查询数据">查询数据</h3>
<p><code>SELECT</code> 语句用于从数据库中查询数据。</p>
<p><code>DISTINCT</code>
用于返回唯一不同的值。它作用于所有列，也就是说所有列的值都相同才算相同。</p>
<p><code>LIMIT</code>
限制返回的行数。可以有两个参数，第一个参数为起始行，从 0
开始；第二个参数为返回的总行数。</p>
<ul>
<li><code>ASC</code> ：升序（默认）</li>
<li><code>DESC</code> ：降序</li>
</ul>
<p><strong>查询单列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT prod_name</span><br><span class="line">FROM products;</span><br></pre></td></tr></table></figure>
<p><strong>查询多列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT prod_id, prod_name, prod_price</span><br><span class="line">FROM products;</span><br></pre></td></tr></table></figure>
<p><strong>查询所有列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ELECT *</span><br><span class="line">FROM products;</span><br></pre></td></tr></table></figure>
<p><strong>查询不同的值</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT DISTINCT</span><br><span class="line">vend_id FROM products;</span><br></pre></td></tr></table></figure>
<p><strong>限制查询结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 返回前 5 行</span><br><span class="line">SELECT * FROM mytable LIMIT 5;</span><br><span class="line">SELECT * FROM mytable LIMIT 0, 5;</span><br><span class="line">-- 返回第 3 ~ 5 行</span><br><span class="line">SELECT * FROM mytable LIMIT 2, 3;</span><br></pre></td></tr></table></figure>
<h2 id="排序">排序</h2>
<p><code>order by</code>
用于对结果集按照一个列或者多个列进行排序。默认按照升序对记录进行排序，如果需要按照降序对记录进行排序，可以使用
<code>desc</code> 关键字。</p>
<p><code>order by</code>
对多列排序的时候，先排序的列放前面，后排序的列放后面。并且，不同的列可以有不同的排序规则。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT * FROM products</span><br><span class="line">ORDER BY prod_price DESC, prod_name ASC;</span><br></pre></td></tr></table></figure>
<h2 id="分组">分组</h2>
<p><strong><code>group by</code></strong> ：</p>
<ul>
<li><code>group by</code> 子句将记录分组到汇总行中。</li>
<li><code>group by</code> 为每个组返回一个记录。</li>
<li><code>group by</code>
通常还涉及聚合<code>count</code>，<code>max</code>，<code>sum</code>，<code>avg</code>
等。</li>
<li><code>group by</code> 可以按一列或多列进行分组。</li>
<li><code>group by</code> 按分组字段进行排序后，<code>order by</code>
可以以汇总字段来进行排序。</li>
</ul>
<p><strong>分组</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT cust_name, COUNT(cust_address) AS addr_num</span><br><span class="line">FROM Customers GROUP BY cust_name;</span><br></pre></td></tr></table></figure>
<p><strong>分组后排序</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT cust_name, COUNT(cust_address) AS addr_num</span><br><span class="line">FROM Customers GROUP BY cust_name</span><br><span class="line">ORDER BY cust_name DESC;</span><br></pre></td></tr></table></figure>
<p><strong><code>having</code></strong>：</p>
<ul>
<li><code>having</code> 用于对汇总的 <code>group by</code>
结果进行过滤。</li>
<li><code>having</code> 一般都是和 <code>group by</code> 连用。</li>
<li><code>where</code> 和 <code>having</code> 可以在相同的查询中。</li>
</ul>
<p><strong>使用 WHERE 和 HAVING 过滤数据</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT cust_name, COUNT(*) AS num</span><br><span class="line">FROM Customers</span><br><span class="line">WHERE cust_email IS NOT NULL</span><br><span class="line">GROUP BY cust_name</span><br><span class="line">HAVING COUNT(*) &gt;= 1;</span><br></pre></td></tr></table></figure>
<p><strong><code>having</code> vs <code>where</code></strong> ：</p>
<ul>
<li><code>where</code>：过滤过滤指定的行，后面不能加聚合函数（分组函数）。<code>where</code>
在<code>group by</code> 前。</li>
<li><code>having</code>：过滤分组，一般都是和 <code>group by</code>
连用，不能单独使用。<code>having</code> 在 <code>group by</code>
之后。</li>
</ul>
<h2 id="子查询">子查询</h2>
<p>子查询是嵌套在较大查询中的 SQL
查询，也称内部查询或内部选择，包含子查询的语句也称为外部查询或外部选择。简单来说，子查询就是指将一个
<code>select</code> 查询（子查询）的结果作为另一个 SQL
语句（主查询）的数据来源或者判断条件。</p>
<p>子查询可以嵌入
<code>SELECT</code>、<code>INSERT</code>、<code>UPDATE</code> 和
<code>DELETE</code> 语句中，也可以和
<code>=</code>、<code>&lt;</code>、<code>&gt;</code>、<code>IN</code>、<code>BETWEEN</code>、<code>EXISTS</code>
等运算符一起使用。</p>
<p>子查询常用在 <code>WHERE</code> 子句和 <code>FROM</code>
子句后边：</p>
<ul>
<li>当用于 <code>WHERE</code>
子句时，根据不同的运算符，子查询可以返回单行单列、多行单列、单行多列数据。子查询就是要返回能够作为
<code>WHERE</code> 子句查询条件的值。</li>
<li>当用于 <code>FROM</code>
子句时，一般返回多行多列数据，相当于返回一张临时表，这样才符合
<code>FROM</code> 后面是表的规则。这种做法能够实现多表联合查询。</li>
</ul>
<blockquote>
<p>注意：MYSQL 数据库从 4.1
版本才开始支持子查询，早期版本是不支持的。</p>
</blockquote>
<p>用于 <code>WHERE</code> 子句的子查询的基本语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select column_name [, column_name ]</span><br><span class="line">from   table1 [, table2 ]</span><br><span class="line">where  column_name operator</span><br><span class="line">    (select column_name [, column_name ]</span><br><span class="line">    from table1 [, table2 ]</span><br><span class="line">    [where])</span><br></pre></td></tr></table></figure>
<ul>
<li>子查询需要放在括号<code>( )</code>内。</li>
<li><code>operator</code> 表示用于 where 子句的运算符。</li>
</ul>
<p>用于 <code>FROM</code> 子句的子查询的基本语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select column_name [, column_name ]</span><br><span class="line">from (select column_name [, column_name ]</span><br><span class="line">      from table1 [, table2 ]</span><br><span class="line">      [where]) as temp_table_name</span><br><span class="line">where  condition</span><br></pre></td></tr></table></figure>
<p>用于 <code>FROM</code>
的子查询返回的结果相当于一张临时表，所以需要使用 AS
关键字为该临时表起一个名字。</p>
<p><strong>子查询的子查询</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT cust_name, cust_contact</span><br><span class="line">FROM customers</span><br><span class="line">WHERE cust_id IN (SELECT cust_id</span><br><span class="line">                  FROM orders</span><br><span class="line">                  WHERE order_num IN (SELECT order_num</span><br><span class="line">                                      FROM orderitems</span><br><span class="line">                                      WHERE prod_id = &#x27;RGAN01&#x27;));</span><br></pre></td></tr></table></figure>
<p>内部查询首先在其父查询之前执行，以便可以将内部查询的结果传递给外部查询。执行过程可以参考下图：</p>
<figure>
<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/68747470733a2f2f70332d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f63343339646131663564346534623030626466613433313662393333643736347e74706c762d6b3375316662706663702d7a6f6f6d2d312e696d616765"
alt="img" />
<figcaption aria-hidden="true">img</figcaption>
</figure>
<h3 id="where">WHERE</h3>
<ul>
<li><code>WHERE</code> 子句用于过滤记录，即缩小访问数据的范围。</li>
<li><code>WHERE</code> 后跟一个返回 <code>true</code> 或
<code>false</code> 的条件。</li>
<li><code>WHERE</code> 可以与 <code>SELECT</code>，<code>UPDATE</code>
和 <code>DELETE</code> 一起使用。</li>
<li>可以在 <code>WHERE</code> 子句中使用的操作符。</li>
</ul>
<table>
<thead>
<tr class="header">
<th>运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>=</td>
<td>等于</td>
</tr>
<tr class="even">
<td>&lt;&gt;</td>
<td>不等于。注释：在 SQL 的一些版本中，该操作符可被写成 !=</td>
</tr>
<tr class="odd">
<td>&gt;</td>
<td>大于</td>
</tr>
<tr class="even">
<td>&lt;</td>
<td>小于</td>
</tr>
<tr class="odd">
<td>&gt;=</td>
<td>大于等于</td>
</tr>
<tr class="even">
<td>&lt;=</td>
<td>小于等于</td>
</tr>
<tr class="odd">
<td>BETWEEN</td>
<td>在某个范围内</td>
</tr>
<tr class="even">
<td>LIKE</td>
<td>搜索某种模式</td>
</tr>
<tr class="odd">
<td>IN</td>
<td>指定针对某个列的多个可能值</td>
</tr>
</tbody>
</table>
<p><strong><code>SELECT</code> 语句中的 <code>WHERE</code>
子句</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT * FROM Customers</span><br><span class="line">WHERE cust_name = &#x27;Kids Place&#x27;;</span><br></pre></td></tr></table></figure>
<p><strong><code>UPDATE</code> 语句中的 <code>WHERE</code>
子句</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UPDATE Customers</span><br><span class="line">SET cust_name = &#x27;Jack Jones&#x27;</span><br><span class="line">WHERE cust_name = &#x27;Kids Place&#x27;;</span><br></pre></td></tr></table></figure>
<p><strong><code>DELETE</code> 语句中的 <code>WHERE</code>
子句</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELETE FROM Customers</span><br><span class="line">WHERE cust_name = &#x27;Kids Place&#x27;;</span><br></pre></td></tr></table></figure>
<h3 id="in-和-between">IN 和 BETWEEN</h3>
<ul>
<li><code>IN</code> 操作符在 <code>WHERE</code>
子句中使用，作用是在指定的几个特定值中任选一个值。</li>
<li><code>BETWEEN</code> 操作符在 <code>WHERE</code>
子句中使用，作用是选取介于某个范围内的值。</li>
</ul>
<p><strong>IN 示例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM products</span><br><span class="line">WHERE vend_id IN (&#x27;DLL01&#x27;, &#x27;BRS01&#x27;);</span><br></pre></td></tr></table></figure>
<p><strong>BETWEEN 示例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM products</span><br><span class="line">WHERE prod_price BETWEEN 3 AND 5;</span><br></pre></td></tr></table></figure>
<h3 id="andornot">AND、OR、NOT</h3>
<ul>
<li><code>AND</code>、<code>OR</code>、<code>NOT</code>
是用于对过滤条件的逻辑处理指令。</li>
<li><code>AND</code> 优先级高于
<code>OR</code>，为了明确处理顺序，可以使用 <code>()</code>。</li>
<li><code>AND</code> 操作符表示左右条件都要满足。</li>
<li><code>OR</code> 操作符表示左右条件满足任意一个即可。</li>
<li><code>NOT</code> 操作符用于否定一个条件。</li>
</ul>
<p><strong>AND 示例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT prod_id, prod_name, prod_price</span><br><span class="line">FROM products</span><br><span class="line">WHERE vend_id = &#x27;DLL01&#x27; AND prod_price &lt;= 4;</span><br></pre></td></tr></table></figure>
<p><strong>OR 示例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT prod_id, prod_name, prod_price</span><br><span class="line">FROM products</span><br><span class="line">WHERE vend_id = &#x27;DLL01&#x27; OR vend_id = &#x27;BRS01&#x27;;</span><br></pre></td></tr></table></figure>
<p><strong>NOT 示例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM products</span><br><span class="line">WHERE prod_price NOT BETWEEN 3 AND 5;</span><br></pre></td></tr></table></figure>
<h3 id="like">LIKE</h3>
<ul>
<li><code>LIKE</code> 操作符在 <code>WHERE</code>
子句中使用，作用是确定字符串是否匹配模式。</li>
<li>只有字段是文本值时才使用 <code>LIKE</code>。</li>
<li><code>LIKE</code> 支持两个通配符匹配选项：<code>%</code> 和
<code>_</code>。</li>
<li>不要滥用通配符，通配符位于开头处匹配会非常慢。</li>
<li><code>%</code> 表示任何字符出现任意次数。</li>
<li><code>_</code> 表示任何字符出现一次。</li>
</ul>
<p><strong>% 示例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT prod_id, prod_name, prod_price</span><br><span class="line">FROM products</span><br><span class="line">WHERE prod_name LIKE &#x27;%bean bag%&#x27;;</span><br></pre></td></tr></table></figure>
<p><strong>_ 示例</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT prod_id, prod_name, prod_price</span><br><span class="line">FROM products</span><br><span class="line">WHERE prod_name LIKE &#x27;__ inch teddy bear&#x27;;</span><br></pre></td></tr></table></figure>
<h2 id="连接">连接</h2>
<p>JOIN 是“连接”的意思，顾名思义，SQL JOIN
子句用于将两个或者多个表联合起来进行查询。</p>
<p>连接表时需要在每个表中选择一个字段，并对这些字段的值进行比较，值相同的两条记录将合并为一条。<strong>连接表的本质就是将不同表的记录合并起来，形成一张新表。当然，这张新表只是临时的，它仅存在于本次查询期间</strong>。</p>
<p>使用 <code>JOIN</code> 连接两个表的基本语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select table1.column1, table2.column2...</span><br><span class="line">from table1</span><br><span class="line">join table2</span><br><span class="line">on table1.common_column1 = table2.common_column2;</span><br></pre></td></tr></table></figure>
<p><code>table1.common_column1 = table2.common_column2</code>
是连接条件，只有满足此条件的记录才会合并为一行。您可以使用多个运算符来连接表，例如
=、&gt;、&lt;、&lt;&gt;、&lt;=、&gt;=、!=、<code>between</code>、<code>like</code>
或者 <code>not</code>，但是最常见的是使用 =。</p>
<p>当两个表中有同名的字段时，为了帮助数据库引擎区分是哪个表的字段，在书写同名字段名时需要加上表名。当然，如果书写的字段名在两个表中是唯一的，也可以不使用以上格式，只写字段名即可。</p>
<p>另外，如果两张表的关联字段名相同，也可以使用
<code>USING</code>子句来代替 <code>ON</code>，举个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># join....on</span><br><span class="line">select c.cust_name, o.order_num</span><br><span class="line">from Customers c</span><br><span class="line">inner join Orders o</span><br><span class="line">on c.cust_id = o.cust_id</span><br><span class="line">order by c.cust_name;</span><br><span class="line"></span><br><span class="line"># 如果两张表的关联字段名相同，也可以使用USING子句：join....using()</span><br><span class="line">select c.cust_name, o.order_num</span><br><span class="line">from Customers c</span><br><span class="line">inner join Orders o</span><br><span class="line">using(cust_id)</span><br><span class="line">order by c.cust_name;</span><br></pre></td></tr></table></figure>
<p><strong><code>ON</code> 和 <code>WHERE</code> 的区别</strong>：</p>
<ul>
<li>连接表时，SQL 会根据连接条件生成一张新的临时表。<code>ON</code>
就是连接条件，它决定临时表的生成。</li>
<li><code>WHERE</code>
是在临时表生成以后，再对临时表中的数据进行过滤，生成最终的结果集，这个时候已经没有
JOIN-ON 了。</li>
</ul>
<p>所以总结来说就是：<strong>SQL 先根据 ON 生成一张临时表，然后再根据
WHERE 对临时表进行筛选</strong>。</p>
<p>SQL 允许在 <code>JOIN</code>
左边加上一些修饰性的关键词，从而形成不同类型的连接，如下表所示：</p>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="header">
<th>连接类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>INNER JOIN 内连接</td>
<td>（默认连接方式）只有当两个表都存在满足条件的记录时才会返回行。</td>
</tr>
<tr class="even">
<td>LEFT JOIN / LEFT OUTER JOIN 左(外)连接</td>
<td>返回左表中的所有行，即使右表中没有满足条件的行也是如此。</td>
</tr>
<tr class="odd">
<td>RIGHT JOIN / RIGHT OUTER JOIN 右(外)连接</td>
<td>返回右表中的所有行，即使左表中没有满足条件的行也是如此。</td>
</tr>
<tr class="even">
<td>FULL JOIN / FULL OUTER JOIN 全(外)连接</td>
<td>只要其中有一个表存在满足条件的记录，就返回行。</td>
</tr>
<tr class="odd">
<td>SELF JOIN</td>
<td>将一个表连接到自身，就像该表是两个表一样。为了区分两个表，在 SQL
语句中需要至少重命名一个表。</td>
</tr>
<tr class="even">
<td>CROSS JOIN</td>
<td>交叉连接，从两个或者多个连接表中返回记录集的笛卡尔积。</td>
</tr>
</tbody>
</table>
<p>下图展示了 LEFT JOIN、RIGHT JOIN、INNER JOIN、OUTER JOIN 相关的 7
种用法。</p>
<figure>
<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230312175722478.png"
alt="image-20230312175722478" />
<figcaption aria-hidden="true">image-20230312175722478</figcaption>
</figure>
<p>如果不加任何修饰词，只写 <code>JOIN</code>，那么默认为
<code>INNER JOIIN</code></p>
<p>对于 <code>INNER JOIIN</code> 来说，还有一种隐式的写法，称为
“<strong>隐式内连接</strong>”，也就是没有 <code>INNER JOIIN</code>
关键字，使用 <code>WHERE</code> 语句实现内连接的功能</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 隐式内连接</span><br><span class="line">select c.cust_name, o.order_num</span><br><span class="line">from Customers c, Orders o</span><br><span class="line">where c.cust_id = o.cust_id</span><br><span class="line">order by c.cust_name;</span><br><span class="line"></span><br><span class="line"># 显式内连接</span><br><span class="line">select c.cust_name, o.order_num</span><br><span class="line">from Customers c inner join Orders o</span><br><span class="line">using(cust_id)</span><br><span class="line">order by c.cust_name;</span><br></pre></td></tr></table></figure>
<h2 id="组合">组合</h2>
<p><code>UNION</code>
运算符将两个或更多查询的结果组合起来，并生成一个结果集，其中包含来自
<code>UNION</code> 中参与查询的提取行。</p>
<p><code>UNION</code> 基本规则：</p>
<ul>
<li>所有查询的列数和列顺序必须相同。</li>
<li>每个查询中涉及表的列的数据类型必须相同或兼容。</li>
<li>通常返回的列名取自第一个查询。</li>
</ul>
<p>默认地，<code>UNION</code>
操作符选取不同的值。如果允许重复的值，请使用
<code>UNION ALL</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT column_name(s) FROM table1</span><br><span class="line">UNION ALL</span><br><span class="line">SELECT column_name(s) FROM table2;</span><br></pre></td></tr></table></figure>
<p><code>UNION</code> 结果集中的列名总是等于 <code>UNION</code> 中第一个
<code>SELECT</code> 语句中的列名。</p>
<p><code>JOIN</code> vs <code>UNION</code>：</p>
<ul>
<li><code>JOIN</code> 中连接表的列可能不同，但在 <code>UNION</code>
中，所有查询的列数和列顺序必须相同。</li>
<li><code>UNION</code> 将查询之后的行放在一起（垂直放置），但
<code>JOIN</code>
将查询之后的列放在一起（水平放置），即它构成一个笛卡尔积。</li>
</ul>
<h2 id="函数">函数</h2>
<p>不同数据库的函数往往各不相同，因此不可移植。本节主要以 MysSQL
的函数为例。</p>
<h3 id="文本处理">文本处理</h3>
<table>
<thead>
<tr class="header">
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>LEFT()</code>、<code>RIGHT()</code></td>
<td>左边或者右边的字符</td>
</tr>
<tr class="even">
<td><code>LOWER()</code>、<code>UPPER()</code></td>
<td>转换为小写或者大写</td>
</tr>
<tr class="odd">
<td><code>LTRIM()</code>、<code>RTIM()</code></td>
<td>去除左边或者右边的空格</td>
</tr>
<tr class="even">
<td><code>LENGTH()</code></td>
<td>长度</td>
</tr>
<tr class="odd">
<td><code>SOUNDEX()</code></td>
<td>转换为语音值</td>
</tr>
</tbody>
</table>
<p>其中， <strong><code>SOUNDEX()</code></strong>
可以将一个字符串转换为描述其语音表示的字母数字模式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM mytable</span><br><span class="line">WHERE SOUNDEX(col1) = SOUNDEX(&#x27;apple&#x27;)</span><br></pre></td></tr></table></figure>
<h3 id="日期和时间处理">日期和时间处理</h3>
<ul>
<li>日期格式：<code>YYYY-MM-DD</code></li>
<li>时间格式：<code>HH:MM:SS</code></li>
</ul>
<table>
<thead>
<tr class="header">
<th>函 数</th>
<th>说 明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>AddDate()</code></td>
<td>增加一个日期（天、周等）</td>
</tr>
<tr class="even">
<td><code>AddTime()</code></td>
<td>增加一个时间（时、分等）</td>
</tr>
<tr class="odd">
<td><code>CurDate()</code></td>
<td>返回当前日期</td>
</tr>
<tr class="even">
<td><code>CurTime()</code></td>
<td>返回当前时间</td>
</tr>
<tr class="odd">
<td><code>Date()</code></td>
<td>返回日期时间的日期部分</td>
</tr>
<tr class="even">
<td><code>DateDiff()</code></td>
<td>计算两个日期之差</td>
</tr>
<tr class="odd">
<td><code>Date_Add()</code></td>
<td>高度灵活的日期运算函数</td>
</tr>
<tr class="even">
<td><code>Date_Format()</code></td>
<td>返回一个格式化的日期或时间串</td>
</tr>
<tr class="odd">
<td><code>Day()</code></td>
<td>返回一个日期的天数部分</td>
</tr>
<tr class="even">
<td><code>DayOfWeek()</code></td>
<td>对于一个日期，返回对应的星期几</td>
</tr>
<tr class="odd">
<td><code>Hour()</code></td>
<td>返回一个时间的小时部分</td>
</tr>
<tr class="even">
<td><code>Minute()</code></td>
<td>返回一个时间的分钟部分</td>
</tr>
<tr class="odd">
<td><code>Month()</code></td>
<td>返回一个日期的月份部分</td>
</tr>
<tr class="even">
<td><code>Now()</code></td>
<td>返回当前日期和时间</td>
</tr>
<tr class="odd">
<td><code>Second()</code></td>
<td>返回一个时间的秒部分</td>
</tr>
<tr class="even">
<td><code>Time()</code></td>
<td>返回一个日期时间的时间部分</td>
</tr>
<tr class="odd">
<td><code>Year()</code></td>
<td>返回一个日期的年份部分</td>
</tr>
</tbody>
</table>
<h3 id="数值处理">数值处理</h3>
<table>
<thead>
<tr class="header">
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>SIN()</td>
<td>正弦</td>
</tr>
<tr class="even">
<td>COS()</td>
<td>余弦</td>
</tr>
<tr class="odd">
<td>TAN()</td>
<td>正切</td>
</tr>
<tr class="even">
<td>ABS()</td>
<td>绝对值</td>
</tr>
<tr class="odd">
<td>SQRT()</td>
<td>平方根</td>
</tr>
<tr class="even">
<td>MOD()</td>
<td>余数</td>
</tr>
<tr class="odd">
<td>EXP()</td>
<td>指数</td>
</tr>
<tr class="even">
<td>PI()</td>
<td>圆周率</td>
</tr>
<tr class="odd">
<td>RAND()</td>
<td>随机数</td>
</tr>
</tbody>
</table>
<h3 id="汇总">汇总</h3>
<table>
<thead>
<tr class="header">
<th>函 数</th>
<th>说 明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>AVG()</code></td>
<td>返回某列的平均值</td>
</tr>
<tr class="even">
<td><code>COUNT()</code></td>
<td>返回某列的行数</td>
</tr>
<tr class="odd">
<td><code>MAX()</code></td>
<td>返回某列的最大值</td>
</tr>
<tr class="even">
<td><code>MIN()</code></td>
<td>返回某列的最小值</td>
</tr>
<tr class="odd">
<td><code>SUM()</code></td>
<td>返回某列值之和</td>
</tr>
</tbody>
</table>
<p><code>AVG()</code> 会忽略 NULL 行。</p>
<p>使用 <code>DISTINCT</code> 可以让汇总函数值汇总不同的值。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SELECT AVG(DISTINCT col1) AS avg_col</span><br><span class="line">FROM mytable</span><br></pre></td></tr></table></figure>
<p><strong>接下来，我们来介绍 DDL 语句用法。DDL
的主要功能是定义数据库对象（如：数据库、数据表、视图、索引等）</strong></p>
<h2 id="数据定义">数据定义</h2>
<h3 id="数据库database">数据库（DATABASE）</h3>
<h4 id="创建数据库">创建数据库</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE test;</span><br></pre></td></tr></table></figure>
<h4 id="删除数据库">删除数据库</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP DATABASE test;</span><br></pre></td></tr></table></figure>
<h4 id="选择数据库">选择数据库</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">USE test;</span><br></pre></td></tr></table></figure>
<h3 id="数据表table">数据表（TABLE）</h3>
<h4 id="创建数据表">创建数据表</h4>
<p><strong>普通创建</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE user (</span><br><span class="line">  id int(10) unsigned NOT NULL COMMENT &#x27;Id&#x27;,</span><br><span class="line">  username varchar(64) NOT NULL DEFAULT &#x27;default&#x27; COMMENT &#x27;用户名&#x27;,</span><br><span class="line">  password varchar(64) NOT NULL DEFAULT &#x27;default&#x27; COMMENT &#x27;密码&#x27;,</span><br><span class="line">  email varchar(64) NOT NULL DEFAULT &#x27;default&#x27; COMMENT &#x27;邮箱&#x27;</span><br><span class="line">) COMMENT=&#x27;用户表&#x27;;</span><br></pre></td></tr></table></figure>
<p><strong>根据已有的表创建新表</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE vip_user AS</span><br><span class="line">SELECT * FROM user;</span><br></pre></td></tr></table></figure>
<h4 id="删除数据表">删除数据表</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP TABLE user;</span><br></pre></td></tr></table></figure>
<h4 id="修改数据表">修改数据表</h4>
<p><strong>添加列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE user</span><br><span class="line">ADD age int(3);</span><br></pre></td></tr></table></figure>
<p><strong>删除列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE user</span><br><span class="line">DROP COLUMN age;</span><br></pre></td></tr></table></figure>
<p><strong>修改列</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE `user`</span><br><span class="line">MODIFY COLUMN age tinyint;</span><br></pre></td></tr></table></figure>
<p><strong>添加主键</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE user</span><br><span class="line">ADD PRIMARY KEY (id);</span><br></pre></td></tr></table></figure>
<p><strong>删除主键</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE user</span><br><span class="line">DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>
<h3 id="视图view">视图（VIEW）</h3>
<p>定义：</p>
<ul>
<li>视图是基于 SQL 语句的结果集的可视化的表。</li>
<li>视图是虚拟的表，本身不包含数据，也就不能对其进行索引操作。对视图的操作和对普通表的操作一样。</li>
</ul>
<p>作用：</p>
<ul>
<li>简化复杂的 SQL 操作，比如复杂的联结；</li>
<li>只使用实际表的一部分数据；</li>
<li>通过只给用户访问视图的权限，保证数据的安全性；</li>
<li>更改数据格式和表示。</li>
</ul>
<figure>
<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/68747470733a2f2f70332d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f65633463393735323936656134613730393738373964616337633335333837387e74706c762d6b3375316662706663702d7a6f6f6d2d312e696d616765"
alt="mysql视图" />
<figcaption aria-hidden="true">mysql视图</figcaption>
</figure>
<h4 id="创建视图">创建视图</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE VIEW top_10_user_view AS</span><br><span class="line">SELECT id, username</span><br><span class="line">FROM user</span><br><span class="line">WHERE id &lt; 10;</span><br></pre></td></tr></table></figure>
<h4 id="删除视图">删除视图</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP VIEW top_10_user_view;</span><br></pre></td></tr></table></figure>
<h3 id="索引index">索引（INDEX）</h3>
<p><strong>索引是一种用于快速查询和检索数据的数据结构，其本质可以看成是一种排序好的数据结构。</strong></p>
<p>索引的作用就相当于书的目录。打个比方:
我们在查字典的时候，如果没有目录，那我们就只能一页一页的去找我们需要查的那个字，速度很慢。如果有目录了，我们只需要先去目录里查找字的位置，然后直接翻到那一页就行了。</p>
<p><strong>优点</strong> ：</p>
<ul>
<li>使用索引可以大大加快 数据的检索速度（大大减少检索的数据量）,
这也是创建索引的最主要的原因。</li>
<li>通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。</li>
</ul>
<p><strong>缺点</strong> ：</p>
<ul>
<li>创建索引和维护索引需要耗费许多时间。当对表中的数据进行增删改的时候，如果数据有索引，那么索引也需要动态的修改，会降低
SQL 执行效率。</li>
<li>索引需要使用物理文件存储，也会耗费一定空间。</li>
</ul>
<p>但是，<strong>使用索引一定能提高查询性能吗?</strong></p>
<p>大多数情况下，索引查询都是比全表扫描要快的。但是如果数据库的数据量不大，那么使用索引也不一定能够带来很大提升。</p>
<p>关于索引的详细介绍，请看我写的 <a
target="_blank" rel="noopener" href="https://javaguide.cn/database/mysql/mysql-index.html">MySQL
索引详解</a> 这篇文章。</p>
<h4 id="创建索引">创建索引</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE INDEX user_index</span><br><span class="line">ON user (id);</span><br></pre></td></tr></table></figure>
<h4 id="添加索引">添加索引</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER table user ADD INDEX user_index(id)</span><br></pre></td></tr></table></figure>
<h4 id="创建唯一索引">创建唯一索引</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE UNIQUE INDEX user_index</span><br><span class="line">ON user (id);</span><br></pre></td></tr></table></figure>
<h4 id="删除索引">删除索引</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER TABLE user</span><br><span class="line">DROP INDEX user_index;</span><br></pre></td></tr></table></figure>
<h3 id="约束">约束</h3>
<p>SQL 约束用于规定表中的数据规则。</p>
<p>如果存在违反约束的数据行为，行为会被约束终止。</p>
<p>约束可以在创建表时规定（通过 CREATE TABLE
语句），或者在表创建之后规定（通过 ALTER TABLE 语句）。</p>
<p>约束类型：</p>
<ul>
<li><code>NOT NULL</code> - 指示某列不能存储 NULL 值。</li>
<li><code>UNIQUE</code> - 保证某列的每行必须有唯一的值。</li>
<li><code>PRIMARY KEY</code> - NOT NULL 和 UNIQUE
的结合。确保某列（或两个列多个列的结合）有唯一标识，有助于更容易更快速地找到表中的一个特定的记录。</li>
<li><code>FOREIGN KEY</code> -
保证一个表中的数据匹配另一个表中的值的参照完整性。</li>
<li><code>CHECK</code> - 保证列中的值符合指定的条件。</li>
<li><code>DEFAULT</code> - 规定没有给列赋值时的默认值。</li>
</ul>
<p>创建表时使用约束条件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE Users (</span><br><span class="line">  Id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT &#x27;自增Id&#x27;,</span><br><span class="line">  Username VARCHAR(64) NOT NULL UNIQUE DEFAULT &#x27;default&#x27; COMMENT &#x27;用户名&#x27;,</span><br><span class="line">  Password VARCHAR(64) NOT NULL DEFAULT &#x27;default&#x27; COMMENT &#x27;密码&#x27;,</span><br><span class="line">  Email VARCHAR(64) NOT NULL DEFAULT &#x27;default&#x27; COMMENT &#x27;邮箱地址&#x27;,</span><br><span class="line">  Enabled TINYINT(4) DEFAULT NULL COMMENT &#x27;是否有效&#x27;,</span><br><span class="line">  PRIMARY KEY (Id)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COMMENT=&#x27;用户表&#x27;;</span><br></pre></td></tr></table></figure>
<p><strong>接下来，我们来介绍 TCL 语句用法。TCL
的主要功能是管理数据库中的事务。</strong></p>
<h2 id="事务处理">事务处理</h2>
<p>不能回退 <code>SELECT</code> 语句，回退 <code>SELECT</code>
语句也没意义；也不能回退 <code>CREATE</code> 和 <code>DROP</code>
语句。</p>
<p><strong>MySQL
默认是隐式提交</strong>，每执行一条语句就把这条语句当成一个事务然后进行提交。当出现
<code>START TRANSACTION</code> 语句时，会关闭隐式提交；当
<code>COMMIT</code> 或 <code>ROLLBACK</code>
语句执行后，事务会自动关闭，重新恢复隐式提交。</p>
<p>通过 <code>set autocommit=0</code> 可以取消自动提交，直到
<code>set autocommit=1</code> 才会提交；<code>autocommit</code>
标记是针对每个连接而不是针对服务器的。</p>
<p>指令：</p>
<ul>
<li><code>START TRANSACTION</code> - 指令用于标记事务的起始点。</li>
<li><code>SAVEPOINT</code> - 指令用于创建保留点。</li>
<li><code>ROLLBACK TO</code> -
指令用于回滚到指定的保留点；如果没有设置保留点，则回退到
<code>START TRANSACTION</code> 语句处。</li>
<li><code>COMMIT</code> - 提交事务。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-- 开始事务</span><br><span class="line">START TRANSACTION;</span><br><span class="line"></span><br><span class="line">-- 插入操作 A</span><br><span class="line">INSERT INTO `user`</span><br><span class="line">VALUES (1, &#x27;root1&#x27;, &#x27;root1&#x27;, &#x27;xxxx@163.com&#x27;);</span><br><span class="line"></span><br><span class="line">-- 创建保留点 updateA</span><br><span class="line">SAVEPOINT updateA;</span><br><span class="line"></span><br><span class="line">-- 插入操作 B</span><br><span class="line">INSERT INTO `user`</span><br><span class="line">VALUES (2, &#x27;root2&#x27;, &#x27;root2&#x27;, &#x27;xxxx@163.com&#x27;);</span><br><span class="line"></span><br><span class="line">-- 回滚到保留点 updateA</span><br><span class="line">ROLLBACK TO updateA;</span><br><span class="line"></span><br><span class="line">-- 提交事务，只有操作 A 生效</span><br><span class="line">COMMIT;</span><br></pre></td></tr></table></figure>
<p><strong>接下来，我们来介绍 DCL 语句用法。DCL
的主要功能是控制用户的访问权限。</strong></p>
<h2 id="权限控制">权限控制</h2>
<p>要授予用户帐户权限，可以用<code>GRANT</code>命令。有撤销用户的权限，可以用<code>REVOKE</code>命令。这里以
MySQl 为例，介绍权限控制实际应用。</p>
<p><code>GRANT</code>授予权限语法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GRANT privilege,[privilege],.. ON privilege_level</span><br><span class="line">TO user [IDENTIFIED BY password]</span><br><span class="line">[REQUIRE tsl_option]</span><br><span class="line">[WITH [GRANT_OPTION | resource_option]];</span><br></pre></td></tr></table></figure>
<p>简单解释一下：</p>
<ol type="1">
<li>在<code>GRANT</code>关键字后指定一个或多个权限。如果授予用户多个权限，则每个权限由逗号分隔。</li>
<li><code>ON privilege_level</code> 确定权限应用级别。MySQL 支持
global（<code>*.*</code>），database（<code>database.*</code>），table（<code>database.table</code>）和列级别。如果使用列权限级别，则必须在每个权限之后指定一个或逗号分隔列的列表。</li>
<li><code>user</code>
是要授予权限的用户。如果用户已存在，则<code>GRANT</code>语句将修改其权限。否则，<code>GRANT</code>语句将创建一个新用户。可选子句<code>IDENTIFIED BY</code>允许您为用户设置新的密码。</li>
<li><code>REQUIRE tsl_option</code>指定用户是否必须通过 SSL，X059
等安全连接连接到数据库服务器。</li>
<li>可选 <code>WITH GRANT OPTION</code>
子句允许您授予其他用户或从其他用户中删除您拥有的权限。此外，您可以使用<code>WITH</code>子句分配
MySQL
数据库服务器的资源，例如，设置用户每小时可以使用的连接数或语句数。这在
MySQL 共享托管等共享环境中非常有用。</li>
</ol>
<p><code>REVOKE</code> 撤销权限语法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REVOKE   privilege_type [(column_list)]</span><br><span class="line">        [, priv_type [(column_list)]]...</span><br><span class="line">ON [object_type] privilege_level</span><br><span class="line">FROM user [, user]...</span><br></pre></td></tr></table></figure>
<p>简单解释一下：</p>
<ol type="1">
<li>在 <code>REVOKE</code>
关键字后面指定要从用户撤消的权限列表。您需要用逗号分隔权限。</li>
<li>指定在 <code>ON</code> 子句中撤销特权的特权级别。</li>
<li>指定要撤消 <code>FROM</code> 子句中的权限的用户帐户。</li>
</ol>
<p><code>GRANT</code> 和 <code>REVOKE</code>
可在几个层次上控制访问权限：</p>
<ul>
<li>整个服务器，使用 <code>GRANT ALL</code> 和
<code>REVOKE ALL</code>；</li>
<li>整个数据库，使用 <code>ON database.*</code>；</li>
<li>特定的表，使用 <code>ON database.table</code>；</li>
<li>特定的列；</li>
<li>特定的存储过程。</li>
</ul>
<p>新创建的账户没有任何权限。账户用 <code>username@host</code>
的形式定义，<code>username@%</code> 使用的是默认主机名。MySQL
的账户信息保存在 mysql 这个数据库中。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line">SELECT user FROM user;</span><br></pre></td></tr></table></figure>
<p>下表说明了可用于<code>GRANT</code>和<code>REVOKE</code>语句的所有允许权限：</p>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 49%" />
<col style="width: 6%" />
<col style="width: 4%" />
<col style="width: 6%" />
<col style="width: 6%" />
<col style="width: 3%" />
<col style="width: 3%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>特权</strong></th>
<th><strong>说明</strong></th>
<th><strong>级别</strong></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>全局</strong></td>
<td>数据库</td>
<td><strong>表</strong></td>
<td><strong>列</strong></td>
<td><strong>程序</strong></td>
<td><strong>代理</strong></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>ALL [PRIVILEGES]</td>
<td>授予除 GRANT OPTION 之外的指定访问级别的所有权限</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>ALTER</td>
<td>允许用户使用 ALTER TABLE 语句</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>ALTER ROUTINE</td>
<td>允许用户更改或删除存储的例程</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td>X</td>
<td></td>
</tr>
<tr class="odd">
<td>CREATE</td>
<td>允许用户创建数据库和表</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>CREATE ROUTINE</td>
<td>允许用户创建存储的例程</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>CREATE TABLESPACE</td>
<td>允许用户创建，更改或删除表空间和日志文件组</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>CREATE TEMPORARY TABLES</td>
<td>允许用户使用 CREATE TEMPORARY TABLE 创建临时表</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>CREATE USER</td>
<td>允许用户使用 CREATE USER，DROP USER，RENAME USER 和 REVOKE ALL
PRIVILEGES 语句。</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>CREATE VIEW</td>
<td>允许用户创建或修改视图。</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>DELETE</td>
<td>允许用户使用 DELETE</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>DROP</td>
<td>允许用户删除数据库，表和视图</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>EVENT</td>
<td>启用事件计划程序的事件使用。</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>EXECUTE</td>
<td>允许用户执行存储的例程</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>FILE</td>
<td>允许用户读取数据库目录中的任何文件。</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>GRANT OPTION</td>
<td>允许用户拥有授予或撤消其他帐户权限的权限。</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td>X</td>
<td>X</td>
</tr>
<tr class="odd">
<td>INDEX</td>
<td>允许用户创建或删除索引。</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>INSERT</td>
<td>允许用户使用 INSERT 语句</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>LOCK TABLES</td>
<td>允许用户对具有 SELECT 权限的表使用 LOCK TABLES</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>PROCESS</td>
<td>允许用户使用 SHOW PROCESSLIST 语句查看所有进程。</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>PROXY</td>
<td>启用用户代理。</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>REFERENCES</td>
<td>允许用户创建外键</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>RELOAD</td>
<td>允许用户使用 FLUSH 操作</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>REPLICATION CLIENT</td>
<td>允许用户查询以查看主服务器或从属服务器的位置</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>REPLICATION SLAVE</td>
<td>允许用户使用复制从属从主服务器读取二进制日志事件。</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>SELECT</td>
<td>允许用户使用 SELECT 语句</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>SHOW DATABASES</td>
<td>允许用户显示所有数据库</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>SHOW VIEW</td>
<td>允许用户使用 SHOW CREATE VIEW 语句</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>SHUTDOWN</td>
<td>允许用户使用 mysqladmin shutdown 命令</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>SUPER</td>
<td>允许用户使用其他管理操作，例如 CHANGE MASTER TO，KILL，PURGE BINARY
LOGS，SET GLOBAL 和 mysqladmin 命令</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>TRIGGER</td>
<td>允许用户使用 TRIGGER 操作。</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>UPDATE</td>
<td>允许用户使用 UPDATE 语句</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>USAGE</td>
<td>相当于“没有特权”</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="创建账户">创建账户</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE USER myuser IDENTIFIED BY &#x27;mypassword&#x27;;</span><br></pre></td></tr></table></figure>
<h3 id="修改账户名">修改账户名</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UPDATE user SET user=&#x27;newuser&#x27; WHERE user=&#x27;myuser&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<h3 id="删除账户">删除账户</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP USER myuser;</span><br></pre></td></tr></table></figure>
<h3 id="查看权限">查看权限</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW GRANTS FOR myuser;</span><br></pre></td></tr></table></figure>
<h3 id="授予权限">授予权限</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GRANT SELECT, INSERT ON *.* TO myuser;</span><br></pre></td></tr></table></figure>
<h3 id="删除权限">删除权限</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REVOKE SELECT, INSERT ON *.* FROM myuser;</span><br></pre></td></tr></table></figure>
<h3 id="更改密码">更改密码</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET PASSWORD FOR myuser = &#x27;mypass&#x27;;</span><br></pre></td></tr></table></figure>
<h2 id="存储过程">存储过程</h2>
<p>存储过程可以看成是对一系列 SQL
操作的批处理。存储过程可以由触发器，其他存储过程以及 Java， Python，PHP
等应用程序调用。</p>
<figure>
<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/68747470733a2f2f70332d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f36306166646339633961353934663037393732376563363461326536393861337e74706c762d6b3375316662706663702d7a6f6f6d2d312e696d616765"
alt="mysql存储过程" />
<figcaption aria-hidden="true">mysql存储过程</figcaption>
</figure>
<p>使用存储过程的好处：</p>
<ul>
<li>代码封装，保证了一定的安全性；</li>
<li>代码复用；</li>
<li>由于是预先编译，因此具有很高的性能。</li>
</ul>
<p>创建存储过程：</p>
<ul>
<li>命令行中创建存储过程需要自定义分隔符，因为命令行是以 <code>;</code>
为结束符，而存储过程中也包含了分号，因此会错误把这部分分号当成是结束符，造成语法错误。</li>
<li>包含 <code>in</code>、<code>out</code> 和 <code>inout</code>
三种参数。</li>
<li>给变量赋值都需要用 <code>select into</code> 语句。</li>
<li>每次只能给一个变量赋值，不支持集合的操作。</li>
</ul>
<p>需要注意的是：<strong>阿里巴巴《Java
开发手册》强制禁止使用存储过程。因为存储过程难以调试和扩展，更没有移植性。</strong></p>
<figure>
<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230312175641477.png"
alt="image-20230312175641477" />
<figcaption aria-hidden="true">image-20230312175641477</figcaption>
</figure>
<p>至于到底要不要在项目中使用，还是要看项目实际需求，权衡好利弊即可！</p>
<h3 id="创建存储过程">创建存储过程</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP PROCEDURE IF EXISTS `proc_adder`;</span><br><span class="line">DELIMITER ;;</span><br><span class="line">CREATE DEFINER=`root`@`localhost` PROCEDURE `proc_adder`(IN a int, IN b int, OUT sum int)</span><br><span class="line">BEGIN</span><br><span class="line">    DECLARE c int;</span><br><span class="line">    if a is null then set a = 0;</span><br><span class="line">    end if;</span><br><span class="line"></span><br><span class="line">    if b is null then set b = 0;</span><br><span class="line">    end if;</span><br><span class="line"></span><br><span class="line">    set sum  = a + b;</span><br><span class="line">END</span><br><span class="line">;;</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<h3 id="使用存储过程">使用存储过程</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set @b=5;</span><br><span class="line">call proc_adder(2,@b,@s);</span><br><span class="line">select @s as sum;</span><br></pre></td></tr></table></figure>
<h2 id="游标">游标</h2>
<p>游标（cursor）是一个存储在 DBMS 服务器上的数据库查询，它不是一条
<code>SELECT</code> 语句，而是被该语句检索出来的结果集。</p>
<p>在存储过程中使用游标可以对一个结果集进行移动遍历。</p>
<p>游标主要用于交互式应用，其中用户需要滚动屏幕上的数据，并对数据进行浏览或做出更改。</p>
<p>使用游标的几个明确步骤：</p>
<ul>
<li><p>在使用游标前，必须声明(定义)它。这个过程实际上没有检索数据，
它只是定义要使用的 <code>SELECT</code> 语句和游标选项。</p></li>
<li><p>一旦声明，就必须打开游标以供使用。这个过程用前面定义的 SELECT
语句把数据实际检索出来。</p></li>
<li><p>对于填有数据的游标，根据需要取出(检索)各行。</p></li>
<li><p>在结束游标使用时，必须关闭游标，可能的话，释放游标(有赖于具</p>
<p>体的 DBMS)。</p></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line">CREATE  PROCEDURE getTotal()</span><br><span class="line">BEGIN</span><br><span class="line">    DECLARE total INT;</span><br><span class="line">    -- 创建接收游标数据的变量</span><br><span class="line">    DECLARE sid INT;</span><br><span class="line">    DECLARE sname VARCHAR(10);</span><br><span class="line">    -- 创建总数变量</span><br><span class="line">    DECLARE sage INT;</span><br><span class="line">    -- 创建结束标志变量</span><br><span class="line">    DECLARE done INT DEFAULT false;</span><br><span class="line">    -- 创建游标</span><br><span class="line">    DECLARE cur CURSOR FOR SELECT id,name,age from cursor_table where age&gt;30;</span><br><span class="line">    -- 指定游标循环结束时的返回值</span><br><span class="line">    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = true;</span><br><span class="line">    SET total = 0;</span><br><span class="line">    OPEN cur;</span><br><span class="line">    FETCH cur INTO sid, sname, sage;</span><br><span class="line">    WHILE(NOT done)</span><br><span class="line">    DO</span><br><span class="line">        SET total = total + 1;</span><br><span class="line">        FETCH cur INTO sid, sname, sage;</span><br><span class="line">    END WHILE;</span><br><span class="line"></span><br><span class="line">    CLOSE cur;</span><br><span class="line">    SELECT total;</span><br><span class="line">END $</span><br><span class="line">DELIMITER ;</span><br><span class="line"></span><br><span class="line">-- 调用存储过程</span><br><span class="line">call getTotal();</span><br></pre></td></tr></table></figure>
<h2 id="触发器">触发器</h2>
<p>触发器是一种与表操作有关的数据库对象，当触发器所在表上出现指定事件时，将调用该对象，即表的操作事件触发表上的触发器的执行。</p>
<p>我们可以使用触发器来进行审计跟踪，把修改记录到另外一张表中。</p>
<p>使用触发器的优点：</p>
<ul>
<li>SQL 触发器提供了另一种检查数据完整性的方法。</li>
<li>SQL 触发器可以捕获数据库层中业务逻辑中的错误。</li>
<li>SQL 触发器提供了另一种运行计划任务的方法。通过使用 SQL
触发器，您不必等待运行计划任务，因为在对表中的数据进行更改之前或之后会自动调用触发器。</li>
<li>SQL 触发器对于审计表中数据的更改非常有用。</li>
</ul>
<p>使用触发器的缺点：</p>
<ul>
<li>SQL
触发器只能提供扩展验证，并且不能替换所有验证。必须在应用程序层中完成一些简单的验证。例如，您可以使用
JavaScript 在客户端验证用户的输入，或者使用服务器端脚本语言（如
JSP，PHP，ASP.NET，Perl）在服务器端验证用户的输入。</li>
<li>从客户端应用程序调用和执行 SQL
触发器是不可见的，因此很难弄清楚数据库层中发生了什么。</li>
<li>SQL 触发器可能会增加数据库服务器的开销。</li>
</ul>
<p>MySQL 不允许在触发器中使用 CALL 语句 ，也就是不能调用存储过程。</p>
<blockquote>
<p>注意：在 MySQL 中，分号 <code>;</code>
是语句结束的标识符，遇到分号表示该段语句已经结束，MySQL
可以开始执行了。因此，解释器遇到触发器执行动作中的分号后就开始执行，然后会报错，因为没有找到和
BEGIN 匹配的 END。</p>
<p>这时就会用到 <code>DELIMITER</code> 命令（DELIMITER
是定界符，分隔符的意思）。它是一条命令，不需要语句结束标识，语法为：<code>DELIMITER new_delemiter</code>。<code>new_delemiter</code>
可以设为 1 个或多个长度的符号，默认的是分号
<code>;</code>，我们可以把它修改为其他符号，如 <code>$</code> -
<code>DELIMITER $</code>
。在这之后的语句，以分号结束，解释器不会有什么反应，只有遇到了
<code>$</code>，才认为是语句结束。注意，使用完之后，我们还应该记得把它给修改回来。</p>
</blockquote>
<p>在 MySQL 5.7.2 版之前，可以为每个表定义最多六个触发器。</p>
<ul>
<li><code>BEFORE INSERT</code> - 在将数据插入表格之前激活。</li>
<li><code>AFTER INSERT</code> - 将数据插入表格后激活。</li>
<li><code>BEFORE UPDATE</code> - 在更新表中的数据之前激活。</li>
<li><code>AFTER UPDATE</code> - 更新表中的数据后激活。</li>
<li><code>BEFORE DELETE</code> - 在从表中删除数据之前激活。</li>
<li><code>AFTER DELETE</code> - 从表中删除数据后激活。</li>
</ul>
<p>但是，从 MySQL 版本
5.7.2+开始，可以为同一触发事件和操作时间定义多个触发器。</p>
<p><strong><code>NEW</code> 和 <code>OLD</code></strong> ：</p>
<ul>
<li>MySQL 中定义了 <code>NEW</code> 和 <code>OLD</code>
关键字，用来表示触发器的所在表中，触发了触发器的那一行数据。</li>
<li>在 <code>INSERT</code> 型触发器中，<code>NEW</code>
用来表示将要（<code>BEFORE</code>）或已经（<code>AFTER</code>）插入的新数据；</li>
<li>在 <code>UPDATE</code> 型触发器中，<code>OLD</code>
用来表示将要或已经被修改的原数据，<code>NEW</code>
用来表示将要或已经修改为的新数据；</li>
<li>在 <code>DELETE</code> 型触发器中，<code>OLD</code>
用来表示将要或已经被删除的原数据；</li>
<li>使用方法： <code>NEW.columnName</code> （columnName
为相应数据表某一列名）</li>
</ul>
<h3 id="创建触发器">创建触发器</h3>
<blockquote>
<p>提示：为了理解触发器的要点，有必要先了解一下创建触发器的指令。</p>
</blockquote>
<p><code>CREATE TRIGGER</code> 指令用于创建触发器。</p>
<p>语法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TRIGGER trigger_name</span><br><span class="line">trigger_time</span><br><span class="line">trigger_event</span><br><span class="line">ON table_name</span><br><span class="line">FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">  trigger_statements</span><br><span class="line">END;</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li><code>trigger_name</code> ：触发器名</li>
<li><code>trigger_time</code> : 触发器的触发时机。取值为
<code>BEFORE</code> 或 <code>AFTER</code>。</li>
<li><code>trigger_event</code> : 触发器的监听事件。取值为
<code>INSERT</code>、<code>UPDATE</code> 或 <code>DELETE</code>。</li>
<li><code>table_name</code> :
触发器的监听目标。指定在哪张表上建立触发器。</li>
<li><code>FOR EACH ROW</code>: 行级监视，Mysql 固定写法，其他 DBMS
不同。</li>
<li><code>trigger_statements</code>: 触发器执行动作。是一条或多条 SQL
语句的列表，列表内的每条语句都必须用分号 <code>;</code> 来结尾。</li>
</ul>
<p>当触发器的触发条件满足时，将会执行 <code>BEGIN</code> 和
<code>END</code> 之间的触发器执行动作。</p>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DELIMITER $</span><br><span class="line">CREATE TRIGGER `trigger_insert_user`</span><br><span class="line">AFTER INSERT ON `user`</span><br><span class="line">FOR EACH ROW</span><br><span class="line">BEGIN</span><br><span class="line">    INSERT INTO `user_history`(user_id, operate_type, operate_time)</span><br><span class="line">    VALUES (NEW.id, &#x27;add a user&#x27;,  now());</span><br><span class="line">END $</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure>
<h3 id="查看触发器">查看触发器</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHOW TRIGGERS;</span><br></pre></td></tr></table></figure>
<h3 id="删除触发器">删除触发器</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP TRIGGER IF EXISTS trigger_insert_user;</span><br></pre></td></tr></table></figure>
<h2 id="文章推荐">文章推荐</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/I-ZT3zGTNBZ6egS7T09jyQ">后端程序员必备：SQL高性能优化指南！35+条优化建议立马GET!</a></li>
<li><a
target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247486461&amp;idx=1&amp;sn=60a22279196d084cc398936fe3b37772&amp;chksm=cea24436f9d5cd20a4fa0e907590f3e700d7378b3f608d7b33bb52cfb96f503b7ccb65a1deed&amp;token=1987003517&amp;lang=zh_CN#rd">后端程序员必备：书写高质量SQL的30条建议</a></li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%A4%8D%E4%B9%A0/" rel="tag"># 复习</a>
              <a href="/tags/%E5%A4%8D%E4%B9%A0-javaGuide/" rel="tag"># 复习-javaGuide</a>
              <a href="/tags/%E5%A4%8D%E4%B9%A0-javaGuide-database/" rel="tag"># 复习-javaGuide-database</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/02/27/review/java_guide/diagram/redis/" rel="prev" title="redis问题图解">
      <i class="fa fa-chevron-left"></i> redis问题图解
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/03/12/review/java_guide/database/ly0503lysql-question-01/" rel="next" title="sql常见面试题总结01">
      sql常见面试题总结01 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="lwmfjc/lwmfjc.github.io.comment" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">1.</span> <span class="nav-text">基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%AF%E8%AF%AD"><span class="nav-number">1.1.</span> <span class="nav-text">数据库术语</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sql-%E8%AF%AD%E6%B3%95"><span class="nav-number">1.2.</span> <span class="nav-text">SQL 语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#sql-%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84"><span class="nav-number">1.2.1.</span> <span class="nav-text">SQL 语法结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sql-%E8%AF%AD%E6%B3%95%E8%A6%81%E7%82%B9"><span class="nav-number">1.2.2.</span> <span class="nav-text">SQL 语法要点</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sql-%E5%88%86%E7%B1%BB"><span class="nav-number">1.3.</span> <span class="nav-text">SQL 分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80ddl"><span class="nav-number">1.3.1.</span> <span class="nav-text">数据定义语言（DDL）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%93%8D%E7%BA%B5%E8%AF%AD%E8%A8%80dml"><span class="nav-number">1.3.2.</span> <span class="nav-text">数据操纵语言（DML）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80tcl"><span class="nav-number">1.3.3.</span> <span class="nav-text">事务控制语言（TCL）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80dcl"><span class="nav-number">1.3.4.</span> <span class="nav-text">数据控制语言（DCL）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5"><span class="nav-number">2.</span> <span class="nav-text">增删改查</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">2.1.</span> <span class="nav-text">插入数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="nav-number">2.2.</span> <span class="nav-text">更新数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">2.3.</span> <span class="nav-text">删除数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="nav-number">2.4.</span> <span class="nav-text">查询数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%92%E5%BA%8F"><span class="nav-number">3.</span> <span class="nav-text">排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%BB%84"><span class="nav-number">4.</span> <span class="nav-text">分组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="nav-number">5.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#where"><span class="nav-number">5.1.</span> <span class="nav-text">WHERE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#in-%E5%92%8C-between"><span class="nav-number">5.2.</span> <span class="nav-text">IN 和 BETWEEN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#andornot"><span class="nav-number">5.3.</span> <span class="nav-text">AND、OR、NOT</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#like"><span class="nav-number">5.4.</span> <span class="nav-text">LIKE</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5"><span class="nav-number">6.</span> <span class="nav-text">连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E5%90%88"><span class="nav-number">7.</span> <span class="nav-text">组合</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0"><span class="nav-number">8.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="nav-number">8.1.</span> <span class="nav-text">文本处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86"><span class="nav-number">8.2.</span> <span class="nav-text">日期和时间处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E5%80%BC%E5%A4%84%E7%90%86"><span class="nav-number">8.3.</span> <span class="nav-text">数值处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B1%87%E6%80%BB"><span class="nav-number">8.4.</span> <span class="nav-text">汇总</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89"><span class="nav-number">9.</span> <span class="nav-text">数据定义</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93database"><span class="nav-number">9.1.</span> <span class="nav-text">数据库（DATABASE）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">9.1.1.</span> <span class="nav-text">创建数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">9.1.2.</span> <span class="nav-text">删除数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">9.1.3.</span> <span class="nav-text">选择数据库</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%A1%A8table"><span class="nav-number">9.2.</span> <span class="nav-text">数据表（TABLE）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="nav-number">9.2.1.</span> <span class="nav-text">创建数据表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="nav-number">9.2.2.</span> <span class="nav-text">删除数据表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="nav-number">9.2.3.</span> <span class="nav-text">修改数据表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%86%E5%9B%BEview"><span class="nav-number">9.3.</span> <span class="nav-text">视图（VIEW）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="nav-number">9.3.1.</span> <span class="nav-text">创建视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="nav-number">9.3.2.</span> <span class="nav-text">删除视图</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95index"><span class="nav-number">9.4.</span> <span class="nav-text">索引（INDEX）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="nav-number">9.4.1.</span> <span class="nav-text">创建索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95"><span class="nav-number">9.4.2.</span> <span class="nav-text">添加索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95"><span class="nav-number">9.4.3.</span> <span class="nav-text">创建唯一索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="nav-number">9.4.4.</span> <span class="nav-text">删除索引</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%A6%E6%9D%9F"><span class="nav-number">9.5.</span> <span class="nav-text">约束</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86"><span class="nav-number">10.</span> <span class="nav-text">事务处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="nav-number">11.</span> <span class="nav-text">权限控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%88%B7"><span class="nav-number">11.1.</span> <span class="nav-text">创建账户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%B4%A6%E6%88%B7%E5%90%8D"><span class="nav-number">11.2.</span> <span class="nav-text">修改账户名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%B4%A6%E6%88%B7"><span class="nav-number">11.3.</span> <span class="nav-text">删除账户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E6%9D%83%E9%99%90"><span class="nav-number">11.4.</span> <span class="nav-text">查看权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%88%E4%BA%88%E6%9D%83%E9%99%90"><span class="nav-number">11.5.</span> <span class="nav-text">授予权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E6%9D%83%E9%99%90"><span class="nav-number">11.6.</span> <span class="nav-text">删除权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%B4%E6%94%B9%E5%AF%86%E7%A0%81"><span class="nav-number">11.7.</span> <span class="nav-text">更改密码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">12.</span> <span class="nav-text">存储过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">12.1.</span> <span class="nav-text">创建存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-number">12.2.</span> <span class="nav-text">使用存储过程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B8%B8%E6%A0%87"><span class="nav-number">13.</span> <span class="nav-text">游标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">14.</span> <span class="nav-text">触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">14.1.</span> <span class="nav-text">创建触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">14.2.</span> <span class="nav-text">查看触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-number">14.3.</span> <span class="nav-text">删除触发器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E7%AB%A0%E6%8E%A8%E8%8D%90"><span class="nav-number">15.</span> <span class="nav-text">文章推荐</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="刘易"
      src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/avatar.png">
  <p class="site-author-name" itemprop="name">刘易</p>
  <div class="site-description" itemprop="description">知命不惧 日日自新</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">198</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lwmfjc" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lwmfjc" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">刘易</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">1.4m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">43:03</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
