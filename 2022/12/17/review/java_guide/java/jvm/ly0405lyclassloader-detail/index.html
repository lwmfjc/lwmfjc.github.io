<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lwmfjc.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="ç±»åŠ è½½å™¨è¯¦è§£">
<meta property="og:type" content="article">
<meta property="og:title" content="ç±»åŠ è½½å™¨è¯¦è§£">
<meta property="og:url" content="https://lwmfjc.github.io/2022/12/17/review/java_guide/java/jvm/ly0405lyclassloader-detail/index.html">
<meta property="og:site_name" content="éšè®°">
<meta property="og:description" content="ç±»åŠ è½½å™¨è¯¦è§£">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-12-17T22:39:21.000Z">
<meta property="article:modified_time" content="2022-12-18T08:23:21.000Z">
<meta property="article:author" content="åˆ˜æ˜“">
<meta property="article:tag" content="å¤ä¹ ">
<meta property="article:tag" content="å¤ä¹ -javaGuide">
<meta property="article:tag" content="å¤ä¹ -javaGuide-jvm">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://lwmfjc.github.io/2022/12/17/review/java_guide/java/jvm/ly0405lyclassloader-detail/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>ç±»åŠ è½½å™¨è¯¦è§£ | éšè®°</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">éšè®°</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lwmfjc.github.io/2022/12/17/review/java_guide/java/jvm/ly0405lyclassloader-detail/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/avatar.png">
      <meta itemprop="name" content="åˆ˜æ˜“">
      <meta itemprop="description" content="çŸ¥å‘½ä¸æƒ§ æ—¥æ—¥è‡ªæ–°">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="éšè®°">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ç±»åŠ è½½å™¨è¯¦è§£
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-12-17 22:39:21" itemprop="dateCreated datePublished" datetime="2022-12-17T22:39:21+00:00">2022-12-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-12-18 08:23:21" itemprop="dateModified" datetime="2022-12-18T08:23:21+00:00">2022-12-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">å­¦ä¹ </span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="æœ¬æ–‡å­—æ•°">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              <span>9.2k</span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ—¶é•¿">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              <span>17 åˆ†é’Ÿ</span>
            </span>
            <div class="post-description">ç±»åŠ è½½å™¨è¯¦è§£</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <blockquote>
<p>è½¬è½½è‡ªhttps://github.com/Snailclimb/JavaGuideï¼ˆæ·»åŠ å°éƒ¨åˆ†ç¬”è®°ï¼‰æ„Ÿè°¢ä½œè€…!</p>
</blockquote>
<h2 id="å›é¡¾ä¸€ä¸‹ç±»åŠ è½½è¿‡ç¨‹">å›é¡¾ä¸€ä¸‹ç±»åŠ è½½è¿‡ç¨‹</h2>
<p>å¼€å§‹ä»‹ç»ç±»åŠ è½½å™¨å’ŒåŒäº²å§”æ´¾æ¨¡å‹ä¹‹å‰ï¼Œç®€å•å›é¡¾ä¸€ä¸‹ç±»åŠ è½½è¿‡ç¨‹ã€‚</p>
<ul>
<li>ç±»åŠ è½½è¿‡ç¨‹ï¼š<strong>åŠ è½½-&gt;è¿æ¥-&gt;åˆå§‹åŒ–</strong>ã€‚</li>
<li>è¿æ¥è¿‡ç¨‹åˆå¯åˆ†ä¸ºä¸‰æ­¥ï¼š<strong>éªŒè¯-&gt;å‡†å¤‡-&gt;è§£æ</strong>ã€‚</li>
</ul>
<p>[<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/68747470733a2f2f6f73732e6a61766167756964652e636e2f6769746875622f6a61766167756964652f6a6176612f6a766d2f636c6173732d6c6f6164696e672d70726f6365647572652e706e67"
alt="ç±»åŠ è½½è¿‡ç¨‹" /></p>
<p>åŠ è½½æ˜¯ç±»åŠ è½½è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œä¸»è¦å®Œæˆä¸‹é¢ 3 ä»¶äº‹æƒ…ï¼š</p>
<ol type="1">
<li>é€šè¿‡<strong>å…¨ç±»å</strong>è·å–å®šä¹‰æ­¤ç±»çš„<strong>äºŒè¿›åˆ¶å­—èŠ‚æµ</strong></li>
<li>å°†å­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„<strong>è½¬æ¢ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„</strong></li>
<li>åœ¨<strong>å†…å­˜</strong>ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„
<strong><code>Class</code>
å¯¹è±¡</strong>ï¼Œä½œä¸º<strong>æ–¹æ³•åŒºè¿™äº›æ•°æ®çš„è®¿é—®å…¥å£</strong></li>
</ol>
<h2 id="ç±»åŠ è½½å™¨">ç±»åŠ è½½å™¨</h2>
<h3 id="ç±»åŠ è½½å™¨ä»‹ç»">ç±»åŠ è½½å™¨ä»‹ç»</h3>
<p>ç±»åŠ è½½å™¨ä» JDK 1.0 å°±å‡ºç°äº†ï¼Œæœ€åˆåªæ˜¯ä¸ºäº†æ»¡è¶³ Java
Appletï¼ˆå·²ç»è¢«æ·˜æ±°ï¼‰ çš„éœ€è¦ã€‚åæ¥ï¼Œæ…¢æ…¢æˆä¸º Java
ç¨‹åºä¸­çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œèµ‹äºˆäº† <strong>Java ç±»å¯ä»¥è¢«åŠ¨æ€åŠ è½½åˆ°
JVM</strong> ä¸­å¹¶æ‰§è¡Œçš„èƒ½åŠ›ã€‚</p>
<p>æ ¹æ®å®˜æ–¹ API æ–‡æ¡£çš„ä»‹ç»ï¼š</p>
<blockquote>
<p>A class loader is an object that is responsible for loading classes.
The class ClassLoader is an abstract class. Given the binary name of a
class, a class loader should attempt to locate or generate data that
constitutes a definition for the class. A typical strategy is to
transform the name into a file name and then read a "class file" of that
name from a file system.</p>
<p>Every Class object contains a reference to the ClassLoader that
defined it.</p>
<p>Class objects for array classes are not created by class loaders, but
are created automatically as required by the Java runtime. The class
loader for an array class, as returned by Class.getClassLoader() is the
same as the class loader for its element type; if the element type is a
primitive type, then the array class has no class loader.</p>
</blockquote>
<p>ç¿»è¯‘è¿‡æ¥å¤§æ¦‚çš„æ„æ€æ˜¯ï¼š</p>
<blockquote>
<p>ç±»åŠ è½½å™¨æ˜¯ä¸€ä¸ª<strong>è´Ÿè´£åŠ è½½ç±»</strong>çš„å¯¹è±¡ã€‚<code>ClassLoader</code>
æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ç»™å®šç±»çš„<strong>äºŒè¿›åˆ¶åç§°</strong>ï¼Œç±»åŠ è½½å™¨åº”å°è¯•<strong>å®šä½æˆ–ç”Ÿæˆæ„æˆç±»å®šä¹‰çš„æ•°æ®</strong>ã€‚å…¸å‹çš„ç­–ç•¥æ˜¯å°†<strong>åç§°è½¬æ¢ä¸ºæ–‡ä»¶å</strong>ï¼Œç„¶å<strong>ä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–</strong>è¯¥åç§°çš„â€œç±»æ–‡ä»¶â€ã€‚</p>
<p>æ¯ä¸ª Java ç±»éƒ½æœ‰ä¸€ä¸ªå¼•ç”¨æŒ‡å‘åŠ è½½å®ƒçš„
<code>ClassLoader</code>ã€‚ä¸è¿‡ï¼Œ<strong>æ•°ç»„ç±»ä¸æ˜¯é€šè¿‡
<code>ClassLoader</code></strong> åˆ›å»ºçš„ï¼Œè€Œæ˜¯ <strong>JVM</strong>
åœ¨éœ€è¦çš„æ—¶å€™<strong>è‡ªåŠ¨</strong>åˆ›å»ºçš„ï¼Œ<strong>æ•°ç»„ç±»</strong>é€šè¿‡<code>getClassLoader()</code>æ–¹æ³•è·å–
<code>ClassLoader</code> çš„æ—¶å€™å’Œè¯¥<strong>æ•°ç»„çš„å…ƒç´ ç±»å‹</strong>çš„
<code>ClassLoader</code> æ˜¯<strong>ä¸€è‡´</strong>çš„ã€‚</p>
</blockquote>
<p>ä»ä¸Šé¢çš„ä»‹ç»å¯ä»¥çœ‹å‡º:</p>
<ul>
<li>ç±»åŠ è½½å™¨æ˜¯ä¸€ä¸ªè´Ÿè´£åŠ è½½ç±»çš„å¯¹è±¡ï¼Œç”¨äºå®ç°ç±»åŠ è½½è¿‡ç¨‹ä¸­çš„<strong>åŠ è½½</strong>è¿™ä¸€æ­¥ã€‚</li>
<li>æ¯ä¸ª <strong>Java ç±»</strong>éƒ½æœ‰ä¸€ä¸ª<strong>å¼•ç”¨æŒ‡å‘åŠ è½½å®ƒçš„
<code>ClassLoader</code></strong>ã€‚</li>
<li>æ•°ç»„ç±»ä¸æ˜¯é€šè¿‡ <code>ClassLoader</code>
åˆ›å»ºçš„ï¼ˆæ•°ç»„ç±»æ²¡æœ‰å¯¹åº”çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼‰ï¼Œæ˜¯<strong>ç”± JVM
ç›´æ¥ç”Ÿæˆ</strong>çš„ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Class</span>&lt;T&gt; &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> ClassLoader classLoader;</span><br><span class="line">  <span class="meta">@CallerSensitive</span></span><br><span class="line">  <span class="keyword">public</span> ClassLoader <span class="title function_">getClassLoader</span><span class="params">()</span> &#123;</span><br><span class="line">     <span class="comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç®€å•æ¥è¯´ï¼Œ<strong>ç±»åŠ è½½å™¨çš„ä¸»è¦ä½œç”¨å°±æ˜¯åŠ è½½ Java ç±»çš„å­—èŠ‚ç ï¼ˆ
<code>.class</code> æ–‡ä»¶ï¼‰åˆ° JVM ä¸­ï¼ˆåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„
<code>Class</code> å¯¹è±¡ï¼‰ã€‚</strong> å­—èŠ‚ç å¯ä»¥æ˜¯ Java
æºç¨‹åºï¼ˆ<code>.java</code>æ–‡ä»¶ï¼‰ç»è¿‡ <code>javac</code>
ç¼–è¯‘å¾—æ¥ï¼Œä¹Ÿå¯ä»¥æ˜¯é€šè¿‡å·¥å…·åŠ¨æ€ç”Ÿæˆæˆ–è€…é€šè¿‡ç½‘ç»œä¸‹è½½å¾—æ¥ã€‚</p>
<p>å…¶å®é™¤äº†<strong>åŠ è½½ç±»</strong>ä¹‹å¤–ï¼Œç±»åŠ è½½å™¨è¿˜å¯ä»¥<strong>åŠ è½½</strong>
Java
åº”ç”¨æ‰€éœ€çš„èµ„æºå¦‚<strong>æ–‡æœ¬</strong>ã€<strong>å›¾åƒ</strong>ã€<strong>é…ç½®æ–‡ä»¶</strong>ã€<strong>è§†é¢‘</strong>ç­‰ç­‰æ–‡ä»¶èµ„æºã€‚æœ¬æ–‡åªè®¨è®ºå…¶æ ¸å¿ƒåŠŸèƒ½ï¼š<strong>åŠ è½½ç±»</strong>ã€‚</p>
<h3 id="ç±»åŠ è½½å™¨åŠ è½½è§„åˆ™">ç±»åŠ è½½å™¨åŠ è½½è§„åˆ™</h3>
<p>JVM
å¯åŠ¨çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰çš„ç±»ï¼Œè€Œæ˜¯<strong>æ ¹æ®éœ€è¦å»åŠ¨æ€åŠ è½½</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤§éƒ¨åˆ†ç±»åœ¨å…·ä½“ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šå»åŠ è½½ï¼Œè¿™æ ·å¯¹å†…å­˜æ›´åŠ å‹å¥½ã€‚</p>
<p>å¯¹äº<strong>å·²ç»åŠ è½½çš„ç±»ä¼šè¢«æ”¾åœ¨ <code>ClassLoader</code>
ä¸­</strong>ã€‚åœ¨ç±»åŠ è½½çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šé¦–å…ˆåˆ¤æ–­<strong>å½“å‰ç±»æ˜¯å¦è¢«åŠ è½½è¿‡</strong>ã€‚å·²ç»è¢«åŠ è½½çš„ç±»ä¼šç›´æ¥è¿”å›ï¼Œå¦åˆ™æ‰ä¼šå°è¯•åŠ è½½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä¸€ä¸ªç±»åŠ è½½å™¨æ¥è¯´ï¼Œ<strong>ç›¸åŒäºŒè¿›åˆ¶åç§°çš„ç±»åªä¼šè¢«åŠ è½½ä¸€æ¬¡</strong>ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassLoader</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> ClassLoader parent;</span><br><span class="line">  <span class="comment">// ç”±è¿™ä¸ªç±»åŠ è½½å™¨åŠ è½½çš„ç±»ã€‚</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> Vector&lt;Class&lt;?&gt;&gt; classes = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;();</span><br><span class="line">  <span class="comment">// ç”±VMè°ƒç”¨ï¼Œç”¨æ­¤ç±»åŠ è½½å™¨è®°å½•æ¯ä¸ªå·²åŠ è½½ç±»ã€‚</span></span><br><span class="line">  <span class="keyword">void</span> <span class="title function_">addClass</span><span class="params">(Class&lt;?&gt; c)</span> &#123;</span><br><span class="line">        classes.addElement(c);</span><br><span class="line">   &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç±»åŠ è½½å™¨æ€»ç»“">ç±»åŠ è½½å™¨æ€»ç»“</h3>
<p>JVM ä¸­å†…ç½®äº†ä¸‰ä¸ªé‡è¦çš„ <code>ClassLoader</code>ï¼š</p>
<ol type="1">
<li><strong><code>BootstrapClassLoader</code>(å¯åŠ¨ç±»åŠ è½½å™¨)</strong>
ï¼šæœ€é¡¶å±‚çš„åŠ è½½ç±»ï¼Œç”± C++å®ç°ï¼Œé€šå¸¸<strong>è¡¨ç¤ºä¸º
nullï¼ˆæ„æ€æ˜¯å¦‚æœç”¨ä»£ç æ¥getï¼Œä¼šå¾—åˆ°nullï¼‰</strong>ï¼Œå¹¶ä¸”æ²¡æœ‰çˆ¶çº§ï¼Œä¸»è¦ç”¨æ¥åŠ è½½
JDK å†…éƒ¨çš„æ ¸å¿ƒç±»åº“ï¼ˆ
<strong><code>%JAVA_HOME%/lib</code></strong>ç›®å½•ä¸‹çš„
<code>rt.jar</code> ã€<code>resources.jar</code>
ã€<code>charsets.jar</code>ç­‰ jar åŒ…å’Œç±»ï¼‰ä»¥åŠè¢«
<strong><code>-Xbootclasspath</code>å‚æ•°æŒ‡å®š</strong>çš„è·¯å¾„ä¸‹çš„æ‰€æœ‰ç±»ã€‚</li>
<li><strong><code>ExtensionClassLoader</code>(æ‰©å±•ç±»åŠ è½½å™¨)</strong>
ï¼šä¸»è¦è´Ÿè´£åŠ è½½ <strong><code>%JRE_HOME%/lib/ext</code></strong> ç›®å½•ä¸‹çš„
jar åŒ…å’Œç±»ä»¥åŠè¢« <strong><code>java.ext.dirs</code>
ç³»ç»Ÿå˜é‡æ‰€æŒ‡å®šçš„è·¯å¾„</strong>ä¸‹çš„æ‰€æœ‰ç±»ã€‚</li>
<li><strong><code>AppClassLoader</code>(åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨)</strong>
ï¼šé¢å‘æˆ‘ä»¬ç”¨æˆ·çš„åŠ è½½å™¨ï¼Œè´Ÿè´£åŠ è½½<strong>å½“å‰åº”ç”¨ classpath ä¸‹çš„æ‰€æœ‰ jar
åŒ…å’Œç±»</strong>ã€‚</li>
</ol>
<blockquote>
<p>ğŸŒˆ æ‹“å±•ä¸€ä¸‹ï¼š</p>
<ul>
<li><strong><code>rt.jar</code></strong> ï¼š rt
ä»£è¡¨â€œRunTimeâ€ï¼Œ<code>rt.jar</code>æ˜¯JavaåŸºç¡€ç±»åº“ï¼ŒåŒ…å«Java
docé‡Œé¢çœ‹åˆ°çš„æ‰€æœ‰çš„ç±»çš„ç±»æ–‡ä»¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¸¸ç”¨å†…ç½®åº“
<code>java.xxx.*</code>éƒ½åœ¨é‡Œé¢ï¼Œæ¯”å¦‚<code>java.util.*</code>ã€<code>java.io.*</code>ã€<code>java.nio.*</code>ã€<code>java.lang.*</code>ã€<code>java.sql.*</code>ã€<code>java.math.*</code>ã€‚</li>
<li>Java 9
å¼•å…¥äº†æ¨¡å—ç³»ç»Ÿï¼Œå¹¶ä¸”ç•¥å¾®æ›´æ”¹äº†ä¸Šè¿°çš„ç±»åŠ è½½å™¨ã€‚æ‰©å±•ç±»åŠ è½½å™¨è¢«æ”¹åä¸ºå¹³å°ç±»åŠ è½½å™¨ï¼ˆplatform
class loaderï¼‰ã€‚Java SE ä¸­é™¤äº†å°‘æ•°å‡ ä¸ªå…³é”®æ¨¡å—ï¼Œæ¯”å¦‚è¯´
<code>java.base</code>
æ˜¯ç”±å¯åŠ¨ç±»åŠ è½½å™¨åŠ è½½ä¹‹å¤–ï¼Œå…¶ä»–çš„æ¨¡å—å‡ç”±å¹³å°ç±»åŠ è½½å™¨æ‰€åŠ è½½ã€‚</li>
</ul>
</blockquote>
<p>é™¤äº†è¿™ä¸‰ç§ç±»åŠ è½½å™¨ä¹‹å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥åŠ å…¥<strong>è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨</strong>æ¥è¿›è¡Œæ‹“å±•ï¼Œä»¥æ»¡è¶³è‡ªå·±çš„<strong>ç‰¹æ®Šéœ€æ±‚</strong>ã€‚å°±æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹
Java ç±»çš„å­—èŠ‚ç ï¼ˆ <code>.class</code>
æ–‡ä»¶ï¼‰è¿›è¡Œ<strong>åŠ å¯†</strong>ï¼ŒåŠ è½½æ—¶å†åˆ©ç”¨è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨å¯¹å…¶<strong>è§£å¯†</strong>ã€‚</p>
<figure>
<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230312100217901.png"
alt="image-20230312100217901" />
<figcaption aria-hidden="true">image-20230312100217901</figcaption>
</figure>
<p><strong>é™¤äº† <code>BootstrapClassLoader</code></strong> æ˜¯ JVM
è‡ªèº«çš„ä¸€éƒ¨åˆ†ä¹‹å¤–ï¼Œå…¶ä»–æ‰€æœ‰çš„ç±»åŠ è½½å™¨éƒ½æ˜¯åœ¨ <strong>JVM
å¤–éƒ¨</strong>å®ç°çš„ï¼Œå¹¶ä¸”å…¨éƒ½<strong>ç»§æ‰¿è‡ª
<code>ClassLoader</code>æŠ½è±¡ç±»</strong>ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œä»¥ä¾¿è®©åº”ç”¨ç¨‹åºè‡ªå·±å†³å®šå¦‚ä½•å»è·å–æ‰€éœ€çš„ç±»ã€‚</p>
<p>æ¯ä¸ª <code>ClassLoader</code>
å¯ä»¥é€šè¿‡<strong><code>getParent()</code>è·å–å…¶çˆ¶
<code>ClassLoader</code></strong>ï¼Œå¦‚æœè·å–åˆ° <code>ClassLoader</code>
ä¸º<strong><code>null</code></strong>çš„è¯ï¼Œé‚£ä¹ˆè¯¥ç±»æ˜¯é€šè¿‡
<strong><code>BootstrapClassLoader</code></strong> åŠ è½½çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassLoader</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// çˆ¶åŠ è½½å™¨</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> ClassLoader parent;</span><br><span class="line">  <span class="meta">@CallerSensitive</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">final</span> ClassLoader <span class="title function_">getParent</span><span class="params">()</span> &#123;</span><br><span class="line">     <span class="comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä¸ºä»€ä¹ˆ è·å–åˆ° <code>ClassLoader</code>
ä¸º<code>null</code>å°±æ˜¯ <code>BootstrapClassLoader</code>
åŠ è½½çš„å‘¢ï¼Ÿ</strong> è¿™æ˜¯å› ä¸º<code>BootstrapClassLoader</code> <strong>ç”±
C++</strong> å®ç°ï¼Œç”±äºè¿™ä¸ª C++ å®ç°çš„ç±»åŠ è½½å™¨åœ¨ <strong>Java
ä¸­æ˜¯æ²¡æœ‰ä¸ä¹‹å¯¹åº”çš„ç±»</strong>çš„ï¼Œæ‰€ä»¥æ‹¿åˆ°çš„ç»“æœæ˜¯ nullã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªè·å– <code>ClassLoader</code> çš„å°æ¡ˆä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrintClassLoaderTree</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> PrintClassLoaderTree.class.getClassLoader();</span><br><span class="line"></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">split</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;|--&quot;</span>);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">needContinue</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (needContinue)&#123;</span><br><span class="line">            System.out.println(split.toString() + classLoader);</span><br><span class="line">            <span class="keyword">if</span>(classLoader == <span class="literal">null</span>)&#123;</span><br><span class="line">                needContinue = <span class="literal">false</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                classLoader = classLoader.getParent();</span><br><span class="line">                split.insert(<span class="number">0</span>, <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºç»“æœ(JDK 8 )ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">|--sun.misc.Launcher$AppClassLoader@18b4aac2</span><br><span class="line">    |--sun.misc.Launcher$ExtClassLoader@53bd815b</span><br><span class="line">        |--null</span><br></pre></td></tr></table></figure>
<p>ä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>æˆ‘ä»¬ç¼–å†™çš„ Java ç±» <code>PrintClassLoaderTree</code> çš„
<code>ClassLoader</code> æ˜¯<code>AppClassLoader</code>ï¼›</li>
<li><code>AppClassLoader</code>çš„çˆ¶ <code>ClassLoader</code>
æ˜¯<code>ExtClassLoader</code>ï¼›</li>
<li><code>ExtClassLoader</code>çš„çˆ¶<code>ClassLoader</code>æ˜¯<code>Bootstrap ClassLoader</code>ï¼Œå› æ­¤è¾“å‡ºç»“æœä¸º
nullã€‚</li>
</ul>
<h3 id="è‡ªå®šä¹‰ç±»åŠ è½½å™¨">è‡ªå®šä¹‰ç±»åŠ è½½å™¨</h3>
<p>æˆ‘ä»¬å‰é¢ä¹Ÿè¯´è¯´äº†ï¼Œé™¤äº† <code>BootstrapClassLoader</code>
å…¶ä»–ç±»åŠ è½½å™¨å‡ç”± Java
å®ç°ä¸”å…¨éƒ¨ç»§æ‰¿è‡ª<code>java.lang.ClassLoader</code>ã€‚å¦‚æœæˆ‘ä»¬è¦è‡ªå®šä¹‰è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œå¾ˆæ˜æ˜¾éœ€è¦ç»§æ‰¿
<code>ClassLoader</code>æŠ½è±¡ç±»ã€‚</p>
<p><code>ClassLoader</code> ç±»æœ‰ä¸¤ä¸ªå…³é”®çš„æ–¹æ³•ï¼š</p>
<ul>
<li><code>protected Class loadClass(String name, boolean resolve)</code>ï¼š<strong>åŠ è½½æŒ‡å®šäºŒè¿›åˆ¶åç§°çš„ç±»ï¼Œå®ç°äº†åŒäº²å§”æ´¾æœºåˆ¶</strong>
ã€‚<code>name</code> ä¸ºç±»çš„äºŒè¿›åˆ¶åç§°ï¼Œ<code>resove</code> å¦‚æœä¸º
trueï¼Œåœ¨åŠ è½½æ—¶<strong>è°ƒç”¨ <code>resolveClass(Class&lt;?&gt; c)</code>
æ–¹æ³•è§£æè¯¥ç±»</strong>ã€‚</li>
<li><code>protected Class findClass(String name)</code>ï¼š<strong>æ ¹æ®ç±»çš„äºŒè¿›åˆ¶åç§°æ¥æŸ¥æ‰¾ç±»</strong>ï¼Œé»˜è®¤å®ç°æ˜¯ç©ºæ–¹æ³•ã€‚</li>
</ul>
<p>å®˜æ–¹ API æ–‡æ¡£ä¸­å†™åˆ°ï¼š</p>
<blockquote>
<p>Subclasses of <code>ClassLoader</code> are encouraged to override
<code>findClass(String name)</code>, rather than this method.</p>
<p>å»ºè®® <code>ClassLoader</code>çš„å­ç±»é‡å†™
<code>findClass(String name)</code>æ–¹æ³•è€Œä¸æ˜¯<code>loadClass(String name, boolean resolve)</code>
æ–¹æ³•ã€‚</p>
</blockquote>
<p>å¦‚æœæˆ‘ä»¬ä¸æƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œå°±é‡å†™ <code>ClassLoader</code> ç±»ä¸­çš„
<code>findClass()</code>
æ–¹æ³•å³å¯ï¼Œ<strong>æ— æ³•è¢«çˆ¶ç±»åŠ è½½å™¨åŠ è½½çš„ç±»</strong>æœ€ç»ˆä¼šé€šè¿‡è¿™ä¸ªæ–¹æ³•è¢«åŠ è½½ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³<strong>æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹</strong>åˆ™éœ€è¦<strong>é‡å†™
<code>loadClass()</code></strong> æ–¹æ³•ã€‚</p>
<h2 id="åŒäº²å§”æ´¾æ¨¡å‹">åŒäº²å§”æ´¾æ¨¡å‹</h2>
<h3 id="åŒäº²å§”æ´¾æ¨¡å‹ä»‹ç»">åŒäº²å§”æ´¾æ¨¡å‹ä»‹ç»</h3>
<p>ç±»åŠ è½½å™¨æœ‰å¾ˆå¤šç§ï¼Œå½“æˆ‘ä»¬æƒ³è¦åŠ è½½ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå…·ä½“æ˜¯å“ªä¸ªç±»åŠ è½½å™¨åŠ è½½å‘¢ï¼Ÿè¿™å°±éœ€è¦æåˆ°åŒäº²å§”æ´¾æ¨¡å‹äº†ã€‚</p>
<p>æ ¹æ®å®˜ç½‘ä»‹ç»ï¼š</p>
<blockquote>
<p>The ClassLoader class uses a delegation model to search for classes
and resources. Each instance of ClassLoader has an associated parent
class loader. When requested to find a class or resource, a ClassLoader
instance will delegate the search for the class or resource to its
parent class loader before attempting to find the class or resource
itself. The virtual machine's built-in class loader, called the
"bootstrap class loader", does not itself have a parent but may serve as
the parent of a ClassLoader instance.</p>
</blockquote>
<p>ç¿»è¯‘è¿‡æ¥å¤§æ¦‚çš„æ„æ€æ˜¯ï¼š</p>
<blockquote>
<p><code>ClassLoader</code>
ç±»ä½¿ç”¨<strong>å§”æ‰˜æ¨¡å‹</strong>æ¥<strong>æœç´¢ç±»å’Œèµ„æº</strong>ã€‚æ¯ä¸ª
<code>ClassLoader</code>
å®ä¾‹éƒ½æœ‰ä¸€ä¸ªç›¸å…³çš„çˆ¶ç±»åŠ è½½å™¨ã€‚éœ€è¦æŸ¥æ‰¾ç±»æˆ–èµ„æºæ—¶ï¼Œ<code>ClassLoader</code>
å®ä¾‹ä¼šåœ¨è¯•å›¾äº²è‡ªæŸ¥æ‰¾ç±»æˆ–èµ„æºä¹‹å‰ï¼Œå°†æœç´¢ç±»æˆ–èµ„æºçš„ä»»åŠ¡å§”æ‰˜ç»™å…¶çˆ¶ç±»åŠ è½½å™¨ã€‚
è™šæ‹Ÿæœºä¸­è¢«ç§°ä¸º "bootstrap class
loader"çš„å†…ç½®ç±»åŠ è½½å™¨æœ¬èº«æ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨ï¼Œä½†æ˜¯å¯ä»¥ä½œä¸º
<code>ClassLoader</code> å®ä¾‹çš„çˆ¶ç±»åŠ è½½å™¨ã€‚</p>
</blockquote>
<p>ä»ä¸Šé¢çš„ä»‹ç»å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li><code>ClassLoader</code>
ç±»<strong>ä½¿ç”¨å§”æ‰˜æ¨¡å‹æ¥æœç´¢ç±»å’Œèµ„æº</strong>ã€‚</li>
<li>åŒäº²å§”æ´¾æ¨¡å‹è¦æ±‚é™¤äº†<strong>é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨</strong>å¤–ï¼Œå…¶ä½™çš„ç±»åŠ è½½å™¨éƒ½<strong>åº”æœ‰è‡ªå·±çš„çˆ¶ç±»åŠ è½½å™¨</strong>ã€‚</li>
<li><code>ClassLoader</code>
å®ä¾‹ä¼šåœ¨è¯•å›¾<strong>äº²è‡ªæŸ¥æ‰¾ç±»æˆ–èµ„æºä¹‹å‰</strong>ï¼Œå°†æœç´¢ç±»æˆ–èµ„æºçš„ä»»åŠ¡å§”æ‰˜ç»™å…¶çˆ¶ç±»åŠ è½½å™¨ã€‚</li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºçš„å„ç§ç±»åŠ è½½å™¨ä¹‹é—´çš„å±‚æ¬¡å…³ç³»è¢«ç§°ä¸ºç±»åŠ è½½å™¨çš„â€œ<strong>åŒäº²å§”æ´¾æ¨¡å‹(Parents
Delegation Model)</strong>â€ã€‚</p>
<figure>
<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230312100717451.png"
alt="image-20230312100717451" />
<figcaption aria-hidden="true">image-20230312100717451</figcaption>
</figure>
<p>æ³¨æ„âš ï¸ï¼šåŒäº²å§”æ´¾æ¨¡å‹å¹¶ä¸æ˜¯ä¸€ç§å¼ºåˆ¶æ€§çš„çº¦æŸï¼Œåªæ˜¯ JDK
å®˜æ–¹æ¨èçš„ä¸€ç§æ–¹å¼ã€‚å¦‚æœæˆ‘ä»¬å› ä¸ºæŸäº›ç‰¹æ®Šéœ€æ±‚æƒ³è¦æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåæ–‡ä¼šä»‹ç»å…·ä½“çš„æ–¹æ³•ã€‚</p>
<p>å…¶å®è¿™ä¸ªåŒäº²ç¿»è¯‘çš„å®¹æ˜“è®©åˆ«äººè¯¯è§£ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç†è§£çš„åŒäº²éƒ½æ˜¯çˆ¶æ¯ï¼Œè¿™é‡Œçš„åŒäº²æ›´å¤šåœ°è¡¨è¾¾çš„æ˜¯â€œçˆ¶æ¯è¿™ä¸€è¾ˆâ€çš„äºº<strong>è€Œå·²ï¼Œå¹¶ä¸æ˜¯è¯´çœŸçš„æœ‰ä¸€ä¸ª</strong>
<code>MotherClassLoader</code> å’Œä¸€ä¸ª<code>FatherClassLoader</code>
ã€‚ä¸ªäººè§‰å¾—ç¿»è¯‘æˆå•äº²å§”æ´¾æ¨¡å‹æ›´å¥½ä¸€äº›ï¼Œä¸è¿‡ï¼Œå›½å†…æ—¢ç„¶ç¿»è¯‘æˆäº†åŒäº²å§”æ´¾æ¨¡å‹å¹¶æµä¼ äº†ï¼ŒæŒ‰ç…§è¿™ä¸ªæ¥ä¹Ÿæ²¡é—®é¢˜ï¼Œä¸è¦è¢«è¯¯è§£äº†å°±å¥½ã€‚</p>
<p>å¦å¤–ï¼Œç±»åŠ è½½å™¨ä¹‹é—´çš„çˆ¶å­å…³ç³»<strong>ä¸€èˆ¬ä¸æ˜¯ä»¥ç»§æ‰¿çš„å…³ç³»æ¥å®ç°</strong>çš„ï¼Œè€Œæ˜¯é€šå¸¸<strong>ä½¿ç”¨ç»„åˆå…³ç³»æ¥å¤ç”¨çˆ¶åŠ è½½å™¨</strong>çš„ä»£ç ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">ClassLoader</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// ç»„åˆ</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> ClassLoader parent;</span><br><span class="line">  <span class="keyword">protected</span> <span class="title function_">ClassLoader</span><span class="params">(ClassLoader parent)</span> &#123;</span><br><span class="line">       <span class="built_in">this</span>(checkCreateClassLoader(), parent);</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œæœ‰ä¸€æ¡éå¸¸ç»å…¸çš„è®¾è®¡åŸåˆ™ï¼š
<strong>ç»„åˆä¼˜äºç»§æ‰¿ï¼Œå¤šç”¨ç»„åˆå°‘ç”¨ç»§æ‰¿ã€‚</strong></p>
<h3 id="åŒäº²å§”æ´¾æ¨¡å‹çš„æ‰§è¡Œæµç¨‹">åŒäº²å§”æ´¾æ¨¡å‹çš„æ‰§è¡Œæµç¨‹</h3>
<p>åŒäº²å§”æ´¾æ¨¡å‹çš„å®ç°ä»£ç éå¸¸ç®€å•ï¼Œé€»è¾‘éå¸¸æ¸…æ™°ï¼Œéƒ½é›†ä¸­åœ¨
<code>java.lang.ClassLoader</code> çš„ <code>loadClass()</code>
ä¸­ï¼Œç›¸å…³ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> ClassLoader parent;</span><br><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; loadClass(String name, <span class="type">boolean</span> resolve)</span><br><span class="line">        <span class="keyword">throws</span> ClassNotFoundException</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (getClassLoadingLock(name)) &#123;</span><br><span class="line">            <span class="comment">// é¦–å…ˆï¼Œæ£€æŸ¥è¯·æ±‚çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½è¿‡</span></span><br><span class="line">            Class&lt;?&gt; c = findLoadedClass(name);</span><br><span class="line">            <span class="keyword">if</span> (c == <span class="literal">null</span>) &#123; </span><br><span class="line">            	<span class="comment">//å¦‚æœ c ä¸º nullï¼Œåˆ™è¯´æ˜è¯¥ç±»æ²¡æœ‰è¢«åŠ è½½è¿‡</span></span><br><span class="line">                <span class="type">long</span> <span class="variable">t0</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;<span class="comment">//çˆ¶åŠ è½½å™¨ä¸ä¸ºç©ºï¼Œè°ƒç”¨çˆ¶åŠ è½½å™¨loadClass()æ–¹æ³•å¤„ç†</span></span><br><span class="line">                        <span class="comment">//æ³¨æ„ï¼Œè¿™é‡Œæ˜¯ä¸€å±‚å±‚æŠ›ä¸Šå»ï¼Œæœ‰ç‚¹ç±»ä¼¼æŠŠæ–¹æ³•æ”¾è¿›æ ˆï¼Œç„¶åå¦‚æœBootstrapClassLoaderåŠ è½½ä¸äº†ï¼Œå°±ä¼šæŠ›å¼‚å¸¸ï¼Œç”±è‡ªå·±åŠ è½½ï¼ˆå¦‚æœè‡ªå·±åŠ è½½ä¸äº†ï¼Œè¿˜æ˜¯ä¼šæŠ›å¼‚å¸¸ï¼Œç„¶åå†æ¬¡åŠ è½½æƒå›åˆ°å­ç±»ï¼‰</span></span><br><span class="line">                        c = parent.loadClass(name, <span class="literal">false</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;<span class="comment">//çˆ¶åŠ è½½å™¨ä¸ºç©ºï¼Œä½¿ç”¨å¯åŠ¨ç±»åŠ è½½å™¨ BootstrapClassLoader åŠ è½½</span></span><br><span class="line">                        c = findBootstrapClassOrNull(name);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">                   <span class="comment">//æŠ›å‡ºå¼‚å¸¸è¯´æ˜çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®ŒæˆåŠ è½½è¯·æ±‚</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (c == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">//å½“çˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½æ—¶ï¼Œåˆ™è°ƒç”¨findClassæ–¹æ³•æ¥åŠ è½½è¯¥ç±»</span></span><br><span class="line">                	<span class="comment">//ç”¨æˆ·å¯é€šè¿‡è¦†å†™è¯¥æ–¹æ³•ï¼Œæ¥è‡ªå®šä¹‰ç±»åŠ è½½å™¨</span></span><br><span class="line">                    <span class="type">long</span> <span class="variable">t1</span> <span class="operator">=</span> System.nanoTime();</span><br><span class="line">                    <span class="comment">//è‡ªå·±å°è¯•åŠ è½½</span></span><br><span class="line">                    c = findClass(name);</span><br><span class="line">					<span class="comment">//ç”¨äºç»Ÿè®¡ç±»åŠ è½½å™¨ç›¸å…³çš„ä¿¡æ¯</span></span><br><span class="line">                    <span class="comment">// this is the defining class loader; record the stats</span></span><br><span class="line">                    sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0);</span><br><span class="line">                    sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1);</span><br><span class="line">                    sun.misc.PerfCounter.getFindClasses().increment();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (resolve) &#123;</span><br><span class="line">                <span class="comment">//å¯¹ç±»è¿›è¡Œlinkæ“ä½œ</span></span><br><span class="line">                resolveClass(c);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br></pre></td></tr></table></figure>
<p>æ¯å½“ä¸€ä¸ªç±»åŠ è½½å™¨æ¥æ”¶åˆ°åŠ è½½è¯·æ±‚æ—¶ï¼Œå®ƒä¼šå…ˆ<strong>å°†è¯·æ±‚è½¬å‘ç»™çˆ¶ç±»åŠ è½½å™¨</strong>ã€‚åœ¨çˆ¶ç±»åŠ è½½å™¨<strong>æ²¡æœ‰æ‰¾åˆ°æ‰€è¯·æ±‚çš„ç±»</strong>çš„æƒ…å†µä¸‹ï¼Œè¯¥ç±»åŠ è½½å™¨æ‰ä¼šå°è¯•å»åŠ è½½ã€‚</p>
<p>ç»“åˆä¸Šé¢çš„æºç ï¼Œç®€å•æ€»ç»“ä¸€ä¸‹åŒäº²å§”æ´¾æ¨¡å‹çš„æ‰§è¡Œæµç¨‹ï¼š</p>
<ul>
<li>åœ¨ç±»åŠ è½½çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šé¦–å…ˆåˆ¤æ–­å½“å‰ç±»æ˜¯å¦è¢«åŠ è½½è¿‡ã€‚å·²ç»è¢«åŠ è½½çš„ç±»ä¼šç›´æ¥è¿”å›ï¼Œå¦åˆ™æ‰ä¼šå°è¯•åŠ è½½ï¼ˆæ¯ä¸ªçˆ¶ç±»åŠ è½½å™¨éƒ½ä¼šèµ°ä¸€éè¿™ä¸ªæµç¨‹ï¼‰ã€‚</li>
<li>ç±»åŠ è½½å™¨åœ¨è¿›è¡Œç±»åŠ è½½çš„æ—¶å€™ï¼Œå®ƒé¦–å…ˆä¸ä¼šè‡ªå·±å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨å»å®Œæˆï¼ˆè°ƒç”¨çˆ¶åŠ è½½å™¨
<code>loadClass()</code>æ–¹æ³•æ¥åŠ è½½ç±»ï¼‰ã€‚è¿™æ ·çš„è¯ï¼Œæ‰€æœ‰çš„è¯·æ±‚æœ€ç»ˆéƒ½ä¼šä¼ é€åˆ°é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨
<code>BootstrapClassLoader</code> ä¸­ã€‚</li>
<li>åªæœ‰å½“çˆ¶åŠ è½½å™¨åé¦ˆè‡ªå·±æ— æ³•å®Œæˆè¿™ä¸ªåŠ è½½è¯·æ±‚ï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€çš„ç±»ï¼‰æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ï¼ˆè°ƒç”¨è‡ªå·±çš„
<code>findClass()</code> æ–¹æ³•æ¥åŠ è½½ç±»ï¼‰ã€‚</li>
</ul>
<figure>
<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230312102118086.png"
alt="image-20230312102118086" />
<figcaption aria-hidden="true">image-20230312102118086</figcaption>
</figure>
<p>ğŸŒˆ æ‹“å±•ä¸€ä¸‹ï¼š</p>
<p><strong>JVM åˆ¤å®šä¸¤ä¸ª Java ç±»æ˜¯å¦ç›¸åŒçš„å…·ä½“è§„åˆ™</strong> ï¼šJVM
ä¸ä»…è¦çœ‹<strong>ç±»çš„å…¨åæ˜¯å¦ç›¸åŒ</strong>ï¼Œè¿˜è¦çœ‹<strong>åŠ è½½æ­¤ç±»çš„ç±»åŠ è½½å™¨</strong>æ˜¯å¦ä¸€æ ·ã€‚åªæœ‰ä¸¤è€…éƒ½ç›¸åŒçš„æƒ…å†µï¼Œæ‰è®¤ä¸ºä¸¤ä¸ªç±»æ˜¯ç›¸åŒçš„ã€‚<strong>å³ä½¿</strong>ä¸¤ä¸ªç±»æ¥æºäº<strong>åŒä¸€ä¸ª
<code>Class</code></strong>
æ–‡ä»¶ï¼Œè¢«<strong>åŒä¸€ä¸ªè™šæ‹Ÿæœº</strong>åŠ è½½ï¼Œåªè¦<strong>åŠ è½½å®ƒä»¬çš„ç±»åŠ è½½å™¨ä¸åŒ</strong>ï¼Œé‚£è¿™<strong>ä¸¤ä¸ªç±»å°±å¿…å®šä¸ç›¸åŒ</strong>ã€‚</p>
<h3 id="åŒäº²å§”æ´¾æ¨¡å‹çš„å¥½å¤„">åŒäº²å§”æ´¾æ¨¡å‹çš„å¥½å¤„</h3>
<p>åŒäº²å§”æ´¾æ¨¡å‹ä¿è¯äº† Java
ç¨‹åºçš„ç¨³å®šè¿è¡Œï¼Œå¯ä»¥<strong>é¿å…ç±»çš„é‡å¤åŠ è½½</strong>ï¼ˆJVM
åŒºåˆ†ä¸åŒç±»çš„æ–¹å¼ä¸ä»…ä»…æ ¹æ®ç±»åï¼Œç›¸åŒçš„ç±»æ–‡ä»¶è¢«ä¸åŒçš„ç±»åŠ è½½å™¨åŠ è½½äº§ç”Ÿçš„æ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»ï¼‰ï¼Œä¹Ÿä¿è¯äº†
Java çš„æ ¸å¿ƒ API ä¸è¢«ç¯¡æ”¹ã€‚</p>
<p>å¦‚æœæ²¡æœ‰ä½¿ç”¨åŒäº²å§”æ´¾æ¨¡å‹ï¼Œè€Œæ˜¯æ¯ä¸ªç±»åŠ è½½å™¨åŠ è½½è‡ªå·±çš„è¯å°±ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬<strong>ç¼–å†™ä¸€ä¸ªç§°ä¸º
<code>java.lang.Object</code></strong>
ç±»çš„è¯ï¼Œé‚£ä¹ˆç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œç³»ç»Ÿå°±ä¼šå‡ºç°ä¸¤ä¸ªä¸åŒçš„ <code>Object</code>
ç±»ã€‚åŒäº²å§”æ´¾æ¨¡å‹å¯ä»¥<strong>ä¿è¯åŠ è½½çš„æ˜¯ JRE é‡Œçš„é‚£ä¸ª
<code>Object</code> ç±»</strong>ï¼Œè€Œä¸æ˜¯ä½ å†™çš„ <code>Object</code>
ç±»ã€‚è¿™æ˜¯å› ä¸º <code>AppClassLoader</code> åœ¨åŠ è½½ä½ çš„ <code>Object</code>
ç±»æ—¶ï¼Œä¼šå§”æ‰˜ç»™ <code>ExtClassLoader</code> å»åŠ è½½ï¼Œè€Œ
<code>ExtClassLoader</code> åˆä¼šå§”æ‰˜ç»™
<code>BootstrapClassLoader</code>ï¼Œ<strong><code>BootstrapClassLoader</code>
å‘ç°è‡ªå·±å·²ç»åŠ è½½è¿‡äº† <code>Object</code>
ç±»ï¼Œä¼šç›´æ¥è¿”å›ï¼Œä¸ä¼šå»åŠ è½½ä½ å†™çš„ <code>Object</code> ç±»</strong>ã€‚</p>
<h3 id="æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹æ–¹æ³•">æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹æ–¹æ³•</h3>
<p><del>ä¸ºäº†é¿å…åŒäº²å§”æ‰˜æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªç±»åŠ è½½å™¨ï¼Œç„¶åé‡å†™
<code>loadClass()</code> å³å¯ã€‚</del></p>
<p><strong>ğŸ› ä¿®æ­£ï¼ˆå‚è§ï¼š<a
target="_blank" rel="noopener" href="https://github.com/Snailclimb/JavaGuide/issues/871">issue871</a>
ï¼‰</strong> ï¼šè‡ªå®šä¹‰åŠ è½½å™¨çš„è¯ï¼Œéœ€è¦ç»§æ‰¿ <code>ClassLoader</code>
ã€‚å¦‚æœæˆ‘ä»¬ä¸æƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹ï¼Œå°±<strong>é‡å†™ <code>ClassLoader</code>
ç±»ä¸­çš„ <code>findClass()</code></strong>
æ–¹æ³•å³å¯ï¼Œæ— æ³•è¢«çˆ¶ç±»åŠ è½½å™¨åŠ è½½çš„ç±»æœ€ç»ˆä¼šé€šè¿‡è¿™ä¸ªæ–¹æ³•è¢«åŠ è½½ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹åˆ™éœ€è¦é‡å†™
<code>loadClass()</code> æ–¹æ³•ã€‚</p>
<p>ä¸ºä»€ä¹ˆæ˜¯é‡å†™ <code>loadClass()</code>
æ–¹æ³•æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹å‘¢ï¼ŸåŒäº²å§”æ´¾æ¨¡å‹çš„æ‰§è¡Œæµç¨‹å·²ç»è§£é‡Šäº†ï¼š</p>
<blockquote>
<p>ç±»åŠ è½½å™¨åœ¨è¿›è¡Œç±»åŠ è½½çš„æ—¶å€™ï¼Œå®ƒé¦–å…ˆä¸ä¼šè‡ªå·±å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨å»å®Œæˆï¼ˆè°ƒç”¨çˆ¶åŠ è½½å™¨
<code>loadClass()</code>æ–¹æ³•æ¥åŠ è½½ç±»ï¼‰ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„ Tomcat æœåŠ¡å™¨ä¸ºäº†èƒ½å¤Ÿ<strong>ä¼˜å…ˆåŠ è½½ Web
åº”ç”¨ç›®å½•ä¸‹çš„ç±»</strong>ï¼Œç„¶å<strong>å†åŠ è½½å…¶ä»–ç›®å½•ä¸‹çš„ç±»</strong>ï¼Œå°±<strong>è‡ªå®šä¹‰äº†ç±»åŠ è½½å™¨
<code>WebAppClassLoader</code></strong> æ¥æ‰“ç ´åŒäº²å§”æ‰˜æœºåˆ¶ã€‚è¿™ä¹Ÿæ˜¯
<strong>Tomcat ä¸‹ Web åº”ç”¨ä¹‹é—´çš„ç±»å®ç°éš”ç¦»</strong>çš„å…·ä½“åŸç†ã€‚</p>
<p>Tomcat çš„ç±»åŠ è½½å™¨çš„å±‚æ¬¡ç»“æ„å¦‚ä¸‹ï¼š</p>
<figure>
<img
src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/image-20230312102416811.png"
alt="image-20230312102416811" />
<figcaption aria-hidden="true">image-20230312102416811</figcaption>
</figure>
<p>æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œç ”ç©¶ä¸€ä¸‹ Tomcat
ç±»åŠ è½½å™¨çš„å±‚æ¬¡ç»“æ„ï¼Œè¿™æœ‰åŠ©äºæˆ‘ä»¬ææ‡‚ Tomcat éš”ç¦» Web
åº”ç”¨çš„åŸç†ï¼Œæ¨èèµ„æ–™æ˜¯<a target="_blank" rel="noopener" href="http://gk.link/a/10Egr">ã€Šæ·±å…¥æ‹†è§£ Tomcat
&amp; Jettyã€‹</a>ã€‚</p>
<h2 id="æ¨èé˜…è¯»">æ¨èé˜…è¯»</h2>
<ul>
<li>ã€Šæ·±å…¥æ‹†è§£ Java è™šæ‹Ÿæœºã€‹</li>
<li>æ·±å…¥åˆ†æ Java ClassLoader
åŸç†ï¼šhttps://blog.csdn.net/xyang81/article/details/7292380</li>
<li>Java
ç±»åŠ è½½å™¨(ClassLoader)ï¼šhttp://gityuan.com/2016/01/24/java-classloader/</li>
<li>Class Loaders in
Javaï¼šhttps://www.baeldung.com/java-classloaders</li>
<li>Class ClassLoader - Oracle
å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html</li>
<li>è€å¤§éš¾çš„ Java ClassLoader
å†ä¸ç†è§£å°±è€äº†ï¼šhttps://zhuanlan.zhihu.com/p/51374915</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%A4%8D%E4%B9%A0/" rel="tag"># å¤ä¹ </a>
              <a href="/tags/%E5%A4%8D%E4%B9%A0-javaGuide/" rel="tag"># å¤ä¹ -javaGuide</a>
              <a href="/tags/%E5%A4%8D%E4%B9%A0-javaGuide-jvm/" rel="tag"># å¤ä¹ -javaGuide-jvm</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/12/16/review/java_guide/java/jvm/ly0404lyclassloader-process/" rel="prev" title="ç±»åŠ è½½è¿‡ç¨‹">
      <i class="fa fa-chevron-left"></i> ç±»åŠ è½½è¿‡ç¨‹
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/12/18/review/java_guide/java/jvm/ly0403lyclass-structure/" rel="next" title="ç±»æ–‡ä»¶ç»“æ„">
      ç±»æ–‡ä»¶ç»“æ„ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  
  <div class="comments">
  <script src="https://utteranc.es/client.js" repo="lwmfjc/lwmfjc.github.io.comment" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script>
  </div>
  
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9E%E9%A1%BE%E4%B8%80%E4%B8%8B%E7%B1%BB%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">å›é¡¾ä¸€ä¸‹ç±»åŠ è½½è¿‡ç¨‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="nav-number">2.</span> <span class="nav-text">ç±»åŠ è½½å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="nav-number">2.1.</span> <span class="nav-text">ç±»åŠ è½½å™¨ä»‹ç»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E5%8A%A0%E8%BD%BD%E8%A7%84%E5%88%99"><span class="nav-number">2.2.</span> <span class="nav-text">ç±»åŠ è½½å™¨åŠ è½½è§„åˆ™</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8%E6%80%BB%E7%BB%93"><span class="nav-number">2.3.</span> <span class="nav-text">ç±»åŠ è½½å™¨æ€»ç»“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8"><span class="nav-number">2.4.</span> <span class="nav-text">è‡ªå®šä¹‰ç±»åŠ è½½å™¨</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.</span> <span class="nav-text">åŒäº²å§”æ´¾æ¨¡å‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B%E4%BB%8B%E7%BB%8D"><span class="nav-number">3.1.</span> <span class="nav-text">åŒäº²å§”æ´¾æ¨¡å‹ä»‹ç»</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-number">3.2.</span> <span class="nav-text">åŒäº²å§”æ´¾æ¨¡å‹çš„æ‰§è¡Œæµç¨‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="nav-number">3.3.</span> <span class="nav-text">åŒäº²å§”æ´¾æ¨¡å‹çš„å¥½å¤„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E7%A0%B4%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="nav-number">3.4.</span> <span class="nav-text">æ‰“ç ´åŒäº²å§”æ´¾æ¨¡å‹æ–¹æ³•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB"><span class="nav-number">4.</span> <span class="nav-text">æ¨èé˜…è¯»</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="åˆ˜æ˜“"
      src="https://raw.githubusercontent.com/lwmfjc/lwmfjc.github.io.resource/main/img/avatar.png">
  <p class="site-author-name" itemprop="name">åˆ˜æ˜“</p>
  <div class="site-description" itemprop="description">çŸ¥å‘½ä¸æƒ§ æ—¥æ—¥è‡ªæ–°</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">230</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">43</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lwmfjc" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;lwmfjc" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">åˆ˜æ˜“</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="ç«™ç‚¹æ€»å­—æ•°">1.5m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">45:11</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
